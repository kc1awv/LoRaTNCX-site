const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/esp32-BhDgbdPM.js","assets/rom-Caghk6Eh.js","assets/esp32c2-BgJnfC_0.js","assets/esp32c3-DQVnZhm-.js","assets/esp32c6-DCdrSVB_.js","assets/esp32c61-fw4oG-k4.js","assets/esp32c5-DwoL7O9B.js","assets/esp32h2-CYJUgF5R.js","assets/esp32s3-93JqgNdb.js","assets/esp32s2-BzCGs-7A.js","assets/esp8266-CgWi2x7b.js","assets/esp32p4-BQNWBb2f.js"])))=>i.map(i=>d[i]);
import{e as Kr,_ as h,o as Le,i as N,x as g,a as H,n as p,t as Vt,m as Ne,b as Q,E as A,c as le,s as ia,D as ra,d as ie,f as Zt,r as P,g as oa,h as aa,j as Li,k as sa,B as Yr,l as rt,p as jr,q as Xr,u as Oe,T as ot,v as na,w as ye,y as la}from"./styles-Bc1Iw6Cm.js";import{_ as z}from"./index-dDqL-lNO.js";/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const da=!1;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ca;function ha(i){return(e,t)=>Kr(e,t,{get(){return(this.renderRoot??ca??(ca=document.createDocumentFragment())).querySelectorAll(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function fa(i){return(e,t)=>{const{slot:r}=i??{},o="slot"+(r?`[name=${r}]`:":not([name])");return Kr(e,t,{get(){var s;const a=(s=this.renderRoot)==null?void 0:s.querySelector(o);return(a==null?void 0:a.assignedNodes(i))??[]}})}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jr(i,e=xe){const t=$i(i,e);return t&&(t.tabIndex=0,t.focus()),t}function Qr(i,e=xe){const t=eo(i,e);return t&&(t.tabIndex=0,t.focus()),t}function nt(i,e=xe){for(let t=0;t<i.length;t++){const r=i[t];if(r.tabIndex===0&&e(r))return{item:r,index:t}}return null}function $i(i,e=xe){for(const t of i)if(e(t))return t;return null}function eo(i,e=xe){for(let t=i.length-1;t>=0;t--){const r=i[t];if(e(r))return r}return null}function ua(i,e,t=xe,r=!0){for(let o=1;o<i.length;o++){const a=(o+e)%i.length;if(a<e&&!r)return null;const s=i[a];if(t(s))return s}return i[e]?i[e]:null}function pa(i,e,t=xe,r=!0){for(let o=1;o<i.length;o++){const a=(e-o+i.length)%i.length;if(a>e&&!r)return null;const s=i[a];if(t(s))return s}return i[e]?i[e]:null}function Zi(i,e,t=xe,r=!0){if(e){const o=ua(i,e.index,t,r);return o&&(o.tabIndex=0,o.focus()),o}else return Jr(i,t)}function qi(i,e,t=xe,r=!0){if(e){const o=pa(i,e.index,t,r);return o&&(o.tabIndex=0,o.focus()),o}else return Qr(i,t)}function ma(){return new Event("request-activation",{bubbles:!0,composed:!0})}function xe(i){return!i.disabled}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class to{constructor(e){this.handleKeydown=d=>{const v=d.key;if(d.defaultPrevented||!this.isNavigableKey(v))return;const u=this.items;if(!u.length)return;const f=nt(u,this.isActivatable);d.preventDefault();const _=this.isRtl(),y=_?q.ArrowRight:q.ArrowLeft,x=_?q.ArrowLeft:q.ArrowRight;let b=null;switch(v){case q.ArrowDown:case x:b=Zi(u,f,this.isActivatable,this.wrapNavigation());break;case q.ArrowUp:case y:b=qi(u,f,this.isActivatable,this.wrapNavigation());break;case q.Home:b=Jr(u,this.isActivatable);break;case q.End:b=Qr(u,this.isActivatable);break}b&&f&&f.item!==b&&(f.item.tabIndex=-1)},this.onDeactivateItems=()=>{const d=this.items;for(const v of d)this.deactivateItem(v)},this.onRequestActivation=d=>{this.onDeactivateItems();const v=d.target;this.activateItem(v),v.focus()},this.onSlotchange=()=>{const d=this.items;let v=!1;for(const f of d){if(!f.disabled&&f.tabIndex>-1&&!v){v=!0,f.tabIndex=0;continue}f.tabIndex=-1}if(v)return;const u=$i(d,this.isActivatable);u&&(u.tabIndex=0)};const{isItem:t,getPossibleItems:r,isRtl:o,deactivateItem:a,activateItem:s,isNavigableKey:n,isActivatable:c,wrapNavigation:l}=e;this.isItem=t,this.getPossibleItems=r,this.isRtl=o,this.deactivateItem=a,this.activateItem=s,this.isNavigableKey=n,this.isActivatable=c,this.wrapNavigation=l??(()=>!0)}get items(){const e=this.getPossibleItems(),t=[];for(const r of e){if(this.isItem(r)){t.push(r);continue}const a=r.item;a&&this.isItem(a)&&t.push(a)}return t}activateNextItem(){const e=this.items,t=nt(e,this.isActivatable);return t&&(t.item.tabIndex=-1),Zi(e,t,this.isActivatable,this.wrapNavigation())}activatePreviousItem(){const e=this.items,t=nt(e,this.isActivatable);return t&&(t.item.tabIndex=-1),qi(e,t,this.isActivatable,this.wrapNavigation())}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const va=new Set(Object.values(q));class io extends N{get items(){return this.listController.items}constructor(){super(),this.listController=new to({isItem:e=>e.hasAttribute("md-list-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:e=>{e.tabIndex=-1},activateItem:e=>{e.tabIndex=0},isNavigableKey:e=>va.has(e),isActivatable:e=>!e.disabled&&e.type!=="text"}),this.internals=this.attachInternals(),this.internals.role="list",this.addEventListener("keydown",this.listController.handleKeydown)}render(){return g`
      <slot
        @deactivate-items=${this.listController.onDeactivateItems}
        @request-activation=${this.listController.onRequestActivation}
        @slotchange=${this.listController.onSlotchange}>
      </slot>
    `}activateNextItem(){return this.listController.activateNextItem()}activatePreviousItem(){return this.listController.activatePreviousItem()}}h([Le({flatten:!0})],io.prototype,"slotItems",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ga=H`:host{background:var(--md-list-container-color, var(--md-sys-color-surface, #fef7ff));color:unset;display:flex;flex-direction:column;outline:none;padding:8px 0;position:relative}
`;class ro extends io{}ro.styles=[ga];customElements.define("ew-list",ro);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Di extends N{constructor(){super(...arguments),this.multiline=!1}render(){return g`
      <slot name="container"></slot>
      <slot class="non-text" name="start"></slot>
      <div class="text">
        <slot name="overline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          class="default-slot"
          @slotchange=${this.handleTextSlotChange}></slot>
        <slot name="headline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          name="supporting-text"
          @slotchange=${this.handleTextSlotChange}></slot>
      </div>
      <slot class="non-text" name="trailing-supporting-text"></slot>
      <slot class="non-text" name="end"></slot>
    `}handleTextSlotChange(){let e=!1,t=0;for(const r of this.textSlots)if(_a(r)&&(t+=1),t>1){e=!0;break}this.multiline=e}}h([p({type:Boolean,reflect:!0})],Di.prototype,"multiline",void 0);h([ha(".text slot")],Di.prototype,"textSlots",void 0);function _a(i){var e;for(const t of i.assignedNodes({flatten:!0})){const r=t.nodeType===Node.ELEMENT_NODE,o=t.nodeType===Node.TEXT_NODE&&((e=t.textContent)==null?void 0:e.match(/\S/));if(r||o)return!0}return!1}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ba=H`:host{color:var(--md-sys-color-on-surface, #1d1b20);font-family:var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-large-size, 1rem);font-weight:var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-large-line-height, 1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-medium-size, 0.875rem);font-weight:var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-medium-line-height, 1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mi=class extends Di{};mi.styles=[ba];mi=h([Vt("md-item")],mi);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oo=Symbol.for(""),ya=i=>{if((i==null?void 0:i.r)===oo)return i==null?void 0:i._$litStatic$},Ae=(i,...e)=>({_$litStatic$:e.reduce((t,r,o)=>t+(a=>{if(a._$litStatic$!==void 0)return a._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${a}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+i[o+1],i[0]),r:oo}),Wi=new Map,xa=i=>(e,...t)=>{const r=t.length;let o,a;const s=[],n=[];let c,l=0,d=!1;for(;l<r;){for(c=e[l];l<r&&(a=t[l],(o=ya(a))!==void 0);)c+=o+e[++l],d=!0;l!==r&&n.push(a),s.push(c),l++}if(l===r&&s.push(e[r]),d){const v=s.join("$$lit$$");(e=Wi.get(v))===void 0&&(s.raw=s,Wi.set(v,e=s)),t=n}return i(e,...t)},qt=xa(g);/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wa=Ne(N);class $e extends wa{constructor(){super(...arguments),this.disabled=!1,this.type="text",this.isListItem=!0,this.href="",this.target=""}get isDisabled(){return this.disabled&&this.type!=="link"}willUpdate(e){this.href&&(this.type="link"),super.willUpdate(e)}render(){return this.renderListItem(g`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){const t=this.type==="link";let r;switch(this.type){case"link":r=Ae`a`;break;case"button":r=Ae`button`;break;default:case"text":r=Ae`li`;break}const o=this.type!=="text",a=t&&this.target?this.target:A;return qt`
      <${r}
        id="item"
        tabindex="${this.isDisabled||!o?-1:0}"
        ?disabled=${this.isDisabled}
        role="listitem"
        aria-selected=${this.ariaSelected||A}
        aria-checked=${this.ariaChecked||A}
        aria-expanded=${this.ariaExpanded||A}
        aria-haspopup=${this.ariaHasPopup||A}
        class="list-item ${le(this.getRenderClasses())}"
        href=${this.href||A}
        target=${a}
        @focus=${this.onFocus}
      >${e}</${r}>
    `}renderRipple(){return this.type==="text"?A:g` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.isDisabled}></md-ripple>`}renderFocusRing(){return this.type==="text"?A:g` <md-focus-ring
      @visibility-changed=${this.onFocusRingVisibilityChanged}
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}onFocusRingVisibilityChanged(e){}getRenderClasses(){return{disabled:this.isDisabled}}renderBody(){return g`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}onFocus(){this.tabIndex===-1&&this.dispatchEvent(ma())}focus(){var e;(e=this.listItemRoot)==null||e.focus()}click(){if(!this.listItemRoot){super.click();return}this.listItemRoot.click()}}$e.shadowRootOptions={...N.shadowRootOptions,delegatesFocus:!0};h([p({type:Boolean,reflect:!0})],$e.prototype,"disabled",void 0);h([p({reflect:!0})],$e.prototype,"type",void 0);h([p({type:Boolean,attribute:"md-list-item",reflect:!0})],$e.prototype,"isListItem",void 0);h([p()],$e.prototype,"href",void 0);h([p()],$e.prototype,"target",void 0);h([Q(".list-item")],$e.prototype,"listItemRoot",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ea=H`:host{display:flex;-webkit-tap-highlight-color:rgba(0,0,0,0);--md-ripple-hover-color: var(--md-list-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-list-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-list-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-list-item-pressed-state-layer-opacity, 0.12)}:host(:is([type=button]:not([disabled]),[type=link])){cursor:pointer}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;cursor:inherit;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%}.list-item.interactive{cursor:pointer}.list-item.disabled{opacity:var(--md-list-item-disabled-opacity, 0.3);pointer-events:none}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;height:100%;color:var(--md-list-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-list-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-list-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-list-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-list-item-one-line-container-height, 56px);padding-top:var(--md-list-item-top-space, 12px);padding-bottom:var(--md-list-item-bottom-space, 12px);padding-inline-start:var(--md-list-item-leading-space, 16px);padding-inline-end:var(--md-list-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-list-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-list-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-list-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-list-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-list-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-list-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-list-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-list-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-list-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}@media(forced-colors: active){.disabled slot{color:GrayText}.list-item.disabled{color:GrayText;opacity:1}}
`;class ao extends $e{}ao.styles=[Ea];customElements.define("ew-list-item",ao);class so extends ra{}so.styles=[ia];customElements.define("ew-divider",so);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ht=Symbol("createValidator"),ft=Symbol("getValidityAnchor"),Qt=Symbol("privateValidator"),me=Symbol("privateSyncValidity"),At=Symbol("privateCustomValidationMessage");function Oi(i){var e;class t extends i{constructor(){super(...arguments),this[e]=""}get validity(){return this[me](),this[ie].validity}get validationMessage(){return this[me](),this[ie].validationMessage}get willValidate(){return this[me](),this[ie].willValidate}checkValidity(){return this[me](),this[ie].checkValidity()}reportValidity(){return this[me](),this[ie].reportValidity()}setCustomValidity(o){this[At]=o,this[me]()}requestUpdate(o,a,s){super.requestUpdate(o,a,s),this[me]()}firstUpdated(o){super.firstUpdated(o),this[me]()}[(e=At,me)](){this[Qt]||(this[Qt]=this[ht]());const{validity:o,validationMessage:a}=this[Qt].getValidity(),s=!!this[At],n=this[At]||a;this[ie].setValidity({...o,customError:s},n,this[ft]()??void 0)}[ht](){throw new Error("Implement [createValidator]")}[ft](){throw new Error("Implement [getValidityAnchor]")}}return t}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const We=Symbol("getFormValue"),vi=Symbol("getFormState");function Pi(i){class e extends i{get form(){return this[ie].form}get labels(){return this[ie].labels}get name(){return this.getAttribute("name")??""}set name(r){this.setAttribute("name",r)}get disabled(){return this.hasAttribute("disabled")}set disabled(r){this.toggleAttribute("disabled",r)}attributeChangedCallback(r,o,a){if(r==="name"||r==="disabled"){const s=r==="disabled"?o!==null:o;this.requestUpdate(r,s);return}super.attributeChangedCallback(r,o,a)}requestUpdate(r,o,a){super.requestUpdate(r,o,a),this[ie].setFormValue(this[We](),this[vi]())}[We](){throw new Error("Implement [getFormValue]")}[vi](){return this[We]()}formDisabledCallback(r){this.disabled=r}}return e.formAssociated=!0,h([p({noAccessor:!0})],e.prototype,"name",null),h([p({type:Boolean,noAccessor:!0})],e.prototype,"disabled",null),e}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fi{constructor(e){this.getCurrentState=e,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const e=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,e)))return this.currentValidity;const{validity:r,validationMessage:o}=this.computeValidity(e);return this.prevState=this.copy(e),this.currentValidity={validationMessage:o,validity:{badInput:r.badInput,customError:r.customError,patternMismatch:r.patternMismatch,rangeOverflow:r.rangeOverflow,rangeUnderflow:r.rangeUnderflow,stepMismatch:r.stepMismatch,tooLong:r.tooLong,tooShort:r.tooShort,typeMismatch:r.typeMismatch,valueMissing:r.valueMissing}},this.currentValidity}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sa extends Fi{computeValidity(e){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=e.checked,this.checkboxControl.required=e.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(e,t){return e.checked===t.checked&&e.required===t.required}copy({checked:e,required:t}){return{checked:e,required:t}}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ka=Ne(Oi(Pi(Zt(N))));class ue extends ka{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",e=>{!oa(e)||!this.input||(this.focus(),aa(this.input))})}update(e){(e.has("checked")||e.has("disabled")||e.has("indeterminate"))&&(this.prevChecked=e.get("checked")??this.checked,this.prevDisabled=e.get("disabled")??this.disabled,this.prevIndeterminate=e.get("indeterminate")??this.indeterminate),super.update(e)}render(){const e=!this.prevChecked&&!this.prevIndeterminate,t=this.prevChecked&&!this.prevIndeterminate,r=this.prevIndeterminate,o=this.checked&&!this.indeterminate,a=this.indeterminate,s=le({disabled:this.disabled,selected:o||a,unselected:!o&&!a,checked:o,indeterminate:a,"prev-unselected":e,"prev-checked":t,"prev-indeterminate":r,"prev-disabled":this.prevDisabled}),{ariaLabel:n,ariaInvalid:c}=this;return g`
      <div class="container ${s}">
        <input
          type="checkbox"
          id="input"
          aria-checked=${a?"mixed":A}
          aria-label=${n||A}
          aria-invalid=${c||A}
          ?disabled=${this.disabled}
          ?required=${this.required}
          .indeterminate=${this.indeterminate}
          .checked=${this.checked}
          @input=${this.handleInput}
          @change=${this.handleChange} />

        <div class="outline"></div>
        <div class="background"></div>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <svg class="icon" viewBox="0 0 18 18" aria-hidden="true">
          <rect class="mark short" />
          <rect class="mark long" />
        </svg>
      </div>
    `}handleInput(e){const t=e.target;this.checked=t.checked,this.indeterminate=t.indeterminate}handleChange(e){Li(this,e)}[We](){return!this.checked||this.indeterminate?null:this.value}[vi](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(e){this.checked=e==="true"}[ht](){return new Sa(()=>this)}[ft](){return this.input}}ue.shadowRootOptions={...N.shadowRootOptions,delegatesFocus:!0};h([p({type:Boolean})],ue.prototype,"checked",void 0);h([p({type:Boolean})],ue.prototype,"indeterminate",void 0);h([p({type:Boolean})],ue.prototype,"required",void 0);h([p()],ue.prototype,"value",void 0);h([P()],ue.prototype,"prevChecked",void 0);h([P()],ue.prototype,"prevDisabled",void 0);h([P()],ue.prototype,"prevIndeterminate",void 0);h([Q("input")],ue.prototype,"input",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Aa=H`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start, var(--md-checkbox-container-shape, 2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end, var(--md-checkbox-container-shape, 2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end, var(--md-checkbox-container-shape, 2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start, var(--md-checkbox-container-shape, 2px));display:inline-flex;height:var(--md-checkbox-container-size, 18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size, 18px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-checkbox-container-size, 18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:none;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.outline,.background,.icon{inset:0;position:absolute}.outline,.background{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color, var(--md-sys-color-on-surface-variant, #49454f));border-style:solid;border-width:var(--md-checkbox-outline-width, 2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color, var(--md-sys-color-primary, #6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15),linear;transform:scale(0.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));height:var(--md-checkbox-state-layer-size, 40px);inset:unset;width:var(--md-checkbox-state-layer-size, 40px);--md-ripple-hover-color: var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color: var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color, var(--md-sys-color-on-primary, #fff));height:var(--md-checkbox-icon-size, 18px);width:var(--md-checkbox-icon-size, 18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15);transition-duration:150ms;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1);transition-duration:350ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px, -14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px, -10px) rotate(0deg)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-hover-outline-width, 2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color, var(--md-sys-color-primary, #6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-focus-outline-width, 2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color, var(--md-sys-color-primary, #6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-pressed-outline-width, 2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color, var(--md-sys-color-primary, #6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-disabled-outline-width, 2px);opacity:var(--md-checkbox-disabled-container-opacity, 0.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity, 0.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color, var(--md-sys-color-surface, #fef7ff))}@media(forced-colors: active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}
`;class no extends ue{}no.styles=[Aa];customElements.define("ew-checkbox",no);class Ta{constructor(e){this.targetElement=e,this.state={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null,carriageReturn:!1,lines:[],secret:!1}}logs(){return this.targetElement.innerText}processLine(e){const t=/(?:\033|\\033)(?:\[(.*?)[@-~]|\].*?(?:\007|\033\\))/g;let r=0;const o=document.createElement("span");o.classList.add("line");const a=s=>{if(s==="")return;const n=document.createElement("span");if(this.state.bold&&n.classList.add("log-bold"),this.state.italic&&n.classList.add("log-italic"),this.state.underline&&n.classList.add("log-underline"),this.state.strikethrough&&n.classList.add("log-strikethrough"),this.state.secret&&n.classList.add("log-secret"),this.state.foregroundColor!==null&&n.classList.add(`log-fg-${this.state.foregroundColor}`),this.state.backgroundColor!==null&&n.classList.add(`log-bg-${this.state.backgroundColor}`),n.appendChild(document.createTextNode(s)),o.appendChild(n),this.state.secret){const c=document.createElement("span");c.classList.add("log-secret-redacted"),c.appendChild(document.createTextNode("[redacted]")),o.appendChild(c)}};for(;;){const s=t.exec(e);if(s===null)break;const n=s.index;if(a(e.substring(r,n)),r=n+s[0].length,s[1]!==void 0)for(const c of s[1].split(";"))switch(parseInt(c)){case 0:this.state.bold=!1,this.state.italic=!1,this.state.underline=!1,this.state.strikethrough=!1,this.state.foregroundColor=null,this.state.backgroundColor=null,this.state.secret=!1;break;case 1:this.state.bold=!0;break;case 3:this.state.italic=!0;break;case 4:this.state.underline=!0;break;case 5:this.state.secret=!0;break;case 6:this.state.secret=!1;break;case 9:this.state.strikethrough=!0;break;case 22:this.state.bold=!1;break;case 23:this.state.italic=!1;break;case 24:this.state.underline=!1;break;case 29:this.state.strikethrough=!1;break;case 30:this.state.foregroundColor="black";break;case 31:this.state.foregroundColor="red";break;case 32:this.state.foregroundColor="green";break;case 33:this.state.foregroundColor="yellow";break;case 34:this.state.foregroundColor="blue";break;case 35:this.state.foregroundColor="magenta";break;case 36:this.state.foregroundColor="cyan";break;case 37:this.state.foregroundColor="white";break;case 39:this.state.foregroundColor=null;break;case 41:this.state.backgroundColor="red";break;case 42:this.state.backgroundColor="green";break;case 43:this.state.backgroundColor="yellow";break;case 44:this.state.backgroundColor="blue";break;case 45:this.state.backgroundColor="magenta";break;case 46:this.state.backgroundColor="cyan";break;case 47:this.state.backgroundColor="white";break;case 40:case 49:this.state.backgroundColor=null;break}}return a(e.substring(r)),o}processLines(){const e=this.targetElement.scrollTop>this.targetElement.scrollHeight-this.targetElement.offsetHeight-50,t=this.state.carriageReturn,r=document.createDocumentFragment();if(this.state.lines.length!=0){for(const o of this.state.lines)this.state.carriageReturn&&o!==`
`&&r.childElementCount&&r.removeChild(r.lastChild),r.appendChild(this.processLine(o)),this.state.carriageReturn=o.includes("\r");t&&this.state.lines[0]!==`
`?this.targetElement.replaceChild(r,this.targetElement.lastChild):this.targetElement.appendChild(r),this.state.lines=[],e&&(this.targetElement.scrollTop=this.targetElement.scrollHeight)}}addLine(e){this.state.lines.length==0&&setTimeout(()=>this.processLines(),0),this.state.lines.push(e)}}const Ra=`
  .log {
    flex: 1;
    background-color: #1c1c1c;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
      monospace;
    font-size: 12px;
    padding: 16px;
    overflow: auto;
    line-height: 1.45;
    border-radius: 3px;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    color: #ddd;
  }

  .log-bold {
    font-weight: bold;
  }
  .log-italic {
    font-style: italic;
  }
  .log-underline {
    text-decoration: underline;
  }
  .log-strikethrough {
    text-decoration: line-through;
  }
  .log-underline.log-strikethrough {
    text-decoration: underline line-through;
  }
  .log-secret {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .log-secret-redacted {
    opacity: 0;
    width: 1px;
    font-size: 1px;
  }
  .log-fg-black {
    color: rgb(128, 128, 128);
  }
  .log-fg-red {
    color: rgb(255, 0, 0);
  }
  .log-fg-green {
    color: rgb(0, 255, 0);
  }
  .log-fg-yellow {
    color: rgb(255, 255, 0);
  }
  .log-fg-blue {
    color: rgb(0, 0, 255);
  }
  .log-fg-magenta {
    color: rgb(255, 0, 255);
  }
  .log-fg-cyan {
    color: rgb(0, 255, 255);
  }
  .log-fg-white {
    color: rgb(187, 187, 187);
  }
  .log-bg-black {
    background-color: rgb(0, 0, 0);
  }
  .log-bg-red {
    background-color: rgb(255, 0, 0);
  }
  .log-bg-green {
    background-color: rgb(0, 255, 0);
  }
  .log-bg-yellow {
    background-color: rgb(255, 255, 0);
  }
  .log-bg-blue {
    background-color: rgb(0, 0, 255);
  }
  .log-bg-magenta {
    background-color: rgb(255, 0, 255);
  }
  .log-bg-cyan {
    background-color: rgb(0, 255, 255);
  }
  .log-bg-white {
    background-color: rgb(255, 255, 255);
  }
`,Te=i=>new Promise(e=>setTimeout(e,i));class Ia{constructor(){this.chunks=""}transform(e,t){this.chunks+=e;const r=this.chunks.split(/\r?\n/);this.chunks=r.pop(),r.forEach(o=>t.enqueue(o+`\r
`))}flush(e){e.enqueue(this.chunks)}}class Ca{transform(e,t){const r=new Date,o=r.getHours().toString().padStart(2,"0"),a=r.getMinutes().toString().padStart(2,"0"),s=r.getSeconds().toString().padStart(2,"0");t.enqueue(`[${o}:${a}:${s}]${e}`)}}class La extends HTMLElement{constructor(){super(...arguments),this.allowInput=!0}logs(){var e;return((e=this._console)===null||e===void 0?void 0:e.logs())||""}connectedCallback(){if(this._console)return;const e=this.attachShadow({mode:"open"});if(e.innerHTML=`
      <style>
        :host, input {
          background-color: #1c1c1c;
          color: #ddd;
          font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
            monospace;
          line-height: 1.45;
          display: flex;
          flex-direction: column;
        }
        form {
          display: flex;
          align-items: center;
          padding: 0 8px 0 16px;
        }
        input {
          flex: 1;
          padding: 4px;
          margin: 0 8px;
          border: 0;
          outline: none;
        }
        ${Ra}
      </style>
      <div class="log"></div>
      ${this.allowInput?`<form>
                >
                <input autofocus>
              </form>
            `:""}
    `,this._console=new Ta(this.shadowRoot.querySelector("div")),this.allowInput){const o=this.shadowRoot.querySelector("input");this.addEventListener("click",()=>{var a;((a=getSelection())===null||a===void 0?void 0:a.toString())===""&&o.focus()}),o.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),a.stopPropagation(),this._sendCommand())})}const t=new AbortController,r=this._connect(t.signal);this._cancelConnection=()=>(t.abort(),r)}async _connect(e){this.logger.debug("Starting console read loop");try{await this.port.readable.pipeThrough(new TextDecoderStream,{signal:e}).pipeThrough(new TransformStream(new Ia)).pipeThrough(new TransformStream(new Ca)).pipeTo(new WritableStream({write:t=>{this._console.addLine(t.replace("\r",""))}})),e.aborted||(this._console.addLine(""),this._console.addLine(""),this._console.addLine("Terminal disconnected"))}catch(t){this._console.addLine(""),this._console.addLine(""),this._console.addLine(`Terminal disconnected: ${t}`)}finally{await Te(100),this.logger.debug("Finished console read loop")}}async _sendCommand(){const e=this.shadowRoot.querySelector("input"),t=e.value,r=new TextEncoder,o=this.port.writable.getWriter();await o.write(r.encode(t+`\r
`)),this._console.addLine(`> ${t}\r
`),e.value="",e.focus();try{o.releaseLock()}catch(a){console.error("Ignoring release lock error",a)}}async disconnect(){this._cancelConnection&&(await this._cancelConnection(),this._cancelConnection=void 0)}async reset(){this.logger.debug("Triggering reset"),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!0}),await Te(250),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!1}),await Te(250),await new Promise(e=>setTimeout(e,1e3))}}customElements.define("ewt-console",La);/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gi(i,e=!0){return e&&getComputedStyle(i).getPropertyValue("direction").trim()==="rtl"}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $a=Ne(Zt(N));class G extends $a{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[ie].form}get labels(){return this[ie].labels}constructor(){super(),this.disabled=!1,this.softDisabled=!1,this.flipIconInRtl=!1,this.href="",this.download="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Gi(this,this.flipIconInRtl),this.addEventListener("click",this.handleClick.bind(this))}willUpdate(){this.href&&(this.disabled=!1,this.softDisabled=!1)}render(){const e=this.href?Ae`div`:Ae`button`,{ariaLabel:t,ariaHasPopup:r,ariaExpanded:o}=this,a=t&&this.ariaLabelSelected,s=this.toggle?this.selected:A;let n=A;return this.href||(n=a&&this.selected?this.ariaLabelSelected:t),qt`<${e}
        class="icon-button ${le(this.getRenderClasses())}"
        id="button"
        aria-label="${n||A}"
        aria-haspopup="${!this.href&&r||A}"
        aria-expanded="${!this.href&&o||A}"
        aria-pressed="${s}"
        aria-disabled=${!this.href&&this.softDisabled||A}
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClickOnChild}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?A:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():A}
        ${this.href?this.renderLink():this.renderTouchTarget()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return g`
      <a
        class="link"
        id="link"
        href="${this.href}"
        download="${this.download||A}"
        target="${this.target||A}"
        aria-label="${e||A}">
        ${this.renderTouchTarget()}
      </a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return g`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return g`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return g`<span class="touch"></span>`}renderFocusRing(){return g`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){const e=!this.href&&(this.disabled||this.softDisabled);return g`<md-ripple
      for=${this.href?"link":A}
      ?disabled="${e}"></md-ripple>`}connectedCallback(){this.flipIcon=Gi(this,this.flipIconInRtl),super.connectedCallback()}handleClick(e){if(!this.href&&this.softDisabled){e.stopImmediatePropagation(),e.preventDefault();return}}async handleClickOnChild(e){await 0,!(!this.toggle||this.disabled||this.softDisabled||e.defaultPrevented)&&(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}sa(G);G.formAssociated=!0;G.shadowRootOptions={mode:"open",delegatesFocus:!0};h([p({type:Boolean,reflect:!0})],G.prototype,"disabled",void 0);h([p({type:Boolean,attribute:"soft-disabled",reflect:!0})],G.prototype,"softDisabled",void 0);h([p({type:Boolean,attribute:"flip-icon-in-rtl"})],G.prototype,"flipIconInRtl",void 0);h([p()],G.prototype,"href",void 0);h([p()],G.prototype,"download",void 0);h([p()],G.prototype,"target",void 0);h([p({attribute:"aria-label-selected"})],G.prototype,"ariaLabelSelected",void 0);h([p({type:Boolean})],G.prototype,"toggle",void 0);h([p({type:Boolean,reflect:!0})],G.prototype,"selected",void 0);h([p()],G.prototype,"type",void 0);h([p({reflect:!0})],G.prototype,"value",void 0);h([P()],G.prototype,"flipIcon",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Da=H`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host(:is([disabled],[soft-disabled])){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{display:grid;height:100%;outline:none;place-items:center;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host(:is([disabled],[soft-disabled])){--_disabled-icon-color: GrayText;--_disabled-icon-opacity: 1}}
`;/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oa=H`:host{--_disabled-icon-color: var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size: var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color: var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height: var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape: var(--md-icon-button-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));--_state-layer-width: var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color: var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity: var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color: var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity: var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start: 0;--_container-shape-start-end: 0;--_container-shape-end-end: 0;--_container-shape-end-start: 0;--_container-height: 0;--_container-width: 0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_state-layer-height))/2) max(0px,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_state-layer-shape);--md-focus-ring-shape-start-end: var(--_state-layer-shape);--md-focus-ring-shape-end-end: var(--_state-layer-shape);--md-focus-ring-shape-end-start: var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:is(:disabled,[aria-disabled=true]){color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:is(:disabled,[aria-disabled=true]){opacity:var(--_disabled-icon-opacity)}.selected:not(:disabled,[aria-disabled=true]){color:var(--_selected-icon-color)}.selected:not(:disabled,[aria-disabled=true]):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled,[aria-disabled=true]):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled,[aria-disabled=true]):active{color:var(--_selected-pressed-icon-color)}.selected{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}
`;class lo extends G{}lo.styles=[Da,Oa];customElements.define("ew-icon-button",lo);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pa=H`:host{--_active-indicator-color: var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color: var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color: var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-active-indicator-color: var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color: var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity: var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color: var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color: var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity: var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color: var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color: var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color: var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color: var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color: var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color: var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color: var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color: var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color: var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color: var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color: var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color: var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color: var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color: var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color: var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color: var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color: var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color: var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color: var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font: var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height: var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color: var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color: var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size: var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color: var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight: var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color: var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color: var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size: var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color: var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height: var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight: var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color: var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size: var(--md-filled-text-field-trailing-icon-size, 24px);--_container-shape-start-start: var(--md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_icon-input-space: var(--md-filled-text-field-icon-input-space, 16px);--_leading-space: var(--md-filled-text-field-leading-space, 16px);--_trailing-space: var(--md-filled-text-field-trailing-space, 16px);--_top-space: var(--md-filled-text-field-top-space, 16px);--_bottom-space: var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space: var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space: var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space: var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space: var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color: var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--_with-leading-icon-leading-space: var(--md-filled-text-field-with-leading-icon-leading-space, 12px);--_with-trailing-icon-trailing-space: var(--md-filled-text-field-with-trailing-icon-trailing-space, 12px);--md-filled-field-active-indicator-color: var(--_active-indicator-color);--md-filled-field-active-indicator-height: var(--_active-indicator-height);--md-filled-field-bottom-space: var(--_bottom-space);--md-filled-field-container-color: var(--_container-color);--md-filled-field-container-shape-end-end: var(--_container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_container-shape-start-start);--md-filled-field-content-color: var(--_input-text-color);--md-filled-field-content-font: var(--_input-text-font);--md-filled-field-content-line-height: var(--_input-text-line-height);--md-filled-field-content-size: var(--_input-text-size);--md-filled-field-content-space: var(--_icon-input-space);--md-filled-field-content-weight: var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_error-active-indicator-color);--md-filled-field-error-content-color: var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_error-label-text-color);--md-filled-field-error-leading-content-color: var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_label-text-color);--md-filled-field-label-text-font: var(--_label-text-font);--md-filled-field-label-text-line-height: var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_label-text-populated-size);--md-filled-field-label-text-size: var(--_label-text-size);--md-filled-field-label-text-weight: var(--_label-text-weight);--md-filled-field-leading-content-color: var(--_leading-icon-color);--md-filled-field-leading-space: var(--_leading-space);--md-filled-field-supporting-text-color: var(--_supporting-text-color);--md-filled-field-supporting-text-font: var(--_supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_supporting-text-size);--md-filled-field-supporting-text-weight: var(--_supporting-text-weight);--md-filled-field-top-space: var(--_top-space);--md-filled-field-trailing-content-color: var(--_trailing-icon-color);--md-filled-field-trailing-space: var(--_trailing-space);--md-filled-field-with-label-bottom-space: var(--_with-label-bottom-space);--md-filled-field-with-label-top-space: var(--_with-label-top-space);--md-filled-field-with-leading-content-leading-space: var(--_with-leading-icon-leading-space);--md-filled-field-with-trailing-content-trailing-space: var(--_with-trailing-icon-trailing-space)}
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B extends N{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.noAsterisk=!1,this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const e=this.count??-1,t=this.max??-1;return e<0||t<=0?"":`${e} / ${t}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(e){e.has("disabled")&&e.get("disabled")!==void 0&&(this.disableTransitions=!0),this.disabled&&this.focused&&(e.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:e.get("focused"),wasPopulated:e.get("populated")}),super.update(e)}render(){var a,s,n,c;const e=this.renderLabel(!0),t=this.renderLabel(!1),r=(a=this.renderOutline)==null?void 0:a.call(this,e),o={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return g`
      <div class="field ${le(o)}">
        <div class="container-overflow">
          ${(s=this.renderBackground)==null?void 0:s.call(this)}
          <slot name="container"></slot>
          ${(n=this.renderStateLayer)==null?void 0:n.call(this)} ${(c=this.renderIndicator)==null?void 0:c.call(this)} ${r}
          <div class="container">
            <div class="start">
              <slot name="start"></slot>
            </div>
            <div class="middle">
              <div class="label-wrapper">
                ${t} ${r?A:e}
              </div>
              <div class="content">
                <slot></slot>
              </div>
            </div>
            <div class="end">
              <slot name="end"></slot>
            </div>
          </div>
        </div>
        ${this.renderSupportingText()}
      </div>
    `}updated(e){(e.has("supportingText")||e.has("errorText")||e.has("count")||e.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame(()=>{this.refreshErrorAlert=!1}),this.disableTransitions&&requestAnimationFrame(()=>{this.disableTransitions=!1})}renderSupportingText(){const{supportingOrErrorText:e,counterText:t}=this;if(!e&&!t)return A;const r=g`<span>${e}</span>`,o=t?g`<span class="counter">${t}</span>`:A,s=this.error&&this.errorText&&!this.refreshErrorAlert?"alert":A;return g`
      <div class="supporting-text" role=${s}>${r}${o}</div>
      <slot
        name="aria-describedby"
        @slotchange=${this.updateSlottedAriaDescribedBy}></slot>
    `}updateSlottedAriaDescribedBy(){for(const e of this.slottedAriaDescribedBy)Yr(g`${this.supportingOrErrorText} ${this.counterText}`,e),e.setAttribute("hidden","")}renderLabel(e){if(!this.label)return A;let t;e?t=this.focused||this.populated||this.isAnimating:t=!this.focused&&!this.populated&&!this.isAnimating;const r={hidden:!t,floating:e,resting:!e},o=`${this.label}${this.required&&!this.noAsterisk?"*":""}`;return g`
      <span class="label ${le(r)}" aria-hidden=${!t}
        >${o}</span
      >
    `}animateLabelIfNeeded({wasFocused:e,wasPopulated:t}){var a,s,n;if(!this.label)return;e??(e=this.focused),t??(t=this.populated);const r=e||t,o=this.focused||this.populated;r!==o&&(this.isAnimating=!0,(a=this.labelAnimation)==null||a.cancel(),this.labelAnimation=(s=this.floatingLabelEl)==null?void 0:s.animate(this.getLabelKeyframes(),{duration:150,easing:rt.STANDARD}),(n=this.labelAnimation)==null||n.addEventListener("finish",()=>{this.isAnimating=!1}))}getLabelKeyframes(){const{floatingLabelEl:e,restingLabelEl:t}=this;if(!e||!t)return[];const{x:r,y:o,height:a}=e.getBoundingClientRect(),{x:s,y:n,height:c}=t.getBoundingClientRect(),l=e.scrollWidth,d=t.scrollWidth,v=d/l,u=s-r,f=n-o+Math.round((c-a*v)/2),_=`translateX(${u}px) translateY(${f}px) scale(${v})`,y="translateX(0) translateY(0) scale(1)",x=t.clientWidth,E=d>x?`${x/v}px`:"";return this.focused||this.populated?[{transform:_,width:E},{transform:y,width:E}]:[{transform:y,width:E},{transform:_,width:E}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}h([p({type:Boolean})],B.prototype,"disabled",void 0);h([p({type:Boolean})],B.prototype,"error",void 0);h([p({type:Boolean})],B.prototype,"focused",void 0);h([p()],B.prototype,"label",void 0);h([p({type:Boolean,attribute:"no-asterisk"})],B.prototype,"noAsterisk",void 0);h([p({type:Boolean})],B.prototype,"populated",void 0);h([p({type:Boolean})],B.prototype,"required",void 0);h([p({type:Boolean})],B.prototype,"resizable",void 0);h([p({attribute:"supporting-text"})],B.prototype,"supportingText",void 0);h([p({attribute:"error-text"})],B.prototype,"errorText",void 0);h([p({type:Number})],B.prototype,"count",void 0);h([p({type:Number})],B.prototype,"max",void 0);h([p({type:Boolean,attribute:"has-start"})],B.prototype,"hasStart",void 0);h([p({type:Boolean,attribute:"has-end"})],B.prototype,"hasEnd",void 0);h([Le({slot:"aria-describedby"})],B.prototype,"slottedAriaDescribedBy",void 0);h([P()],B.prototype,"isAnimating",void 0);h([P()],B.prototype,"refreshErrorAlert",void 0);h([P()],B.prototype,"disableTransitions",void 0);h([Q(".label.floating")],B.prototype,"floatingLabelEl",void 0);h([Q(".label.resting")],B.prototype,"restingLabelEl",void 0);h([Q(".container")],B.prototype,"containerEl",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fa extends B{renderBackground(){return g` <div class="background"></div> `}renderStateLayer(){return g` <div class="state-layer"></div> `}renderIndicator(){return g`<div class="active-indicator"></div>`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ma=H`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-space: var(--md-filled-field-content-space, 16px);--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px);--_with-leading-content-leading-space: var(--md-filled-field-with-leading-content-leading-space, 12px);--_with-trailing-content-trailing-space: var(--md-filled-field-with-trailing-content-trailing-space, 12px);--_container-shape-start-start: var(--md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)))}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}
`;/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const za=H`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}slot[name=container]{border-radius:inherit}slot[name=container]::slotted(*){border-radius:inherit;inset:0;pointer-events:none;position:absolute}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start{margin-inline:var(--_with-leading-content-leading-space) var(--_content-space)}.with-end .end{margin-inline:var(--_content-space) var(--_with-trailing-content-trailing-space)}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gi=class extends Fa{};gi.styles=[za,Ma];gi=h([Vt("md-filled-field")],gi);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ba=i=>i.strings===void 0,Ua={},Na=(i,e=Ua)=>i._$AH=e;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ki=jr(class extends Xr{constructor(i){if(super(i),i.type!==Oe.PROPERTY&&i.type!==Oe.ATTRIBUTE&&i.type!==Oe.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!Ba(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===ot||e===A)return e;const t=i.element,r=i.name;if(i.type===Oe.PROPERTY){if(e===t[r])return ot}else if(i.type===Oe.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(r))return ot}else if(i.type===Oe.ATTRIBUTE&&t.getAttribute(r)===e+"")return ot;return Na(i),e}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const co="important",Ha=" !"+co,zt=jr(class extends Xr{constructor(i){var e;if(super(i),i.type!==Oe.ATTRIBUTE||i.name!=="style"||((e=i.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const r=i[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?t.removeProperty(r):t[r]=null);for(const r in e){const o=e[r];if(o!=null){this.ft.add(r);const a=typeof o=="string"&&o.endsWith(Ha);r.includes("-")||a?t.setProperty(r,a?o.slice(0,-11):o,a?co:""):t[r]=o}}return ot}});/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Va={fromAttribute(i){return i??""},toAttribute(i){return i||null}};/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bt=Symbol("onReportValidity"),Tt=Symbol("privateCleanupFormListeners"),Rt=Symbol("privateDoNotReportInvalid"),It=Symbol("privateIsSelfReportingValidity"),Ct=Symbol("privateCallOnReportValidity");function ho(i){var e,t,r;class o extends i{constructor(...s){super(...s),this[e]=new AbortController,this[t]=!1,this[r]=!1,this.addEventListener("invalid",n=>{this[Rt]||!n.isTrusted||this.addEventListener("invalid",()=>{this[Ct](n)},{once:!0})},{capture:!0})}checkValidity(){this[Rt]=!0;const s=super.checkValidity();return this[Rt]=!1,s}reportValidity(){this[It]=!0;const s=super.reportValidity();return s&&this[Ct](null),this[It]=!1,s}[(e=Tt,t=Rt,r=It,Ct)](s){const n=s==null?void 0:s.defaultPrevented;n||(this[Bt](s),!(!n&&(s==null?void 0:s.defaultPrevented)))||(this[It]||Wa(this[ie].form,this))&&this.focus()}[Bt](s){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(s){super.formAssociatedCallback&&super.formAssociatedCallback(s),this[Tt].abort(),s&&(this[Tt]=new AbortController,Za(this,s,()=>{this[Ct](null)},this[Tt].signal))}}return o}function Za(i,e,t,r){const o=qa(e);let a=!1,s,n=!1;o.addEventListener("before",()=>{n=!0,s=new AbortController,a=!1,i.addEventListener("invalid",()=>{a=!0},{signal:s.signal})},{signal:r}),o.addEventListener("after",()=>{n=!1,s==null||s.abort(),!a&&t()},{signal:r}),e.addEventListener("submit",()=>{n||t()},{signal:r})}const ei=new WeakMap;function qa(i){if(!ei.has(i)){const e=new EventTarget;ei.set(i,e);for(const t of["reportValidity","requestSubmit"]){const r=i[t];i[t]=function(){e.dispatchEvent(new Event("before"));const o=Reflect.apply(r,this,arguments);return e.dispatchEvent(new Event("after")),o}}}return ei.get(i)}function Wa(i,e){if(!i)return!0;let t;for(const r of i.elements)if(r.matches(":invalid")){t=r;break}return t===e}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ga extends Fi{computeValidity({state:e,renderedControl:t}){let r=t;et(e)&&!r?(r=this.inputControl||document.createElement("input"),this.inputControl=r):r||(r=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=r);const o=et(e)?r:null;if(o&&(o.type=e.type),r.value!==e.value&&(r.value=e.value),r.required=e.required,o){const a=e;a.pattern?o.pattern=a.pattern:o.removeAttribute("pattern"),a.min?o.min=a.min:o.removeAttribute("min"),a.max?o.max=a.max:o.removeAttribute("max"),a.step?o.step=a.step:o.removeAttribute("step")}return(e.minLength??-1)>-1?r.setAttribute("minlength",String(e.minLength)):r.removeAttribute("minlength"),(e.maxLength??-1)>-1?r.setAttribute("maxlength",String(e.maxLength)):r.removeAttribute("maxlength"),{validity:r.validity,validationMessage:r.validationMessage}}equals({state:e},{state:t}){const r=e.type===t.type&&e.value===t.value&&e.required===t.required&&e.minLength===t.minLength&&e.maxLength===t.maxLength;return!et(e)||!et(t)?r:r&&e.pattern===t.pattern&&e.min===t.min&&e.max===t.max&&e.step===t.step}copy({state:e}){return{state:et(e)?this.copyInput(e):this.copyTextArea(e),renderedControl:null}}copyInput(e){const{type:t,pattern:r,min:o,max:a,step:s}=e;return{...this.copySharedState(e),type:t,pattern:r,min:o,max:a,step:s}}copyTextArea(e){return{...this.copySharedState(e),type:e.type}}copySharedState({value:e,required:t,minLength:r,maxLength:o}){return{value:e,required:t,minLength:r,maxLength:o}}}function et(i){return i.type!=="textarea"}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ka=Ne(ho(Oi(Pi(Zt(N)))));class L extends Ka{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(e){this.getInputOrTextarea().selectionDirection=e}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(e){this.getInputOrTextarea().selectionEnd=e}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(e){this.getInputOrTextarea().selectionStart=e}get valueAsNumber(){const e=this.getInput();return e?e.valueAsNumber:NaN}set valueAsNumber(e){const t=this.getInput();t&&(t.valueAsNumber=e,this.value=t.value)}get valueAsDate(){const e=this.getInput();return e?e.valueAsDate:null}set valueAsDate(e){const t=this.getInput();t&&(t.valueAsDate=e,this.value=t.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...e){this.getInputOrTextarea().setRangeText(...e),this.value=this.getInputOrTextarea().value}setSelectionRange(e,t,r){this.getInputOrTextarea().setSelectionRange(e,t,r)}showPicker(){const e=this.getInput();e&&e.showPicker()}stepDown(e){const t=this.getInput();t&&(t.stepDown(e),this.value=t.value)}stepUp(e){const t=this.getInput();t&&(t.stepUp(e),this.value=t.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(e,t,r){e==="value"&&this.dirty||super.attributeChangedCallback(e,t,r)}render(){const e={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:this.type==="textarea","no-spinner":this.noSpinner};return g`
      <span class="text-field ${le(e)}">
        ${this.renderField()}
      </span>
    `}updated(e){const t=this.getInputOrTextarea().value;this.value!==t&&(this.value=t)}renderField(){return qt`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      ?no-asterisk=${this.noAsterisk}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${this.type==="textarea"}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
      <slot name="container" slot="container"></slot>
    </${this.fieldTag}>`}renderLeadingIcon(){return g`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return g`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderInputOrTextarea(){const e={direction:this.textDirection},t=this.ariaLabel||this.label||A,r=this.autocomplete,o=(this.maxLength??-1)>-1,a=(this.minLength??-1)>-1;if(this.type==="textarea")return g`
        <textarea
          class="input"
          style=${zt(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${r||A}
          name=${this.name||A}
          ?disabled=${this.disabled}
          maxlength=${o?this.maxLength:A}
          minlength=${a?this.minLength:A}
          placeholder=${this.placeholder||A}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          rows=${this.rows}
          cols=${this.cols}
          .value=${Ki(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent}></textarea>
      `;const s=this.renderPrefix(),n=this.renderSuffix(),c=this.inputMode;return g`
      <div class="input-wrapper">
        ${s}
        <input
          class="input"
          style=${zt(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${r||A}
          name=${this.name||A}
          ?disabled=${this.disabled}
          inputmode=${c||A}
          max=${this.max||A}
          maxlength=${o?this.maxLength:A}
          min=${this.min||A}
          minlength=${a?this.minLength:A}
          pattern=${this.pattern||A}
          placeholder=${this.placeholder||A}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          ?multiple=${this.multiple}
          step=${this.step||A}
          type=${this.type}
          .value=${Ki(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent} />
        ${n}
      </div>
    `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(e,t){return e?g`<span class="${le({suffix:t,prefix:!t})}">${e}</span>`:A}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){var e;this.focused=((e=this.inputOrTextarea)==null?void 0:e.matches(":focus"))??!1}handleInput(e){this.dirty=!0,this.value=e.target.value}redispatchEvent(e){Li(this,e)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return this.type==="textarea"?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[We](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}focus(){this.getInputOrTextarea().focus()}[ht](){return new Ga(()=>({state:this,renderedControl:this.inputOrTextarea}))}[ft](){return this.inputOrTextarea}[Bt](e){var r;e==null||e.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&((r=this.field)==null||r.reannounceError())}}L.shadowRootOptions={...N.shadowRootOptions,delegatesFocus:!0};h([p({type:Boolean,reflect:!0})],L.prototype,"error",void 0);h([p({attribute:"error-text"})],L.prototype,"errorText",void 0);h([p()],L.prototype,"label",void 0);h([p({type:Boolean,attribute:"no-asterisk"})],L.prototype,"noAsterisk",void 0);h([p({type:Boolean,reflect:!0})],L.prototype,"required",void 0);h([p()],L.prototype,"value",void 0);h([p({attribute:"prefix-text"})],L.prototype,"prefixText",void 0);h([p({attribute:"suffix-text"})],L.prototype,"suffixText",void 0);h([p({type:Boolean,attribute:"has-leading-icon"})],L.prototype,"hasLeadingIcon",void 0);h([p({type:Boolean,attribute:"has-trailing-icon"})],L.prototype,"hasTrailingIcon",void 0);h([p({attribute:"supporting-text"})],L.prototype,"supportingText",void 0);h([p({attribute:"text-direction"})],L.prototype,"textDirection",void 0);h([p({type:Number})],L.prototype,"rows",void 0);h([p({type:Number})],L.prototype,"cols",void 0);h([p({reflect:!0})],L.prototype,"inputMode",void 0);h([p()],L.prototype,"max",void 0);h([p({type:Number})],L.prototype,"maxLength",void 0);h([p()],L.prototype,"min",void 0);h([p({type:Number})],L.prototype,"minLength",void 0);h([p({type:Boolean,attribute:"no-spinner"})],L.prototype,"noSpinner",void 0);h([p()],L.prototype,"pattern",void 0);h([p({reflect:!0,converter:Va})],L.prototype,"placeholder",void 0);h([p({type:Boolean,reflect:!0})],L.prototype,"readOnly",void 0);h([p({type:Boolean,reflect:!0})],L.prototype,"multiple",void 0);h([p()],L.prototype,"step",void 0);h([p({reflect:!0})],L.prototype,"type",void 0);h([p({reflect:!0})],L.prototype,"autocomplete",void 0);h([P()],L.prototype,"dirty",void 0);h([P()],L.prototype,"focused",void 0);h([P()],L.prototype,"nativeError",void 0);h([P()],L.prototype,"nativeErrorText",void 0);h([Q(".input")],L.prototype,"inputOrTextarea",void 0);h([Q(".field")],L.prototype,"field",void 0);h([Le({slot:"leading-icon"})],L.prototype,"leadingIcons",void 0);h([Le({slot:"trailing-icon"})],L.prototype,"trailingIcons",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ya extends L{constructor(){super(...arguments),this.fieldTag=Ae`md-filled-field`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ja=H`:host{display:inline-flex;outline:none;resize:both;text-align:start;-webkit-tap-highlight-color:rgba(0,0,0,0)}.text-field,.field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}slot[name=container]{border-radius:inherit}.icon{color:currentColor;display:flex;align-items:center;justify-content:center;fill:currentColor;position:relative}.icon ::slotted(*){display:flex;position:absolute}[has-start] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[has-end] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-decoration,.input::-webkit-search-cancel-button{display:none}@media(forced-colors: active){.input{background:none}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}
`;class fo extends Ya{constructor(){super(...arguments),this.fieldTag=Ae`md-filled-field`}}fo.styles=[ja,Pa];customElements.define("ew-filled-text-field",fo);/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xa extends N{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return g`<span class="shadow"></span>`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ja=H`:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}:host{display:flex;pointer-events:none;transition-property:box-shadow,opacity}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _i=class extends Xa{};_i.styles=[Ja];_i=h([Vt("md-elevation")],_i);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qa(i,e){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:i,reason:e,itemPath:[i]}})}const Yi=Qa,bi={SPACE:"Space",ENTER:"Enter"},ji={CLICK_SELECTION:"click-selection",KEYDOWN:"keydown"},es={ESCAPE:"Escape",SPACE:bi.SPACE,ENTER:bi.ENTER};function uo(i){return Object.values(es).some(e=>e===i)}function ts(i){return Object.values(bi).some(e=>e===i)}function yi(i,e){const t=new Event("md-contains",{bubbles:!0,composed:!0});let r=[];const o=s=>{r=s.composedPath()};return e.addEventListener("md-contains",o),i.dispatchEvent(t),e.removeEventListener("md-contains",o),r.length>0}const ne={NONE:"none",LIST_ROOT:"list-root",FIRST_ITEM:"first-item",LAST_ITEM:"last-item"};/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xi={END_START:"end-start",END_END:"end-end",START_START:"start-start",START_END:"start-end"};class is{constructor(e,t){this.host=e,this.getProperties=t,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:e,anchorEl:t,anchorCorner:r,surfaceCorner:o,positioning:a,xOffset:s,yOffset:n,disableBlockFlip:c,disableInlineFlip:l,repositionStrategy:d}=this.getProperties(),v=r.toLowerCase().trim(),u=o.toLowerCase().trim();if(!e||!t)return;const f=window.innerWidth,_=window.innerHeight,y=document.createElement("div");y.style.opacity="0",y.style.position="fixed",y.style.display="block",y.style.inset="0",document.body.appendChild(y);const x=y.getBoundingClientRect();y.remove();const b=window.innerHeight-x.bottom,E=window.innerWidth-x.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,e.popover&&e.isConnected&&e.showPopover();const S=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),m=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),[k,O]=u.split("-"),[w,I]=v.split("-"),C=getComputedStyle(e).direction==="ltr";let{blockInset:T,blockOutOfBoundsCorrection:R,surfaceBlockProperty:ee}=this.calculateBlock({surfaceRect:S,anchorRect:m,anchorBlock:w,surfaceBlock:k,yOffset:n,positioning:a,windowInnerHeight:_,blockScrollbarHeight:b});if(R&&!c){const Xt=k==="start"?"end":"start",Jt=w==="start"?"end":"start",pe=this.calculateBlock({surfaceRect:S,anchorRect:m,anchorBlock:Jt,surfaceBlock:Xt,yOffset:n,positioning:a,windowInnerHeight:_,blockScrollbarHeight:b});R>pe.blockOutOfBoundsCorrection&&(T=pe.blockInset,R=pe.blockOutOfBoundsCorrection,ee=pe.surfaceBlockProperty)}let{inlineInset:we,inlineOutOfBoundsCorrection:j,surfaceInlineProperty:De}=this.calculateInline({surfaceRect:S,anchorRect:m,anchorInline:I,surfaceInline:O,xOffset:s,positioning:a,isLTR:C,windowInnerWidth:f,inlineScrollbarWidth:E});if(j&&!l){const Xt=O==="start"?"end":"start",Jt=I==="start"?"end":"start",pe=this.calculateInline({surfaceRect:S,anchorRect:m,anchorInline:Jt,surfaceInline:Xt,xOffset:s,positioning:a,isLTR:C,windowInnerWidth:f,inlineScrollbarWidth:E});Math.abs(j)>Math.abs(pe.inlineOutOfBoundsCorrection)&&(we=pe.inlineInset,j=pe.inlineOutOfBoundsCorrection,De=pe.surfaceInlineProperty)}d==="move"&&(T=T-R,we=we-j),this.surfaceStylesInternal={display:"block",opacity:"1",[ee]:`${T}px`,[De]:`${we}px`},d==="resize"&&(R&&(this.surfaceStylesInternal.height=`${S.height-R}px`),j&&(this.surfaceStylesInternal.width=`${S.width-j}px`)),this.host.requestUpdate()}calculateBlock(e){const{surfaceRect:t,anchorRect:r,anchorBlock:o,surfaceBlock:a,yOffset:s,positioning:n,windowInnerHeight:c,blockScrollbarHeight:l}=e,d=n==="fixed"||n==="document"?1:0,v=n==="document"?1:0,u=a==="start"?1:0,f=a==="end"?1:0,y=(o!==a?1:0)*r.height+s,x=u*r.top+f*(c-r.bottom-l),b=u*window.scrollY-f*window.scrollY,E=Math.abs(Math.min(0,c-x-y-t.height));return{blockInset:d*x+v*b+y,blockOutOfBoundsCorrection:E,surfaceBlockProperty:a==="start"?"inset-block-start":"inset-block-end"}}calculateInline(e){const{isLTR:t,surfaceInline:r,anchorInline:o,anchorRect:a,surfaceRect:s,xOffset:n,positioning:c,windowInnerWidth:l,inlineScrollbarWidth:d}=e,v=c==="fixed"||c==="document"?1:0,u=c==="document"?1:0,f=t?1:0,_=t?0:1,y=r==="start"?1:0,x=r==="end"?1:0,E=(o!==r?1:0)*a.width+n,S=y*a.left+x*(l-a.right-d),m=y*(l-a.right-d)+x*a.left,k=f*S+_*m,O=y*window.scrollX-x*window.scrollX,w=x*window.scrollX-y*window.scrollX,I=f*O+_*w,C=Math.abs(Math.min(0,l-k-E-s.width)),T=v*k+E+u*I;let R=r==="start"?"inset-inline-start":"inset-inline-end";return(c==="document"||c==="fixed")&&(r==="start"&&t||r==="end"&&!t?R="left":R="right"),{inlineInset:T,inlineOutOfBoundsCorrection:C,surfaceInlineProperty:R}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const e=this.getProperties();let t=!1;for(const[s,n]of Object.entries(e))if(t=t||n!==this.lastValues[s],t)break;const r=this.lastValues.isOpen!==e.isOpen,o=!!e.anchorEl,a=!!e.surfaceEl;t&&o&&a&&(this.lastValues.isOpen=e.isOpen,e.isOpen?(this.lastValues=e,await this.position(),e.onOpen()):r&&(await e.beforeClose(),this.close(),e.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const e=this.getProperties().surfaceEl;e!=null&&e.popover&&(e!=null&&e.isConnected)&&e.hidePopover()}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const te={INDEX:0,ITEM:1,TEXT:2};class rs{constructor(e){this.getProperties=e,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=t=>{this.isTypingAhead?this.typeahead(t):this.beginTypeahead(t)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(e){this.active&&(e.code==="Space"||e.code==="Enter"||e.code.startsWith("Arrow")||e.code==="Escape"||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map((t,r)=>[r,t,t.typeaheadText.trim().toLowerCase()]),this.lastActiveRecord=this.typeaheadRecords.find(t=>t[te.ITEM].tabIndex===0)??null,this.lastActiveRecord&&(this.lastActiveRecord[te.ITEM].tabIndex=-1),this.typeahead(e)))}typeahead(e){if(e.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),e.code==="Enter"||e.code.startsWith("Arrow")||e.code==="Escape"){this.endTypeahead(),this.lastActiveRecord&&(this.lastActiveRecord[te.ITEM].tabIndex=-1);return}e.code==="Space"&&e.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=e.key.toLowerCase();const t=this.lastActiveRecord?this.lastActiveRecord[te.INDEX]:-1,r=this.typeaheadRecords.length,o=c=>(c[te.INDEX]+r-t)%r,a=this.typeaheadRecords.filter(c=>!c[te.ITEM].disabled&&c[te.TEXT].startsWith(this.typaheadBuffer)).sort((c,l)=>o(c)-o(l));if(a.length===0){clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[te.ITEM].tabIndex=-1),this.endTypeahead();return}const s=this.typaheadBuffer.length===1;let n;this.lastActiveRecord===a[0]&&s?n=a[1]??a[0]:n=a[0],this.lastActiveRecord&&(this.lastActiveRecord[te.ITEM].tabIndex=-1),this.lastActiveRecord=n,n[te.ITEM].tabIndex=0,n[te.ITEM].focus()}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const po=200,mo=new Set([q.ArrowDown,q.ArrowUp,q.Home,q.End]),os=new Set([q.ArrowLeft,q.ArrowRight,...mo]);function as(i=document){var t;let e=i.activeElement;for(;e&&((t=e==null?void 0:e.shadowRoot)!=null&&t.activeElement);)e=e.shadowRoot.activeElement;return e}class U extends N{get openDirection(){return this.menuCorner.split("-")[0]==="start"?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(e){this.currentAnchorElement=e,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.noHorizontalFlip=!1,this.noVerticalFlip=!1,this.typeaheadDelay=po,this.anchorCorner=Xi.END_START,this.menuCorner=Xi.START_START,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=ne.FIRST_ITEM,this.noNavigationWrap=!1,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=na(),this.listController=new to({isItem:e=>e.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:e=>{e.selected=!1,e.tabIndex=-1},activateItem:e=>{e.selected=!0,e.tabIndex=0},isNavigableKey:e=>{if(!this.isSubmenu)return os.has(e);const r=getComputedStyle(this).direction==="rtl"?q.ArrowLeft:q.ArrowRight;return e===r?!0:mo.has(e)},wrapNavigation:()=>!this.noNavigationWrap}),this.lastFocusedElement=null,this.typeaheadController=new rs(()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive})),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new is(this,()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:this.positioning==="popover"?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,disableBlockFlip:this.noVerticalFlip,disableInlineFlip:this.noHorizontalFlip,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&this.positioning!=="popover"?"move":"resize"})),this.onWindowResize=()=>{this.isRepositioning||this.positioning!=="document"&&this.positioning!=="fixed"&&this.positioning!=="popover"||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async e=>{const t=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(t))return;if(e.relatedTarget){if(yi(e.relatedTarget,this)||this.pointerPath.length!==0&&yi(e.relatedTarget,t))return}else if(this.pointerPath.includes(this))return;const r=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=r},this.onOpened=async()=>{this.lastFocusedElement=as();const e=this.items,t=nt(e);t&&this.defaultFocus!==ne.NONE&&(t.item.tabIndex=-1);let r=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):r=!!await this.animateOpen(),this.defaultFocus){case ne.FIRST_ITEM:const o=$i(e);o&&(o.tabIndex=0,o.focus(),await o.updateComplete);break;case ne.LAST_ITEM:const a=eo(e);a&&(a.tabIndex=0,a.focus(),await a.updateComplete);break;case ne.LIST_ROOT:this.focus();break;default:case ne.NONE:break}r||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{var e,t;this.open=!1,this.skipRestoreFocus||(t=(e=this.lastFocusedElement)==null?void 0:e.focus)==null||t.call(e),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=e=>{this.pointerPath=e.composedPath()},this.onDocumentClick=e=>{if(!this.open)return;const t=e.composedPath();!this.stayOpenOnOutsideClick&&!t.includes(this)&&!t.includes(this.anchorElement)&&(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(e){if(e.has("open")){if(this.open){this.removeAttribute("aria-hidden");return}this.setAttribute("aria-hidden","true")}}update(e){e.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),e.has("positioning")&&this.positioning==="popover"&&!this.showPopover&&(this.positioning="fixed"),super.update(e)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}getBoundingClientRect(){return this.surfaceEl?this.surfaceEl.getBoundingClientRect():super.getBoundingClientRect()}getClientRects(){return this.surfaceEl?this.surfaceEl.getClientRects():super.getClientRects()}render(){return this.renderSurface()}renderSurface(){return g`
      <div
        class="menu ${le(this.getSurfaceClasses())}"
        style=${zt(this.menuPositionController.surfaceStyles)}
        popover=${this.positioning==="popover"?"manual":A}>
        ${this.renderElevation()}
        <div class="items">
          <div class="item-padding"> ${this.renderMenuItems()} </div>
        </div>
      </div>
    `}renderMenuItems(){return g`<slot
      @close-menu=${this.onCloseMenu}
      @deactivate-items=${this.onDeactivateItems}
      @request-activation=${this.onRequestActivation}
      @deactivate-typeahead=${this.handleDeactivateTypeahead}
      @activate-typeahead=${this.handleActivateTypeahead}
      @stay-open-on-focusout=${this.handleStayOpenOnFocusout}
      @close-on-focusout=${this.handleCloseOnFocusout}
      @slotchange=${this.listController.onSlotchange}></slot>`}renderElevation(){return g`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:this.positioning==="fixed","has-overflow":this.hasOverflow}}captureKeydown(e){e.target===this&&!e.defaultPrevented&&uo(e.code)&&(e.preventDefault(),this.close()),this.typeaheadController.onKeydown(e)}async animateOpen(){const e=this.surfaceEl,t=this.slotEl;if(!e||!t)return!0;const r=this.openDirection;this.dispatchEvent(new Event("opening")),e.classList.toggle("animating",!0);const o=this.openCloseAnimationSignal.start(),a=e.offsetHeight,s=r==="UP",n=this.items,c=500,l=50,d=250,v=(c-d)/n.length,u=e.animate([{height:"0px"},{height:`${a}px`}],{duration:c,easing:rt.EMPHASIZED}),f=t.animate([{transform:s?`translateY(-${a}px)`:""},{transform:""}],{duration:c,easing:rt.EMPHASIZED}),_=e.animate([{opacity:0},{opacity:1}],l),y=[];for(let E=0;E<n.length;E++){const S=s?n.length-1-E:E,m=n[S],k=m.animate([{opacity:0},{opacity:1}],{duration:d,delay:v*E});m.classList.toggle("md-menu-hidden",!0),k.addEventListener("finish",()=>{m.classList.toggle("md-menu-hidden",!1)}),y.push([m,k])}let x=E=>{};const b=new Promise(E=>{x=E});return o.addEventListener("abort",()=>{u.cancel(),f.cancel(),_.cancel(),y.forEach(([E,S])=>{E.classList.toggle("md-menu-hidden",!1),S.cancel()}),x(!0)}),u.addEventListener("finish",()=>{e.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),x(!1)}),await b}animateClose(){let e;const t=new Promise(k=>{e=k}),r=this.surfaceEl,o=this.slotEl;if(!r||!o)return e(!1),t;const s=this.openDirection==="UP";this.dispatchEvent(new Event("closing")),r.classList.toggle("animating",!0);const n=this.openCloseAnimationSignal.start(),c=r.offsetHeight,l=this.items,d=150,v=50,u=d-v,f=50,_=50,y=.35,x=(d-_-f)/l.length,b=r.animate([{height:`${c}px`},{height:`${c*y}px`}],{duration:d,easing:rt.EMPHASIZED_ACCELERATE}),E=o.animate([{transform:""},{transform:s?`translateY(-${c*(1-y)}px)`:""}],{duration:d,easing:rt.EMPHASIZED_ACCELERATE}),S=r.animate([{opacity:1},{opacity:0}],{duration:v,delay:u}),m=[];for(let k=0;k<l.length;k++){const O=s?k:l.length-1-k,w=l[O],I=w.animate([{opacity:1},{opacity:0}],{duration:f,delay:_+x*k});I.addEventListener("finish",()=>{w.classList.toggle("md-menu-hidden",!0)}),m.push([w,I])}return n.addEventListener("abort",()=>{b.cancel(),E.cancel(),S.cancel(),m.forEach(([k,O])=>{O.cancel(),k.classList.toggle("md-menu-hidden",!1)}),e(!1)}),b.addEventListener("finish",()=>{r.classList.toggle("animating",!1),m.forEach(([k])=>{k.classList.toggle("md-menu-hidden",!1)}),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),e(!0)}),t}handleKeydown(e){this.pointerPath=[],this.listController.handleKeydown(e)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(e){e.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(e){e.stopPropagation(),this.listController.onRequestActivation(e)}handleDeactivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1,this.slotItems.forEach(t=>{var r;(r=t.close)==null||r.call(t)})}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}h([Q(".menu")],U.prototype,"surfaceEl",void 0);h([Q("slot")],U.prototype,"slotEl",void 0);h([p()],U.prototype,"anchor",void 0);h([p()],U.prototype,"positioning",void 0);h([p({type:Boolean})],U.prototype,"quick",void 0);h([p({type:Boolean,attribute:"has-overflow"})],U.prototype,"hasOverflow",void 0);h([p({type:Boolean,reflect:!0})],U.prototype,"open",void 0);h([p({type:Number,attribute:"x-offset"})],U.prototype,"xOffset",void 0);h([p({type:Number,attribute:"y-offset"})],U.prototype,"yOffset",void 0);h([p({type:Boolean,attribute:"no-horizontal-flip"})],U.prototype,"noHorizontalFlip",void 0);h([p({type:Boolean,attribute:"no-vertical-flip"})],U.prototype,"noVerticalFlip",void 0);h([p({type:Number,attribute:"typeahead-delay"})],U.prototype,"typeaheadDelay",void 0);h([p({attribute:"anchor-corner"})],U.prototype,"anchorCorner",void 0);h([p({attribute:"menu-corner"})],U.prototype,"menuCorner",void 0);h([p({type:Boolean,attribute:"stay-open-on-outside-click"})],U.prototype,"stayOpenOnOutsideClick",void 0);h([p({type:Boolean,attribute:"stay-open-on-focusout"})],U.prototype,"stayOpenOnFocusout",void 0);h([p({type:Boolean,attribute:"skip-restore-focus"})],U.prototype,"skipRestoreFocus",void 0);h([p({attribute:"default-focus"})],U.prototype,"defaultFocus",void 0);h([p({type:Boolean,attribute:"no-navigation-wrap"})],U.prototype,"noNavigationWrap",void 0);h([Le({flatten:!0})],U.prototype,"slotItems",void 0);h([P()],U.prototype,"typeaheadActive",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ss=H`:host{--md-elevation-level: var(--md-menu-container-elevation, 2);--md-elevation-shadow-color: var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape: var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px))}.menu{border-radius:var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px));display:none;inset:auto;border:none;padding:0px;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit;scrollbar-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:none;box-sizing:border-box;background-color:var(--md-menu-container-color, var(--md-sys-color-surface-container, #f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit;scrollbar-width:inherit}.item-padding{padding-block:var(--md-menu-top-space, 8px) var(--md-menu-bottom-space, 8px)}.has-overflow:not([popover]) .items{overflow:visible}.has-overflow.animating .items,.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors: active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xi=class extends U{};xi.styles=[ss];xi=h([Vt("md-menu")],xi);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ns extends Fi{computeValidity(e){return this.selectControl||(this.selectControl=document.createElement("select")),Yr(g`<option value=${e.value}></option>`,this.selectControl),this.selectControl.value=e.value,this.selectControl.required=e.required,{validity:this.selectControl.validity,validationMessage:this.selectControl.validationMessage}}equals(e,t){return e.value===t.value&&e.required===t.required}copy({value:e,required:t}){return{value:e,required:t}}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ls(i){const e=[];for(let t=0;t<i.length;t++){const r=i[t];r.selected&&e.push([r,t])}return e}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ji;const Lt=Symbol("value"),ds=Ne(ho(Oi(Pi(Zt(N)))));class F extends ds{get value(){return this[Lt]}set value(e){this.lastUserSetValue=e,this.select(e)}get options(){var e;return((e=this.menu)==null?void 0:e.items)??[]}get selectedIndex(){const[e,t]=(this.getSelectedOptions()??[])[0]??[];return t??-1}set selectedIndex(e){this.lastUserSetSelectedIndex=e,this.selectIndex(e)}get selectedOptions(){return(this.getSelectedOptions()??[]).map(([e])=>e)}get hasError(){return this.error||this.nativeError}constructor(){super(),this.quick=!1,this.required=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.supportingText="",this.error=!1,this.menuPositioning="popover",this.clampMenuWidth=!1,this.typeaheadDelay=po,this.hasLeadingIcon=!1,this.displayText="",this.menuAlign="start",this[Ji]="",this.lastUserSetValue=null,this.lastUserSetSelectedIndex=null,this.lastSelectedOption=null,this.lastSelectedOptionRecords=[],this.nativeError=!1,this.nativeErrorText="",this.focused=!1,this.open=!1,this.defaultFocus=ne.NONE,this.prevOpen=this.open,this.selectWidth=0,this.addEventListener("focus",this.handleFocus.bind(this)),this.addEventListener("blur",this.handleBlur.bind(this))}select(e){const t=this.options.find(r=>r.value===e);t&&this.selectItem(t)}selectIndex(e){const t=this.options[e];t&&this.selectItem(t)}reset(){for(const e of this.options)e.selected=e.hasAttribute("selected");this.updateValueAndDisplayText(),this.nativeError=!1,this.nativeErrorText=""}showPicker(){this.open=!0}[(Ji=Lt,Bt)](e){var r;e==null||e.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&((r=this.field)==null||r.reannounceError())}update(e){if(this.hasUpdated||this.initUserSelection(),this.prevOpen!==this.open&&this.open){const t=this.getBoundingClientRect();this.selectWidth=t.width}this.prevOpen=this.open,super.update(e)}render(){return g`
      <span
        class="select ${le(this.getRenderClasses())}"
        @focusout=${this.handleFocusout}>
        ${this.renderField()} ${this.renderMenu()}
      </span>
    `}async firstUpdated(e){var t;await((t=this.menu)==null?void 0:t.updateComplete),this.lastSelectedOptionRecords.length||this.initUserSelection(),!this.lastSelectedOptionRecords.length&&!da&&!this.options.length&&setTimeout(()=>{this.updateValueAndDisplayText()}),super.firstUpdated(e)}getRenderClasses(){return{disabled:this.disabled,error:this.error,open:this.open}}renderField(){const e=this.ariaLabel||this.label;return qt`
      <${this.fieldTag}
          aria-haspopup="listbox"
          role="combobox"
          part="field"
          id="field"
          tabindex=${this.disabled?"-1":"0"}
          aria-label=${e||A}
          aria-describedby="description"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="listbox"
          class="field"
          label=${this.label}
          ?no-asterisk=${this.noAsterisk}
          .focused=${this.focused||this.open}
          .populated=${!!this.displayText}
          .disabled=${this.disabled}
          .required=${this.required}
          .error=${this.hasError}
          ?has-start=${this.hasLeadingIcon}
          has-end
          supporting-text=${this.supportingText}
          error-text=${this.getErrorText()}
          @keydown=${this.handleKeydown}
          @click=${this.handleClick}>
         ${this.renderFieldContent()}
         <div id="description" slot="aria-describedby"></div>
      </${this.fieldTag}>`}renderFieldContent(){return[this.renderLeadingIcon(),this.renderLabel(),this.renderTrailingIcon()]}renderLeadingIcon(){return g`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return g`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}>
          <svg height="5" viewBox="7 10 10 5" focusable="false">
            <polygon
              class="down"
              stroke="none"
              fill-rule="evenodd"
              points="7 10 12 15 17 10"></polygon>
            <polygon
              class="up"
              stroke="none"
              fill-rule="evenodd"
              points="7 15 12 10 17 15"></polygon>
          </svg>
        </slot>
      </span>
    `}renderLabel(){return g`<div id="label">${this.displayText||g`&nbsp;`}</div>`}renderMenu(){const e=this.label||this.ariaLabel;return g`<div class="menu-wrapper">
      <md-menu
        id="listbox"
        .defaultFocus=${this.defaultFocus}
        role="listbox"
        tabindex="-1"
        aria-label=${e||A}
        stay-open-on-focusout
        part="menu"
        exportparts="focus-ring: menu-focus-ring"
        anchor="field"
        style=${zt({"--__menu-min-width":`${this.selectWidth}px`,"--__menu-max-width":this.clampMenuWidth?`${this.selectWidth}px`:void 0})}
        no-navigation-wrap
        .open=${this.open}
        .quick=${this.quick}
        .positioning=${this.menuPositioning}
        .typeaheadDelay=${this.typeaheadDelay}
        .anchorCorner=${this.menuAlign==="start"?"end-start":"end-end"}
        .menuCorner=${this.menuAlign==="start"?"start-start":"start-end"}
        @opening=${this.handleOpening}
        @opened=${this.redispatchEvent}
        @closing=${this.redispatchEvent}
        @closed=${this.handleClosed}
        @close-menu=${this.handleCloseMenu}
        @request-selection=${this.handleRequestSelection}
        @request-deselection=${this.handleRequestDeselection}>
        ${this.renderMenuContent()}
      </md-menu>
    </div>`}renderMenuContent(){return g`<slot></slot>`}handleKeydown(e){var a,s;if(this.open||this.disabled||!this.menu)return;const t=this.menu.typeaheadController,r=e.code==="Space"||e.code==="ArrowDown"||e.code==="ArrowUp"||e.code==="End"||e.code==="Home"||e.code==="Enter";if(!t.isTypingAhead&&r){switch(e.preventDefault(),this.open=!0,e.code){case"Space":case"ArrowDown":case"Enter":this.defaultFocus=ne.NONE;break;case"End":this.defaultFocus=ne.LAST_ITEM;break;case"ArrowUp":case"Home":this.defaultFocus=ne.FIRST_ITEM;break}return}if(e.key.length===1){t.onKeydown(e),e.preventDefault();const{lastActiveRecord:n}=t;if(!n)return;(s=(a=this.labelEl)==null?void 0:a.setAttribute)==null||s.call(a,"aria-live","polite"),this.selectItem(n[te.ITEM])&&this.dispatchInteractionEvents()}}handleClick(){this.open=!this.open}handleFocus(){this.focused=!0}handleBlur(){this.focused=!1}handleFocusout(e){e.relatedTarget&&yi(e.relatedTarget,this)||(this.open=!1)}getSelectedOptions(){if(!this.menu)return this.lastSelectedOptionRecords=[],null;const e=this.menu.items;return this.lastSelectedOptionRecords=ls(e),this.lastSelectedOptionRecords}async getUpdateComplete(){var e;return await((e=this.menu)==null?void 0:e.updateComplete),super.getUpdateComplete()}updateValueAndDisplayText(){const e=this.getSelectedOptions()??[];let t=!1;if(e.length){const[r]=e[0];t=this.lastSelectedOption!==r,this.lastSelectedOption=r,this[Lt]=r.value,this.displayText=r.displayText}else t=this.lastSelectedOption!==null,this.lastSelectedOption=null,this[Lt]="",this.displayText="";return t}async handleOpening(e){var a,s,n;if((s=(a=this.labelEl)==null?void 0:a.removeAttribute)==null||s.call(a,"aria-live"),this.redispatchEvent(e),this.defaultFocus!==ne.NONE)return;const t=this.menu.items,r=(n=nt(t))==null?void 0:n.item;let[o]=this.lastSelectedOptionRecords[0]??[null];r&&r!==o&&(r.tabIndex=-1),o=o??t[0],o&&(o.tabIndex=0,o.focus())}redispatchEvent(e){Li(this,e)}handleClosed(e){this.open=!1,this.redispatchEvent(e)}handleCloseMenu(e){const t=e.detail.reason,r=e.detail.itemPath[0];this.open=!1;let o=!1;t.kind==="click-selection"?o=this.selectItem(r):t.kind==="keydown"&&ts(t.key)?o=this.selectItem(r):(r.tabIndex=-1,r.blur()),o&&this.dispatchInteractionEvents()}selectItem(e){return(this.getSelectedOptions()??[]).forEach(([r])=>{e!==r&&(r.selected=!1)}),e.selected=!0,this.updateValueAndDisplayText()}handleRequestSelection(e){const t=e.target;this.lastSelectedOptionRecords.some(([r])=>r===t)||this.selectItem(t)}handleRequestDeselection(e){const t=e.target;this.lastSelectedOptionRecords.some(([r])=>r===t)&&this.updateValueAndDisplayText()}initUserSelection(){this.lastUserSetValue&&!this.lastSelectedOptionRecords.length?this.select(this.lastUserSetValue):this.lastUserSetSelectedIndex!==null&&!this.lastSelectedOptionRecords.length?this.selectIndex(this.lastUserSetSelectedIndex):this.updateValueAndDisplayText()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0}dispatchInteractionEvents(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}getErrorText(){return this.error?this.errorText:this.nativeErrorText}[We](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}click(){var e;(e=this.field)==null||e.click()}[ht](){return new ns(()=>this)}[ft](){return this.field}}F.shadowRootOptions={...N.shadowRootOptions,delegatesFocus:!0};h([p({type:Boolean})],F.prototype,"quick",void 0);h([p({type:Boolean})],F.prototype,"required",void 0);h([p({type:String,attribute:"error-text"})],F.prototype,"errorText",void 0);h([p()],F.prototype,"label",void 0);h([p({type:Boolean,attribute:"no-asterisk"})],F.prototype,"noAsterisk",void 0);h([p({type:String,attribute:"supporting-text"})],F.prototype,"supportingText",void 0);h([p({type:Boolean,reflect:!0})],F.prototype,"error",void 0);h([p({attribute:"menu-positioning"})],F.prototype,"menuPositioning",void 0);h([p({type:Boolean,attribute:"clamp-menu-width"})],F.prototype,"clampMenuWidth",void 0);h([p({type:Number,attribute:"typeahead-delay"})],F.prototype,"typeaheadDelay",void 0);h([p({type:Boolean,attribute:"has-leading-icon"})],F.prototype,"hasLeadingIcon",void 0);h([p({attribute:"display-text"})],F.prototype,"displayText",void 0);h([p({attribute:"menu-align"})],F.prototype,"menuAlign",void 0);h([p()],F.prototype,"value",null);h([p({type:Number,attribute:"selected-index"})],F.prototype,"selectedIndex",null);h([P()],F.prototype,"nativeError",void 0);h([P()],F.prototype,"nativeErrorText",void 0);h([P()],F.prototype,"focused",void 0);h([P()],F.prototype,"open",void 0);h([P()],F.prototype,"defaultFocus",void 0);h([Q(".field")],F.prototype,"field",void 0);h([Q("md-menu")],F.prototype,"menu",void 0);h([Q("#label")],F.prototype,"labelEl",void 0);h([Le({slot:"leading-icon",flatten:!0})],F.prototype,"leadingIcons",void 0);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cs extends F{constructor(){super(...arguments),this.fieldTag=Ae`md-filled-field`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hs=H`:host{--_text-field-active-indicator-color: var(--md-filled-select-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-active-indicator-height: var(--md-filled-select-text-field-active-indicator-height, 1px);--_text-field-container-color: var(--md-filled-select-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_text-field-disabled-active-indicator-color: var(--md-filled-select-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-active-indicator-height: var(--md-filled-select-text-field-disabled-active-indicator-height, 1px);--_text-field-disabled-active-indicator-opacity: var(--md-filled-select-text-field-disabled-active-indicator-opacity, 0.38);--_text-field-disabled-container-color: var(--md-filled-select-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-container-opacity: var(--md-filled-select-text-field-disabled-container-opacity, 0.04);--_text-field-disabled-input-text-color: var(--md-filled-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity: var(--md-filled-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color: var(--md-filled-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity: var(--md-filled-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color: var(--md-filled-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity: var(--md-filled-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-supporting-text-color: var(--md-filled-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity: var(--md-filled-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color: var(--md-filled-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity: var(--md-filled-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-active-indicator-color: var(--md-filled-select-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-active-indicator-color: var(--md-filled-select-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-input-text-color: var(--md-filled-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color: var(--md-filled-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color: var(--md-filled-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-supporting-text-color: var(--md-filled-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color: var(--md-filled-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-active-indicator-color: var(--md-filled-select-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-input-text-color: var(--md-filled-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color: var(--md-filled-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color: var(--md-filled-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-state-layer-color: var(--md-filled-select-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-state-layer-opacity: var(--md-filled-select-text-field-error-hover-state-layer-opacity, 0.08);--_text-field-error-hover-supporting-text-color: var(--md-filled-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color: var(--md-filled-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color: var(--md-filled-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color: var(--md-filled-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color: var(--md-filled-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-supporting-text-color: var(--md-filled-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color: var(--md-filled-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-active-indicator-color: var(--md-filled-select-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-active-indicator-height: var(--md-filled-select-text-field-focus-active-indicator-height, 3px);--_text-field-focus-input-text-color: var(--md-filled-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color: var(--md-filled-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color: var(--md-filled-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-supporting-text-color: var(--md-filled-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color: var(--md-filled-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-active-indicator-color: var(--md-filled-select-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-active-indicator-height: var(--md-filled-select-text-field-hover-active-indicator-height, 1px);--_text-field-hover-input-text-color: var(--md-filled-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color: var(--md-filled-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color: var(--md-filled-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-state-layer-color: var(--md-filled-select-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-state-layer-opacity: var(--md-filled-select-text-field-hover-state-layer-opacity, 0.08);--_text-field-hover-supporting-text-color: var(--md-filled-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color: var(--md-filled-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color: var(--md-filled-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font: var(--md-filled-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height: var(--md-filled-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size: var(--md-filled-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight: var(--md-filled-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color: var(--md-filled-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font: var(--md-filled-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height: var(--md-filled-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height: var(--md-filled-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size: var(--md-filled-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size: var(--md-filled-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight: var(--md-filled-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color: var(--md-filled-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size: var(--md-filled-select-text-field-leading-icon-size, 24px);--_text-field-supporting-text-color: var(--md-filled-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font: var(--md-filled-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height: var(--md-filled-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size: var(--md-filled-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight: var(--md-filled-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color: var(--md-filled-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size: var(--md-filled-select-text-field-trailing-icon-size, 24px);--_text-field-container-shape-start-start: var(--md-filled-select-text-field-container-shape-start-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-start-end: var(--md-filled-select-text-field-container-shape-start-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-end: var(--md-filled-select-text-field-container-shape-end-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_text-field-container-shape-end-start: var(--md-filled-select-text-field-container-shape-end-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--md-filled-field-active-indicator-color: var(--_text-field-active-indicator-color);--md-filled-field-active-indicator-height: var(--_text-field-active-indicator-height);--md-filled-field-container-color: var(--_text-field-container-color);--md-filled-field-container-shape-end-end: var(--_text-field-container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_text-field-container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_text-field-container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_text-field-container-shape-start-start);--md-filled-field-content-color: var(--_text-field-input-text-color);--md-filled-field-content-font: var(--_text-field-input-text-font);--md-filled-field-content-line-height: var(--_text-field-input-text-line-height);--md-filled-field-content-size: var(--_text-field-input-text-size);--md-filled-field-content-weight: var(--_text-field-input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_text-field-disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_text-field-disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_text-field-disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_text-field-disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_text-field-disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_text-field-disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_text-field-disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_text-field-disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_text-field-disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_text-field-disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_text-field-disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_text-field-disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_text-field-disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_text-field-disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_text-field-disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_text-field-error-active-indicator-color);--md-filled-field-error-content-color: var(--_text-field-error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_text-field-error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_text-field-error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_text-field-error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_text-field-error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_text-field-error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_text-field-error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_text-field-error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_text-field-error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_text-field-error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_text-field-error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_text-field-error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_text-field-error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_text-field-error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_text-field-error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_text-field-error-label-text-color);--md-filled-field-error-leading-content-color: var(--_text-field-error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_text-field-error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_text-field-error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_text-field-focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_text-field-focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_text-field-focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_text-field-focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_text-field-focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_text-field-focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_text-field-focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_text-field-hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_text-field-hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_text-field-hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_text-field-hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_text-field-hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_text-field-hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_text-field-hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_text-field-hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_text-field-hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_text-field-label-text-color);--md-filled-field-label-text-font: var(--_text-field-label-text-font);--md-filled-field-label-text-line-height: var(--_text-field-label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_text-field-label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_text-field-label-text-populated-size);--md-filled-field-label-text-size: var(--_text-field-label-text-size);--md-filled-field-label-text-weight: var(--_text-field-label-text-weight);--md-filled-field-leading-content-color: var(--_text-field-leading-icon-color);--md-filled-field-supporting-text-color: var(--_text-field-supporting-text-color);--md-filled-field-supporting-text-font: var(--_text-field-supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_text-field-supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_text-field-supporting-text-size);--md-filled-field-supporting-text-weight: var(--_text-field-supporting-text-weight);--md-filled-field-trailing-content-color: var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}
`;/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fs=H`:host{color:unset;min-width:210px;display:flex}.field{cursor:default;outline:none}.select{position:relative;flex-direction:column}.icon.trailing svg,.icon ::slotted(*){fill:currentColor}.icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}.icon slot{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.icon.trailing :is(.up,.down){opacity:0;transition:opacity 75ms linear 75ms}.select:not(.open) .down,.select.open .up{opacity:1}.field,.select,md-menu{min-width:inherit;width:inherit;max-width:inherit;display:flex}md-menu{min-width:var(--__menu-min-width);max-width:var(--__menu-max-width, inherit)}.menu-wrapper{width:0px;height:0px;max-width:inherit}md-menu ::slotted(:not[disabled]){cursor:pointer}.field,.select{width:100%}:host{display:inline-flex}:host([disabled]){pointer-events:none}
`;class vo extends cs{}vo.styles=[fs,hs];customElements.define("ew-filled-select",vo);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const us=H`:host{display:flex;--md-ripple-hover-color: var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity, 0.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-menu-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-menu-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-menu-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-menu-item-one-line-container-height, 56px);padding-top:var(--md-menu-item-top-space, 12px);padding-bottom:var(--md-menu-item-bottom-space, 12px);padding-inline-start:var(--md-menu-item-leading-space, 16px);padding-inline-end:var(--md-menu-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-menu-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-menu-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}.list-item{background-color:var(--md-menu-item-container-color, transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color, var(--md-sys-color-secondary-container, #e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b))}@media(forced-colors: active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ps{constructor(e,t){this.host=e,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(Yi(this.host,{kind:ji.CLICK_SELECTION}))},this.onKeydown=r=>{if(this.host.href&&r.code==="Enter"){const a=this.getInteractiveElement();a instanceof HTMLAnchorElement&&a.click()}if(r.defaultPrevented)return;const o=r.code;this.host.keepOpen&&o!=="Escape"||uo(o)&&(r.preventDefault(),this.host.dispatchEvent(Yi(this.host,{kind:ji.KEYDOWN,key:o})))},this.getHeadlineElements=t.getHeadlineElements,this.getSupportingTextElements=t.getSupportingTextElements,this.getDefaultElements=t.getDefaultElements,this.getInteractiveElement=t.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(this.internalTypeaheadText!==null)return this.internalTypeaheadText;const e=this.getHeadlineElements(),t=[];return e.forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.length===0&&this.getDefaultElements().forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.length===0&&this.getSupportingTextElements().forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:case"menuitem":case"option":return"li"}}get role(){return this.host.type==="option"?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(e){this.internalTypeaheadText=e}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ms(){return new Event("request-selection",{bubbles:!0,composed:!0})}function vs(){return new Event("request-deselection",{bubbles:!0,composed:!0})}class gs{get role(){return this.menuItemController.role}get typeaheadText(){return this.menuItemController.typeaheadText}setTypeaheadText(e){this.menuItemController.setTypeaheadText(e)}get displayText(){return this.internalDisplayText!==null?this.internalDisplayText:this.menuItemController.typeaheadText}setDisplayText(e){this.internalDisplayText=e}constructor(e,t){this.host=e,this.internalDisplayText=null,this.firstUpdate=!0,this.onClick=()=>{this.menuItemController.onClick()},this.onKeydown=r=>{this.menuItemController.onKeydown(r)},this.lastSelected=this.host.selected,this.menuItemController=new ps(e,t),e.addController(this)}hostUpdate(){this.lastSelected!==this.host.selected&&(this.host.ariaSelected=this.host.selected?"true":"false")}hostUpdated(){this.lastSelected!==this.host.selected&&!this.firstUpdate&&(this.host.selected?this.host.dispatchEvent(ms()):this.host.dispatchEvent(vs())),this.lastSelected=this.host.selected,this.firstUpdate=!1}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _s=Ne(N);class ae extends _s{constructor(){super(...arguments),this.disabled=!1,this.isMenuItem=!0,this.selected=!1,this.value="",this.type="option",this.selectOptionController=new gs(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.selectOptionController.typeaheadText}set typeaheadText(e){this.selectOptionController.setTypeaheadText(e)}get displayText(){return this.selectOptionController.displayText}set displayText(e){this.selectOptionController.setDisplayText(e)}render(){return this.renderListItem(g`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){return g`
      <li
        id="item"
        tabindex=${this.disabled?-1:0}
        role=${this.selectOptionController.role}
        aria-label=${this.ariaLabel||A}
        aria-selected=${this.ariaSelected||A}
        aria-checked=${this.ariaChecked||A}
        aria-expanded=${this.ariaExpanded||A}
        aria-haspopup=${this.ariaHasPopup||A}
        class="list-item ${le(this.getRenderClasses())}"
        @click=${this.selectOptionController.onClick}
        @keydown=${this.selectOptionController.onKeydown}
        >${e}</li
      >
    `}renderRipple(){return g` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.disabled}></md-ripple>`}renderFocusRing(){return g` <md-focus-ring
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return g`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}focus(){var e;(e=this.listItemRoot)==null||e.focus()}}ae.shadowRootOptions={...N.shadowRootOptions,delegatesFocus:!0};h([p({type:Boolean,reflect:!0})],ae.prototype,"disabled",void 0);h([p({type:Boolean,attribute:"md-menu-item",reflect:!0})],ae.prototype,"isMenuItem",void 0);h([p({type:Boolean})],ae.prototype,"selected",void 0);h([p()],ae.prototype,"value",void 0);h([Q(".list-item")],ae.prototype,"listItemRoot",void 0);h([Le({slot:"headline"})],ae.prototype,"headlineElements",void 0);h([Le({slot:"supporting-text"})],ae.prototype,"supportingTextElements",void 0);h([fa({slot:""})],ae.prototype,"defaultElements",void 0);h([p({attribute:"typeahead-text"})],ae.prototype,"typeaheadText",null);h([p({attribute:"display-text"})],ae.prototype,"displayText",null);class go extends ae{}go.styles=[us];customElements.define("ew-select-option",go);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bs=Ne(N);class xt extends bs{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return g`
      <div
        class="progress ${le(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${e||A}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?A:this.value}
        >${this.renderIndicator()}</div
      >
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}h([p({type:Number})],xt.prototype,"value",void 0);h([p({type:Number})],xt.prototype,"max",void 0);h([p({type:Boolean})],xt.prototype,"indeterminate",void 0);h([p({type:Boolean,attribute:"four-color"})],xt.prototype,"fourColor",void 0);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ys extends xt{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=(1-this.value/this.max)*100;return g`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle
          class="active-track"
          pathLength="100"
          stroke-dashoffset=${e}></circle>
      </svg>
    `}renderIndeterminateContainer(){return g` <div class="spinner">
      <div class="left">
        <div class="circle"></div>
      </div>
      <div class="right">
        <div class="circle"></div>
      </div>
    </div>`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xs=H`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}
`;class _o extends ys{}_o.styles=[xs];customElements.define("ew-circular-progress",_o);class Wt extends N{render(){return g`
      <div>
        <ew-circular-progress
          active
          ?indeterminate=${this.progress===void 0}
          .value=${this.progress!==void 0?this.progress/100:void 0}
        ></ew-circular-progress>
        ${this.progress!==void 0?g`<div>${this.progress}%</div>`:""}
      </div>
      ${this.label}
    `}}Wt.styles=H`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    ew-circular-progress {
      margin-bottom: 16px;
    }
  `;h([p()],Wt.prototype,"label",void 0);h([p()],Wt.prototype,"progress",void 0);customElements.define("ewt-page-progress",Wt);class Gt extends N{render(){return g`
      <div class="icon">${this.icon}</div>
      ${this.label}
    `}}Gt.styles=H`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    .icon {
      font-size: 50px;
      line-height: 80px;
      color: black;
    }
  `;h([p()],Gt.prototype,"icon",void 0);h([p()],Gt.prototype,"label",void 0);customElements.define("ewt-page-message",Gt);const ws=ye`
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
    />
  </svg>
`,Es=ye`
  <svg viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
    />
  </svg>
`,Qi=ye`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
  </svg>
`,Ss=ye`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z" />
  </svg>
`,er=ye`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M20,19V7H4V19H20M20,3A2,2 0 0,1 22,5V19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19V5C2,3.89 2.9,3 4,3H20M13,17V15H18V17H13M9.58,13L5.57,9H8.4L11.7,12.3C12.09,12.69 12.09,13.33 11.7,13.72L8.42,17H5.59L9.58,13Z" />
  </svg>
`,tr=ye`
  <svg slot="start" viewBox="0 0 24 24">
  <path d="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
  </svg>
`,ir=ye`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="m12.151 1.5882c-.3262 0-.6523.1291-.8996.3867l-8.3848 8.7354c-.0619.0644-.1223.1368-.1807.2154-.0588.0789-.1151.1638-.1688.2534-.2593.4325-.4552.9749-.5232 1.4555-.0026.018-.0076.0369-.0094.0548-.0121.0987-.0184.1944-.0184.2857v8.0124a1.2731 1.2731 0 001.2731 1.2731h7.8313l-3.4484-3.593a1.7399 1.7399 0 111.0803-1.125l2.6847 2.7972v-10.248a1.7399 1.7399 0 111.5276-0v7.187l2.6702-2.782a1.7399 1.7399 0 111.0566 1.1505l-3.7269 3.8831v2.7299h8.174a1.2471 1.2471 0 001.2471-1.2471v-8.0375c0-.0912-.0059-.1868-.0184-.2855-.0603-.4935-.2636-1.0617-.5326-1.5105-.0537-.0896-.1101-.1745-.1684-.253-.0588-.079-.1191-.1513-.181-.2158l-8.3848-8.7363c-.2473-.2577-.5735-.3866-.8995-.3864" />
  </svg>
`,ks=ye`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M15,14C17.67,14 23,15.33 23,18V20H7V18C7,15.33 12.33,14 15,14M15,12A4,4 0 0,1 11,8A4,4 0 0,1 15,4A4,4 0 0,1 19,8A4,4 0 0,1 15,12M5,9.59L7.12,7.46L8.54,8.88L6.41,11L8.54,13.12L7.12,14.54L5,12.41L2.88,14.54L1.46,13.12L3.59,11L1.46,8.88L2.88,7.46L5,9.59Z" />
  </svg>
`,As=ye`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z" />
  </svg>
`,Ts=[73,77,80,82,79,86,1];var qe;(function(i){i[i.CURRENT_STATE=1]="CURRENT_STATE",i[i.ERROR_STATE=2]="ERROR_STATE",i[i.RPC=3]="RPC",i[i.RPC_RESULT=4]="RPC_RESULT"})(qe||(qe={}));var Ee;(function(i){i[i.READY=2]="READY",i[i.PROVISIONING=3]="PROVISIONING",i[i.PROVISIONED=4]="PROVISIONED"})(Ee||(Ee={}));const Rs={0:"NO_ERROR",1:"INVALID_RPC_PACKET",2:"UNKNOWN_RPC_COMMAND",3:"UNABLE_TO_CONNECT",254:"TIMEOUT",255:"UNKNOWN_ERROR"};class bo extends Error{constructor(){super("Port is not ready")}}const Is=i=>new Promise(e=>setTimeout(e,i)),Cs=(i,e=2)=>{let t=i.toString(16).toUpperCase();return t.startsWith("-")?"-0x"+t.substring(1).padStart(e,"0"):"0x"+t.padStart(e,"0")},rr=i=>"["+i.map(e=>Cs(e)).join(", ")+"]";class Ls extends EventTarget{constructor(e,t){if(super(),this.port=e,this.logger=t,this.error=0,e.readable===null)throw new Error("Port is not readable");if(e.writable===null)throw new Error("Port is not writable")}async initialize(e=1e3){if(this.logger.log("Initializing Improv Serial"),this._processInput(),await Is(1e3),this._reader===void 0)throw new bo;try{await new Promise(async(t,r)=>{setTimeout(()=>r(new Error("Improv Wi-Fi Serial not detected")),e),await this.requestCurrentState(),t(void 0)}),await this.requestInfo()}catch(t){throw await this.close(),t}return this.info}async close(){this._reader&&await new Promise(e=>{this._reader.cancel(),this.addEventListener("disconnect",e,{once:!0})})}async requestCurrentState(){let e;try{await new Promise(async(r,o)=>{this.addEventListener("state-changed",r,{once:!0});const a=s=>{this.removeEventListener("state-changed",r),o(s)};e=this._sendRPCWithResponse(2,[]),e.catch(a)})}catch(r){throw this._rpcFeedback=void 0,new Error(`Error fetching current state: ${r}`)}if(this.state!==Ee.PROVISIONED){this._rpcFeedback=void 0;return}const t=await e;this.nextUrl=t[0]}async requestInfo(e){const t=await this._sendRPCWithResponse(3,[],e);this.info={firmware:t[0],version:t[1],name:t[3],chipFamily:t[2]}}async provision(e,t,r){const o=new TextEncoder,a=o.encode(e),s=o.encode(t),n=[a.length,...a,s.length,...s],c=await this._sendRPCWithResponse(1,n,r);this.nextUrl=c[0]}async scan(){const t=(await this._sendRPCWithMultipleResponses(4,[])).map(([r,o,a])=>({name:r,rssi:parseInt(o),secured:a==="YES"}));return t.sort((r,o)=>r.name.toLocaleLowerCase().localeCompare(o.name.toLocaleLowerCase())),t}_sendRPC(e,t){this.writePacketToStream(qe.RPC,[e,t.length,...t])}async _sendRPCWithResponse(e,t,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,a)=>{this._rpcFeedback={command:e,resolve:o,reject:a},this._sendRPC(e,t)}),r)}async _sendRPCWithMultipleResponses(e,t,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,a)=>{this._rpcFeedback={command:e,resolve:o,reject:a,receivedData:[]},this._sendRPC(e,t)}),r)}async _awaitRPCResultWithTimeout(e,t){return t?await new Promise((r,o)=>{const a=setTimeout(()=>this._setError(254),t);e.finally(()=>clearTimeout(a)),e.then(r,o)}):await e}async _processInput(){this.logger.debug("Starting read loop"),this._reader=this.port.readable.getReader();try{let e=[],t,r=0;for(;;){const{value:o,done:a}=await this._reader.read();if(a)break;if(!(!o||o.length===0))for(const s of o){if(t===!1){s===10&&(t=void 0);continue}if(t===!0){e.push(s),e.length===r&&(this._handleIncomingPacket(e),t=void 0,e=[]);continue}if(s===10){e=[];continue}if(e.push(s),e.length!==9)continue;if(t=String.fromCharCode(...e.slice(0,6))==="IMPROV",!t){e=[];continue}r=9+e[8]+1}}}catch(e){this.logger.error("Error while reading serial port",e)}finally{this._reader.releaseLock(),this._reader=void 0}this.logger.debug("Finished read loop"),this.dispatchEvent(new Event("disconnect"))}_handleIncomingPacket(e){const t=e.slice(6),r=t[0],o=t[1],a=t[2],s=t.slice(3,3+a);if(this.logger.debug("PROCESS",{version:r,packetType:o,packetLength:a,data:rr(s)}),r!==1){this.logger.error("Received unsupported version",r);return}let n=t[3+a],c=0;for(let l=0;l<e.length-1;l++)c+=e[l];if(c=c&255,c!==n){this.logger.error(`Received invalid checksum ${n}. Expected ${c}`);return}if(o===qe.CURRENT_STATE)this.state=s[0],this.dispatchEvent(new CustomEvent("state-changed",{detail:this.state}));else if(o===qe.ERROR_STATE)this._setError(s[0]);else if(o===qe.RPC_RESULT){if(!this._rpcFeedback){this.logger.error("Received result while not waiting for one");return}const l=s[0];if(l!==this._rpcFeedback.command){this.logger.error(`Received result for command ${l} but expected ${this._rpcFeedback.command}`);return}const d=[],v=s[1];let u=2;for(;u<2+v;)d.push(String.fromCodePoint(...s.slice(u+1,u+s[u]+1))),u+=s[u]+1;"receivedData"in this._rpcFeedback?d.length>0?this._rpcFeedback.receivedData.push(d):(this._rpcFeedback.resolve(this._rpcFeedback.receivedData),this._rpcFeedback=void 0):(this._rpcFeedback.resolve(d),this._rpcFeedback=void 0)}else this.logger.error("Unable to handle packet",t)}async writePacketToStream(e,t){const r=new Uint8Array([...Ts,e,t.length,...t,0,0]);r[r.length-2]=r.reduce((a,s)=>a+s,0)&255,r[r.length-1]=10,this.logger.debug("Writing to stream:",rr(new Array(...r)));const o=this.port.writable.getWriter();await o.write(r);try{o.releaseLock()}catch(a){console.error("Ignoring release lock error",a)}}_setError(e){this.error=e,e>0&&this._rpcFeedback&&(this._rpcFeedback.reject(Rs[e]||`UNKNOWN_ERROR (${e})`),this._rpcFeedback=void 0),this.dispatchEvent(new CustomEvent("error-changed",{detail:this.error}))}}class W extends Error{}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const $s=4,or=0,ar=1,Ds=2;function je(i){let e=i.length;for(;--e>=0;)i[e]=0}const Os=0,yo=1,Ps=2,Fs=3,Ms=258,Mi=29,wt=256,ut=wt+1+Mi,Ge=30,zi=19,xo=2*ut+1,Pe=15,ti=16,zs=7,Bi=256,wo=16,Eo=17,So=18,wi=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Mt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Bs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ko=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Us=512,ge=new Array((ut+2)*2);je(ge);const lt=new Array(Ge*2);je(lt);const pt=new Array(Us);je(pt);const mt=new Array(Ms-Fs+1);je(mt);const Ui=new Array(Mi);je(Ui);const Ut=new Array(Ge);je(Ut);function ii(i,e,t,r,o){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=o,this.has_stree=i&&i.length}let Ao,To,Ro;function ri(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}const Io=i=>i<256?pt[i]:pt[256+(i>>>7)],vt=(i,e)=>{i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255},Y=(i,e,t)=>{i.bi_valid>ti-t?(i.bi_buf|=e<<i.bi_valid&65535,vt(i,i.bi_buf),i.bi_buf=e>>ti-i.bi_valid,i.bi_valid+=t-ti):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},ce=(i,e,t)=>{Y(i,t[e*2],t[e*2+1])},Co=(i,e)=>{let t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1},Ns=i=>{i.bi_valid===16?(vt(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)},Hs=(i,e)=>{const t=e.dyn_tree,r=e.max_code,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,n=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,d,v,u,f,_,y=0;for(u=0;u<=Pe;u++)i.bl_count[u]=0;for(t[i.heap[i.heap_max]*2+1]=0,l=i.heap_max+1;l<xo;l++)d=i.heap[l],u=t[t[d*2+1]*2+1]+1,u>c&&(u=c,y++),t[d*2+1]=u,!(d>r)&&(i.bl_count[u]++,f=0,d>=n&&(f=s[d-n]),_=t[d*2],i.opt_len+=_*(u+f),a&&(i.static_len+=_*(o[d*2+1]+f)));if(y!==0){do{for(u=c-1;i.bl_count[u]===0;)u--;i.bl_count[u]--,i.bl_count[u+1]+=2,i.bl_count[c]--,y-=2}while(y>0);for(u=c;u!==0;u--)for(d=i.bl_count[u];d!==0;)v=i.heap[--l],!(v>r)&&(t[v*2+1]!==u&&(i.opt_len+=(u-t[v*2+1])*t[v*2],t[v*2+1]=u),d--)}},Lo=(i,e,t)=>{const r=new Array(Pe+1);let o=0,a,s;for(a=1;a<=Pe;a++)o=o+t[a-1]<<1,r[a]=o;for(s=0;s<=e;s++){let n=i[s*2+1];n!==0&&(i[s*2]=Co(r[n]++,n))}},Vs=()=>{let i,e,t,r,o;const a=new Array(Pe+1);for(t=0,r=0;r<Mi-1;r++)for(Ui[r]=t,i=0;i<1<<wi[r];i++)mt[t++]=r;for(mt[t-1]=r,o=0,r=0;r<16;r++)for(Ut[r]=o,i=0;i<1<<Mt[r];i++)pt[o++]=r;for(o>>=7;r<Ge;r++)for(Ut[r]=o<<7,i=0;i<1<<Mt[r]-7;i++)pt[256+o++]=r;for(e=0;e<=Pe;e++)a[e]=0;for(i=0;i<=143;)ge[i*2+1]=8,i++,a[8]++;for(;i<=255;)ge[i*2+1]=9,i++,a[9]++;for(;i<=279;)ge[i*2+1]=7,i++,a[7]++;for(;i<=287;)ge[i*2+1]=8,i++,a[8]++;for(Lo(ge,ut+1,a),i=0;i<Ge;i++)lt[i*2+1]=5,lt[i*2]=Co(i,5);Ao=new ii(ge,wi,wt+1,ut,Pe),To=new ii(lt,Mt,0,Ge,Pe),Ro=new ii(new Array(0),Bs,0,zi,zs)},$o=i=>{let e;for(e=0;e<ut;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Ge;e++)i.dyn_dtree[e*2]=0;for(e=0;e<zi;e++)i.bl_tree[e*2]=0;i.dyn_ltree[Bi*2]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},Do=i=>{i.bi_valid>8?vt(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},sr=(i,e,t,r)=>{const o=e*2,a=t*2;return i[o]<i[a]||i[o]===i[a]&&r[e]<=r[t]},oi=(i,e,t)=>{const r=i.heap[t];let o=t<<1;for(;o<=i.heap_len&&(o<i.heap_len&&sr(e,i.heap[o+1],i.heap[o],i.depth)&&o++,!sr(e,r,i.heap[o],i.depth));)i.heap[t]=i.heap[o],t=o,o<<=1;i.heap[t]=r},nr=(i,e,t)=>{let r,o,a=0,s,n;if(i.sym_next!==0)do r=i.pending_buf[i.sym_buf+a++]&255,r+=(i.pending_buf[i.sym_buf+a++]&255)<<8,o=i.pending_buf[i.sym_buf+a++],r===0?ce(i,o,e):(s=mt[o],ce(i,s+wt+1,e),n=wi[s],n!==0&&(o-=Ui[s],Y(i,o,n)),r--,s=Io(r),ce(i,s,t),n=Mt[s],n!==0&&(r-=Ut[s],Y(i,r,n)));while(a<i.sym_next);ce(i,Bi,e)},Ei=(i,e)=>{const t=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,n,c=-1,l;for(i.heap_len=0,i.heap_max=xo,s=0;s<a;s++)t[s*2]!==0?(i.heap[++i.heap_len]=c=s,i.depth[s]=0):t[s*2+1]=0;for(;i.heap_len<2;)l=i.heap[++i.heap_len]=c<2?++c:0,t[l*2]=1,i.depth[l]=0,i.opt_len--,o&&(i.static_len-=r[l*2+1]);for(e.max_code=c,s=i.heap_len>>1;s>=1;s--)oi(i,t,s);l=a;do s=i.heap[1],i.heap[1]=i.heap[i.heap_len--],oi(i,t,1),n=i.heap[1],i.heap[--i.heap_max]=s,i.heap[--i.heap_max]=n,t[l*2]=t[s*2]+t[n*2],i.depth[l]=(i.depth[s]>=i.depth[n]?i.depth[s]:i.depth[n])+1,t[s*2+1]=t[n*2+1]=l,i.heap[1]=l++,oi(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],Hs(i,e),Lo(t,c,i.bl_count)},lr=(i,e,t)=>{let r,o=-1,a,s=e[0*2+1],n=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)a=s,s=e[(r+1)*2+1],!(++n<c&&a===s)&&(n<l?i.bl_tree[a*2]+=n:a!==0?(a!==o&&i.bl_tree[a*2]++,i.bl_tree[wo*2]++):n<=10?i.bl_tree[Eo*2]++:i.bl_tree[So*2]++,n=0,o=a,s===0?(c=138,l=3):a===s?(c=6,l=3):(c=7,l=4))},dr=(i,e,t)=>{let r,o=-1,a,s=e[0*2+1],n=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(a=s,s=e[(r+1)*2+1],!(++n<c&&a===s)){if(n<l)do ce(i,a,i.bl_tree);while(--n!==0);else a!==0?(a!==o&&(ce(i,a,i.bl_tree),n--),ce(i,wo,i.bl_tree),Y(i,n-3,2)):n<=10?(ce(i,Eo,i.bl_tree),Y(i,n-3,3)):(ce(i,So,i.bl_tree),Y(i,n-11,7));n=0,o=a,s===0?(c=138,l=3):a===s?(c=6,l=3):(c=7,l=4)}},Zs=i=>{let e;for(lr(i,i.dyn_ltree,i.l_desc.max_code),lr(i,i.dyn_dtree,i.d_desc.max_code),Ei(i,i.bl_desc),e=zi-1;e>=3&&i.bl_tree[ko[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e},qs=(i,e,t,r)=>{let o;for(Y(i,e-257,5),Y(i,t-1,5),Y(i,r-4,4),o=0;o<r;o++)Y(i,i.bl_tree[ko[o]*2+1],3);dr(i,i.dyn_ltree,e-1),dr(i,i.dyn_dtree,t-1)},Ws=i=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return or;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return ar;for(t=32;t<wt;t++)if(i.dyn_ltree[t*2]!==0)return ar;return or};let cr=!1;const Gs=i=>{cr||(Vs(),cr=!0),i.l_desc=new ri(i.dyn_ltree,Ao),i.d_desc=new ri(i.dyn_dtree,To),i.bl_desc=new ri(i.bl_tree,Ro),i.bi_buf=0,i.bi_valid=0,$o(i)},Oo=(i,e,t,r)=>{Y(i,(Os<<1)+(r?1:0),3),Do(i),vt(i,t),vt(i,~t),t&&i.pending_buf.set(i.window.subarray(e,e+t),i.pending),i.pending+=t},Ks=i=>{Y(i,yo<<1,3),ce(i,Bi,ge),Ns(i)},Ys=(i,e,t,r)=>{let o,a,s=0;i.level>0?(i.strm.data_type===Ds&&(i.strm.data_type=Ws(i)),Ei(i,i.l_desc),Ei(i,i.d_desc),s=Zs(i),o=i.opt_len+3+7>>>3,a=i.static_len+3+7>>>3,a<=o&&(o=a)):o=a=t+5,t+4<=o&&e!==-1?Oo(i,e,t,r):i.strategy===$s||a===o?(Y(i,(yo<<1)+(r?1:0),3),nr(i,ge,lt)):(Y(i,(Ps<<1)+(r?1:0),3),qs(i,i.l_desc.max_code+1,i.d_desc.max_code+1,s+1),nr(i,i.dyn_ltree,i.dyn_dtree)),$o(i),r&&Do(i)},js=(i,e,t)=>(i.pending_buf[i.sym_buf+i.sym_next++]=e,i.pending_buf[i.sym_buf+i.sym_next++]=e>>8,i.pending_buf[i.sym_buf+i.sym_next++]=t,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(mt[t]+wt+1)*2]++,i.dyn_dtree[Io(e)*2]++),i.sym_next===i.sym_end);var Xs=Gs,Js=Oo,Qs=Ys,en=js,tn=Ks,rn={_tr_init:Xs,_tr_stored_block:Js,_tr_flush_block:Qs,_tr_tally:en,_tr_align:tn};const on=(i,e,t,r)=>{let o=i&65535|0,a=i>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do o=o+e[r++]|0,a=a+o|0;while(--s);o%=65521,a%=65521}return o|a<<16|0};var gt=on;const an=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var r=0;r<8;r++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},sn=new Uint32Array(an()),nn=(i,e,t,r)=>{const o=sn,a=r+t;i^=-1;for(let s=r;s<a;s++)i=i>>>8^o[(i^e[s])&255];return i^-1};var V=nn,ze={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xe={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ln,_tr_stored_block:Si,_tr_flush_block:dn,_tr_tally:Re,_tr_align:cn}=rn,{Z_NO_FLUSH:Ie,Z_PARTIAL_FLUSH:hn,Z_FULL_FLUSH:fn,Z_FINISH:re,Z_BLOCK:hr,Z_OK:Z,Z_STREAM_END:fr,Z_STREAM_ERROR:he,Z_DATA_ERROR:un,Z_BUF_ERROR:ai,Z_DEFAULT_COMPRESSION:pn,Z_FILTERED:mn,Z_HUFFMAN_ONLY:$t,Z_RLE:vn,Z_FIXED:gn,Z_DEFAULT_STRATEGY:_n,Z_UNKNOWN:bn,Z_DEFLATED:Kt}=Xe,yn=9,xn=15,wn=8,En=29,Sn=256,ki=Sn+1+En,kn=30,An=19,Tn=2*ki+1,Rn=15,$=3,ke=258,fe=ke+$+1,In=32,Ke=42,Ni=57,Ai=69,Ti=73,Ri=91,Ii=103,Fe=113,at=666,K=1,Je=2,Be=3,Qe=4,Cn=3,Me=(i,e)=>(i.msg=ze[e],e),ur=i=>i*2-(i>4?9:0),Se=i=>{let e=i.length;for(;--e>=0;)i[e]=0},Ln=i=>{let e,t,r,o=i.w_size;e=i.hash_size,r=e;do t=i.head[--r],i.head[r]=t>=o?t-o:0;while(--e);e=o,r=e;do t=i.prev[--r],i.prev[r]=t>=o?t-o:0;while(--e)};let $n=(i,e,t)=>(e<<i.hash_shift^t)&i.hash_mask,Ce=$n;const X=i=>{const e=i.state;let t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},J=(i,e)=>{dn(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,X(i.strm)},D=(i,e)=>{i.pending_buf[i.pending++]=e},tt=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255},Ci=(i,e,t,r)=>{let o=i.avail_in;return o>r&&(o=r),o===0?0:(i.avail_in-=o,e.set(i.input.subarray(i.next_in,i.next_in+o),t),i.state.wrap===1?i.adler=gt(i.adler,e,o,t):i.state.wrap===2&&(i.adler=V(i.adler,e,o,t)),i.next_in+=o,i.total_in+=o,o)},Po=(i,e)=>{let t=i.max_chain_length,r=i.strstart,o,a,s=i.prev_length,n=i.nice_match;const c=i.strstart>i.w_size-fe?i.strstart-(i.w_size-fe):0,l=i.window,d=i.w_mask,v=i.prev,u=i.strstart+ke;let f=l[r+s-1],_=l[r+s];i.prev_length>=i.good_match&&(t>>=2),n>i.lookahead&&(n=i.lookahead);do if(o=e,!(l[o+s]!==_||l[o+s-1]!==f||l[o]!==l[r]||l[++o]!==l[r+1])){r+=2,o++;do;while(l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&r<u);if(a=ke-(u-r),r=u-ke,a>s){if(i.match_start=e,s=a,a>=n)break;f=l[r+s-1],_=l[r+s]}}while((e=v[e&d])>c&&--t!==0);return s<=i.lookahead?s:i.lookahead},Ye=i=>{const e=i.w_size;let t,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-fe)&&(i.window.set(i.window.subarray(e,e+e-r),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,i.insert>i.strstart&&(i.insert=i.strstart),Ln(i),r+=e),i.strm.avail_in===0)break;if(t=Ci(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=t,i.lookahead+i.insert>=$)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=Ce(i,i.ins_h,i.window[o+1]);i.insert&&(i.ins_h=Ce(i,i.ins_h,i.window[o+$-1]),i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<$)););}while(i.lookahead<fe&&i.strm.avail_in!==0)},Fo=(i,e)=>{let t=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,r,o,a,s=0,n=i.strm.avail_in;do{if(r=65535,a=i.bi_valid+42>>3,i.strm.avail_out<a||(a=i.strm.avail_out-a,o=i.strstart-i.block_start,r>o+i.strm.avail_in&&(r=o+i.strm.avail_in),r>a&&(r=a),r<t&&(r===0&&e!==re||e===Ie||r!==o+i.strm.avail_in)))break;s=e===re&&r===o+i.strm.avail_in?1:0,Si(i,0,0,s),i.pending_buf[i.pending-4]=r,i.pending_buf[i.pending-3]=r>>8,i.pending_buf[i.pending-2]=~r,i.pending_buf[i.pending-1]=~r>>8,X(i.strm),o&&(o>r&&(o=r),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+o),i.strm.next_out),i.strm.next_out+=o,i.strm.avail_out-=o,i.strm.total_out+=o,i.block_start+=o,r-=o),r&&(Ci(i.strm,i.strm.output,i.strm.next_out,r),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r)}while(s===0);return n-=i.strm.avail_in,n&&(n>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=n&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-n,i.strm.next_in),i.strstart),i.strstart+=n,i.insert+=n>i.w_size-i.insert?i.w_size-i.insert:n),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),s?Qe:e!==Ie&&e!==re&&i.strm.avail_in===0&&i.strstart===i.block_start?Je:(a=i.window_size-i.strstart,i.strm.avail_in>a&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,a+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),a>i.strm.avail_in&&(a=i.strm.avail_in),a&&(Ci(i.strm,i.window,i.strstart,a),i.strstart+=a,i.insert+=a>i.w_size-i.insert?i.w_size-i.insert:a),i.high_water<i.strstart&&(i.high_water=i.strstart),a=i.bi_valid+42>>3,a=i.pending_buf_size-a>65535?65535:i.pending_buf_size-a,t=a>i.w_size?i.w_size:a,o=i.strstart-i.block_start,(o>=t||(o||e===re)&&e!==Ie&&i.strm.avail_in===0&&o<=a)&&(r=o>a?a:o,s=e===re&&i.strm.avail_in===0&&r===o?1:0,Si(i,i.block_start,r,s),i.block_start+=r,X(i.strm)),s?Be:K)},si=(i,e)=>{let t,r;for(;;){if(i.lookahead<fe){if(Ye(i),i.lookahead<fe&&e===Ie)return K;if(i.lookahead===0)break}if(t=0,i.lookahead>=$&&(i.ins_h=Ce(i,i.ins_h,i.window[i.strstart+$-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-fe&&(i.match_length=Po(i,t)),i.match_length>=$)if(r=Re(i,i.strstart-i.match_start,i.match_length-$),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=$){i.match_length--;do i.strstart++,i.ins_h=Ce(i,i.ins_h,i.window[i.strstart+$-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Ce(i,i.ins_h,i.window[i.strstart+1]);else r=Re(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(r&&(J(i,!1),i.strm.avail_out===0))return K}return i.insert=i.strstart<$-1?i.strstart:$-1,e===re?(J(i,!0),i.strm.avail_out===0?Be:Qe):i.sym_next&&(J(i,!1),i.strm.avail_out===0)?K:Je},Ve=(i,e)=>{let t,r,o;for(;;){if(i.lookahead<fe){if(Ye(i),i.lookahead<fe&&e===Ie)return K;if(i.lookahead===0)break}if(t=0,i.lookahead>=$&&(i.ins_h=Ce(i,i.ins_h,i.window[i.strstart+$-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=$-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-fe&&(i.match_length=Po(i,t),i.match_length<=5&&(i.strategy===mn||i.match_length===$&&i.strstart-i.match_start>4096)&&(i.match_length=$-1)),i.prev_length>=$&&i.match_length<=i.prev_length){o=i.strstart+i.lookahead-$,r=Re(i,i.strstart-1-i.prev_match,i.prev_length-$),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=o&&(i.ins_h=Ce(i,i.ins_h,i.window[i.strstart+$-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=$-1,i.strstart++,r&&(J(i,!1),i.strm.avail_out===0))return K}else if(i.match_available){if(r=Re(i,0,i.window[i.strstart-1]),r&&J(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return K}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(r=Re(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<$-1?i.strstart:$-1,e===re?(J(i,!0),i.strm.avail_out===0?Be:Qe):i.sym_next&&(J(i,!1),i.strm.avail_out===0)?K:Je},Dn=(i,e)=>{let t,r,o,a;const s=i.window;for(;;){if(i.lookahead<=ke){if(Ye(i),i.lookahead<=ke&&e===Ie)return K;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=$&&i.strstart>0&&(o=i.strstart-1,r=s[o],r===s[++o]&&r===s[++o]&&r===s[++o])){a=i.strstart+ke;do;while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<a);i.match_length=ke-(a-o),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=$?(t=Re(i,1,i.match_length-$),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=Re(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(J(i,!1),i.strm.avail_out===0))return K}return i.insert=0,e===re?(J(i,!0),i.strm.avail_out===0?Be:Qe):i.sym_next&&(J(i,!1),i.strm.avail_out===0)?K:Je},On=(i,e)=>{let t;for(;;){if(i.lookahead===0&&(Ye(i),i.lookahead===0)){if(e===Ie)return K;break}if(i.match_length=0,t=Re(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(J(i,!1),i.strm.avail_out===0))return K}return i.insert=0,e===re?(J(i,!0),i.strm.avail_out===0?Be:Qe):i.sym_next&&(J(i,!1),i.strm.avail_out===0)?K:Je};function de(i,e,t,r,o){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=o}const st=[new de(0,0,0,0,Fo),new de(4,4,8,4,si),new de(4,5,16,8,si),new de(4,6,32,32,si),new de(4,4,16,16,Ve),new de(8,16,32,32,Ve),new de(8,16,128,128,Ve),new de(8,32,128,256,Ve),new de(32,128,258,1024,Ve),new de(32,258,258,4096,Ve)],Pn=i=>{i.window_size=2*i.w_size,Se(i.head),i.max_lazy_match=st[i.level].max_lazy,i.good_match=st[i.level].good_length,i.nice_match=st[i.level].nice_length,i.max_chain_length=st[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=$-1,i.match_available=0,i.ins_h=0};function Fn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Kt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Tn*2),this.dyn_dtree=new Uint16Array((2*kn+1)*2),this.bl_tree=new Uint16Array((2*An+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rn+1),this.heap=new Uint16Array(2*ki+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ki+1),Se(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.status!==Ke&&e.status!==Ni&&e.status!==Ai&&e.status!==Ti&&e.status!==Ri&&e.status!==Ii&&e.status!==Fe&&e.status!==at?1:0},Mo=i=>{if(Et(i))return Me(i,he);i.total_in=i.total_out=0,i.data_type=bn;const e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Ni:e.wrap?Ke:Fe,i.adler=e.wrap===2?0:1,e.last_flush=-2,ln(e),Z},zo=i=>{const e=Mo(i);return e===Z&&Pn(i.state),e},Mn=(i,e)=>Et(i)||i.state.wrap!==2?he:(i.state.gzhead=e,Z),Bo=(i,e,t,r,o,a)=>{if(!i)return he;let s=1;if(e===pn&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>yn||t!==Kt||r<8||r>15||e<0||e>9||a<0||a>gn||r===8&&s!==1)return Me(i,he);r===8&&(r=9);const n=new Fn;return i.state=n,n.strm=i,n.status=Ke,n.wrap=s,n.gzhead=null,n.w_bits=r,n.w_size=1<<n.w_bits,n.w_mask=n.w_size-1,n.hash_bits=o+7,n.hash_size=1<<n.hash_bits,n.hash_mask=n.hash_size-1,n.hash_shift=~~((n.hash_bits+$-1)/$),n.window=new Uint8Array(n.w_size*2),n.head=new Uint16Array(n.hash_size),n.prev=new Uint16Array(n.w_size),n.lit_bufsize=1<<o+6,n.pending_buf_size=n.lit_bufsize*4,n.pending_buf=new Uint8Array(n.pending_buf_size),n.sym_buf=n.lit_bufsize,n.sym_end=(n.lit_bufsize-1)*3,n.level=e,n.strategy=a,n.method=t,zo(i)},zn=(i,e)=>Bo(i,e,Kt,xn,wn,_n),Bn=(i,e)=>{if(Et(i)||e>hr||e<0)return i?Me(i,he):he;const t=i.state;if(!i.output||i.avail_in!==0&&!i.input||t.status===at&&e!==re)return Me(i,i.avail_out===0?ai:he);const r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(X(i),i.avail_out===0)return t.last_flush=-1,Z}else if(i.avail_in===0&&ur(e)<=ur(r)&&e!==re)return Me(i,ai);if(t.status===at&&i.avail_in!==0)return Me(i,ai);if(t.status===Ke&&t.wrap===0&&(t.status=Fe),t.status===Ke){let o=Kt+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=$t||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,o|=a<<6,t.strstart!==0&&(o|=In),o+=31-o%31,tt(t,o),t.strstart!==0&&(tt(t,i.adler>>>16),tt(t,i.adler&65535)),i.adler=1,t.status=Fe,X(i),t.pending!==0)return t.last_flush=-1,Z}if(t.status===Ni){if(i.adler=0,D(t,31),D(t,139),D(t,8),t.gzhead)D(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),D(t,t.gzhead.time&255),D(t,t.gzhead.time>>8&255),D(t,t.gzhead.time>>16&255),D(t,t.gzhead.time>>24&255),D(t,t.level===9?2:t.strategy>=$t||t.level<2?4:0),D(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(D(t,t.gzhead.extra.length&255),D(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(i.adler=V(i.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Ai;else if(D(t,0),D(t,0),D(t,0),D(t,0),D(t,0),D(t,t.level===9?2:t.strategy>=$t||t.level<2?4:0),D(t,Cn),t.status=Fe,X(i),t.pending!==0)return t.last_flush=-1,Z}if(t.status===Ai){if(t.gzhead.extra){let o=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let n=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+n),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>o&&(i.adler=V(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex+=n,X(i),t.pending!==0)return t.last_flush=-1,Z;o=0,a-=n}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>o&&(i.adler=V(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=Ti}if(t.status===Ti){if(t.gzhead.name){let o=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(i.adler=V(i.adler,t.pending_buf,t.pending-o,o)),X(i),t.pending!==0)return t.last_flush=-1,Z;o=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,D(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>o&&(i.adler=V(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=Ri}if(t.status===Ri){if(t.gzhead.comment){let o=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(i.adler=V(i.adler,t.pending_buf,t.pending-o,o)),X(i),t.pending!==0)return t.last_flush=-1,Z;o=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,D(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>o&&(i.adler=V(i.adler,t.pending_buf,t.pending-o,o))}t.status=Ii}if(t.status===Ii){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(X(i),t.pending!==0))return t.last_flush=-1,Z;D(t,i.adler&255),D(t,i.adler>>8&255),i.adler=0}if(t.status=Fe,X(i),t.pending!==0)return t.last_flush=-1,Z}if(i.avail_in!==0||t.lookahead!==0||e!==Ie&&t.status!==at){let o=t.level===0?Fo(t,e):t.strategy===$t?On(t,e):t.strategy===vn?Dn(t,e):st[t.level].func(t,e);if((o===Be||o===Qe)&&(t.status=at),o===K||o===Be)return i.avail_out===0&&(t.last_flush=-1),Z;if(o===Je&&(e===hn?cn(t):e!==hr&&(Si(t,0,0,!1),e===fn&&(Se(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),X(i),i.avail_out===0))return t.last_flush=-1,Z}return e!==re?Z:t.wrap<=0?fr:(t.wrap===2?(D(t,i.adler&255),D(t,i.adler>>8&255),D(t,i.adler>>16&255),D(t,i.adler>>24&255),D(t,i.total_in&255),D(t,i.total_in>>8&255),D(t,i.total_in>>16&255),D(t,i.total_in>>24&255)):(tt(t,i.adler>>>16),tt(t,i.adler&65535)),X(i),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Z:fr)},Un=i=>{if(Et(i))return he;const e=i.state.status;return i.state=null,e===Fe?Me(i,un):Z},Nn=(i,e)=>{let t=e.length;if(Et(i))return he;const r=i.state,o=r.wrap;if(o===2||o===1&&r.status!==Ke||r.lookahead)return he;if(o===1&&(i.adler=gt(i.adler,e,t,0)),r.wrap=0,t>=r.w_size){o===0&&(Se(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}const a=i.avail_in,s=i.next_in,n=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,Ye(r);r.lookahead>=$;){let c=r.strstart,l=r.lookahead-($-1);do r.ins_h=Ce(r,r.ins_h,r.window[c+$-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=$-1,Ye(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=$-1,r.match_available=0,i.next_in=s,i.input=n,i.avail_in=a,r.wrap=o,Z};var Hn=zn,Vn=Bo,Zn=zo,qn=Mo,Wn=Mn,Gn=Bn,Kn=Un,Yn=Nn,jn="pako deflate (from Nodeca project)",dt={deflateInit:Hn,deflateInit2:Vn,deflateReset:Zn,deflateResetKeep:qn,deflateSetHeader:Wn,deflate:Gn,deflateEnd:Kn,deflateSetDictionary:Yn,deflateInfo:jn};const Xn=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Jn=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)Xn(t,r)&&(i[r]=t[r])}}return i},Qn=i=>{let e=0;for(let r=0,o=i.length;r<o;r++)e+=i[r].length;const t=new Uint8Array(e);for(let r=0,o=0,a=i.length;r<a;r++){let s=i[r];t.set(s,o),o+=s.length}return t},Yt={assign:Jn,flattenChunks:Qn};let Uo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Uo=!1}const _t=new Uint8Array(256);for(let i=0;i<256;i++)_t[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;_t[254]=_t[254]=1;var el=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,r,o,a,s=i.length,n=0;for(o=0;o<s;o++)t=i.charCodeAt(o),(t&64512)===55296&&o+1<s&&(r=i.charCodeAt(o+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),o++)),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),a=0,o=0;a<n;o++)t=i.charCodeAt(o),(t&64512)===55296&&o+1<s&&(r=i.charCodeAt(o+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),o++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const tl=(i,e)=>{if(e<65534&&i.subarray&&Uo)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(i[r]);return t};var il=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let r,o;const a=new Array(t*2);for(o=0,r=0;r<t;){let s=i[r++];if(s<128){a[o++]=s;continue}let n=_t[s];if(n>4){a[o++]=65533,r+=n-1;continue}for(s&=n===2?31:n===3?15:7;n>1&&r<t;)s=s<<6|i[r++]&63,n--;if(n>1){a[o++]=65533;continue}s<65536?a[o++]=s:(s-=65536,a[o++]=55296|s>>10&1023,a[o++]=56320|s&1023)}return tl(a,o)},rl=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+_t[i[t]]>e?t:e},bt={string2buf:el,buf2string:il,utf8border:rl};function ol(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var No=ol;const Ho=Object.prototype.toString,{Z_NO_FLUSH:al,Z_SYNC_FLUSH:sl,Z_FULL_FLUSH:nl,Z_FINISH:ll,Z_OK:Nt,Z_STREAM_END:dl,Z_DEFAULT_COMPRESSION:cl,Z_DEFAULT_STRATEGY:hl,Z_DEFLATED:fl}=Xe;function St(i){this.options=Yt.assign({level:cl,method:fl,chunkSize:16384,windowBits:15,memLevel:8,strategy:hl},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new No,this.strm.avail_out=0;let t=dt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Nt)throw new Error(ze[t]);if(e.header&&dt.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=bt.string2buf(e.dictionary):Ho.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=dt.deflateSetDictionary(this.strm,r),t!==Nt)throw new Error(ze[t]);this._dict_set=!0}}St.prototype.push=function(i,e){const t=this.strm,r=this.options.chunkSize;let o,a;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?ll:al,typeof i=="string"?t.input=bt.string2buf(i):Ho.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===sl||a===nl)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(o=dt.deflate(t,a),o===dl)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),o=dt.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Nt;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};St.prototype.onData=function(i){this.chunks.push(i)};St.prototype.onEnd=function(i){i===Nt&&(this.result=Yt.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Hi(i,e){const t=new St(e);if(t.push(i,!0),t.err)throw t.msg||ze[t.err];return t.result}function ul(i,e){return e=e||{},e.raw=!0,Hi(i,e)}function pl(i,e){return e=e||{},e.gzip=!0,Hi(i,e)}var ml=St,vl=Hi,gl=ul,_l=pl,bl=Xe,yl={Deflate:ml,deflate:vl,deflateRaw:gl,gzip:_l,constants:bl};const Dt=16209,xl=16191;var wl=function(e,t){let r,o,a,s,n,c,l,d,v,u,f,_,y,x,b,E,S,m,k,O,w,I,C,T;const R=e.state;r=e.next_in,C=e.input,o=r+(e.avail_in-5),a=e.next_out,T=e.output,s=a-(t-e.avail_out),n=a+(e.avail_out-257),c=R.dmax,l=R.wsize,d=R.whave,v=R.wnext,u=R.window,f=R.hold,_=R.bits,y=R.lencode,x=R.distcode,b=(1<<R.lenbits)-1,E=(1<<R.distbits)-1;e:do{_<15&&(f+=C[r++]<<_,_+=8,f+=C[r++]<<_,_+=8),S=y[f&b];t:for(;;){if(m=S>>>24,f>>>=m,_-=m,m=S>>>16&255,m===0)T[a++]=S&65535;else if(m&16){k=S&65535,m&=15,m&&(_<m&&(f+=C[r++]<<_,_+=8),k+=f&(1<<m)-1,f>>>=m,_-=m),_<15&&(f+=C[r++]<<_,_+=8,f+=C[r++]<<_,_+=8),S=x[f&E];i:for(;;){if(m=S>>>24,f>>>=m,_-=m,m=S>>>16&255,m&16){if(O=S&65535,m&=15,_<m&&(f+=C[r++]<<_,_+=8,_<m&&(f+=C[r++]<<_,_+=8)),O+=f&(1<<m)-1,O>c){e.msg="invalid distance too far back",R.mode=Dt;break e}if(f>>>=m,_-=m,m=a-s,O>m){if(m=O-m,m>d&&R.sane){e.msg="invalid distance too far back",R.mode=Dt;break e}if(w=0,I=u,v===0){if(w+=l-m,m<k){k-=m;do T[a++]=u[w++];while(--m);w=a-O,I=T}}else if(v<m){if(w+=l+v-m,m-=v,m<k){k-=m;do T[a++]=u[w++];while(--m);if(w=0,v<k){m=v,k-=m;do T[a++]=u[w++];while(--m);w=a-O,I=T}}}else if(w+=v-m,m<k){k-=m;do T[a++]=u[w++];while(--m);w=a-O,I=T}for(;k>2;)T[a++]=I[w++],T[a++]=I[w++],T[a++]=I[w++],k-=3;k&&(T[a++]=I[w++],k>1&&(T[a++]=I[w++]))}else{w=a-O;do T[a++]=T[w++],T[a++]=T[w++],T[a++]=T[w++],k-=3;while(k>2);k&&(T[a++]=T[w++],k>1&&(T[a++]=T[w++]))}}else if(m&64){e.msg="invalid distance code",R.mode=Dt;break e}else{S=x[(S&65535)+(f&(1<<m)-1)];continue i}break}}else if(m&64)if(m&32){R.mode=xl;break e}else{e.msg="invalid literal/length code",R.mode=Dt;break e}else{S=y[(S&65535)+(f&(1<<m)-1)];continue t}break}}while(r<o&&a<n);k=_>>3,r-=k,_-=k<<3,f&=(1<<_)-1,e.next_in=r,e.next_out=a,e.avail_in=r<o?5+(o-r):5-(r-o),e.avail_out=a<n?257+(n-a):257-(a-n),R.hold=f,R.bits=_};const Ze=15,pr=852,mr=592,vr=0,ni=1,gr=2,El=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Sl=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),kl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Al=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Tl=(i,e,t,r,o,a,s,n)=>{const c=n.bits;let l=0,d=0,v=0,u=0,f=0,_=0,y=0,x=0,b=0,E=0,S,m,k,O,w,I=null,C;const T=new Uint16Array(Ze+1),R=new Uint16Array(Ze+1);let ee=null,we,j,De;for(l=0;l<=Ze;l++)T[l]=0;for(d=0;d<r;d++)T[e[t+d]]++;for(f=c,u=Ze;u>=1&&T[u]===0;u--);if(f>u&&(f=u),u===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,n.bits=1,0;for(v=1;v<u&&T[v]===0;v++);for(f<v&&(f=v),x=1,l=1;l<=Ze;l++)if(x<<=1,x-=T[l],x<0)return-1;if(x>0&&(i===vr||u!==1))return-1;for(R[1]=0,l=1;l<Ze;l++)R[l+1]=R[l]+T[l];for(d=0;d<r;d++)e[t+d]!==0&&(s[R[e[t+d]]++]=d);if(i===vr?(I=ee=s,C=20):i===ni?(I=El,ee=Sl,C=257):(I=kl,ee=Al,C=0),E=0,d=0,l=v,w=a,_=f,y=0,k=-1,b=1<<f,O=b-1,i===ni&&b>pr||i===gr&&b>mr)return 1;for(;;){we=l-y,s[d]+1<C?(j=0,De=s[d]):s[d]>=C?(j=ee[s[d]-C],De=I[s[d]-C]):(j=96,De=0),S=1<<l-y,m=1<<_,v=m;do m-=S,o[w+(E>>y)+m]=we<<24|j<<16|De|0;while(m!==0);for(S=1<<l-1;E&S;)S>>=1;if(S!==0?(E&=S-1,E+=S):E=0,d++,--T[l]===0){if(l===u)break;l=e[t+s[d]]}if(l>f&&(E&O)!==k){for(y===0&&(y=f),w+=v,_=l-y,x=1<<_;_+y<u&&(x-=T[_+y],!(x<=0));)_++,x<<=1;if(b+=1<<_,i===ni&&b>pr||i===gr&&b>mr)return 1;k=E&O,o[k]=f<<24|_<<16|w-a|0}}return E!==0&&(o[w+E]=l-y<<24|64<<16|0),n.bits=f,0};var ct=Tl;const Rl=0,Vo=1,Zo=2,{Z_FINISH:_r,Z_BLOCK:Il,Z_TREES:Ot,Z_OK:Ue,Z_STREAM_END:Cl,Z_NEED_DICT:Ll,Z_STREAM_ERROR:oe,Z_DATA_ERROR:qo,Z_MEM_ERROR:Wo,Z_BUF_ERROR:$l,Z_DEFLATED:br}=Xe,jt=16180,yr=16181,xr=16182,wr=16183,Er=16184,Sr=16185,kr=16186,Ar=16187,Tr=16188,Rr=16189,Ht=16190,ve=16191,li=16192,Ir=16193,di=16194,Cr=16195,Lr=16196,$r=16197,Dr=16198,Pt=16199,Ft=16200,Or=16201,Pr=16202,Fr=16203,Mr=16204,zr=16205,ci=16206,Br=16207,Ur=16208,M=16209,Go=16210,Ko=16211,Dl=852,Ol=592,Pl=15,Fl=Pl,Nr=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function Ml(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const He=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<jt||e.mode>Ko?1:0},Yo=i=>{if(He(i))return oe;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=jt,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Dl),e.distcode=e.distdyn=new Int32Array(Ol),e.sane=1,e.back=-1,Ue},jo=i=>{if(He(i))return oe;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,Yo(i)},Xo=(i,e)=>{let t;if(He(i))return oe;const r=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?oe:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,jo(i))},Jo=(i,e)=>{if(!i)return oe;const t=new Ml;i.state=t,t.strm=i,t.window=null,t.mode=jt;const r=Xo(i,e);return r!==Ue&&(i.state=null),r},zl=i=>Jo(i,Fl);let Hr=!0,hi,fi;const Bl=i=>{if(Hr){hi=new Int32Array(512),fi=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(ct(Vo,i.lens,0,288,hi,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;ct(Zo,i.lens,0,32,fi,0,i.work,{bits:5}),Hr=!1}i.lencode=hi,i.lenbits=9,i.distcode=fi,i.distbits=5},Qo=(i,e,t,r)=>{let o;const a=i.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>r&&(o=r),a.window.set(e.subarray(t-r,t-r+o),a.wnext),r-=o,r?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},Ul=(i,e)=>{let t,r,o,a,s,n,c,l,d,v,u,f,_,y,x=0,b,E,S,m,k,O,w,I;const C=new Uint8Array(4);let T,R;const ee=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(He(i)||!i.output||!i.input&&i.avail_in!==0)return oe;t=i.state,t.mode===ve&&(t.mode=li),s=i.next_out,o=i.output,c=i.avail_out,a=i.next_in,r=i.input,n=i.avail_in,l=t.hold,d=t.bits,v=n,u=c,I=Ue;e:for(;;)switch(t.mode){case jt:if(t.wrap===0){t.mode=li;break}for(;d<16;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,C[0]=l&255,C[1]=l>>>8&255,t.check=V(t.check,C,2,0),l=0,d=0,t.mode=yr;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){i.msg="incorrect header check",t.mode=M;break}if((l&15)!==br){i.msg="unknown compression method",t.mode=M;break}if(l>>>=4,d-=4,w=(l&15)+8,t.wbits===0&&(t.wbits=w),w>15||w>t.wbits){i.msg="invalid window size",t.mode=M;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=l&512?Rr:ve,l=0,d=0;break;case yr:for(;d<16;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(t.flags=l,(t.flags&255)!==br){i.msg="unknown compression method",t.mode=M;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=M;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,t.check=V(t.check,C,2,0)),l=0,d=0,t.mode=xr;case xr:for(;d<32;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,t.check=V(t.check,C,4,0)),l=0,d=0,t.mode=wr;case wr:for(;d<16;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,t.check=V(t.check,C,2,0)),l=0,d=0,t.mode=Er;case Er:if(t.flags&1024){for(;d<16;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,t.check=V(t.check,C,2,0)),l=0,d=0}else t.head&&(t.head.extra=null);t.mode=Sr;case Sr:if(t.flags&1024&&(f=t.length,f>n&&(f=n),f&&(t.head&&(w=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+f),w)),t.flags&512&&t.wrap&4&&(t.check=V(t.check,r,f,a)),n-=f,a+=f,t.length-=f),t.length))break e;t.length=0,t.mode=kr;case kr:if(t.flags&2048){if(n===0)break e;f=0;do w=r[a+f++],t.head&&w&&t.length<65536&&(t.head.name+=String.fromCharCode(w));while(w&&f<n);if(t.flags&512&&t.wrap&4&&(t.check=V(t.check,r,f,a)),n-=f,a+=f,w)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Ar;case Ar:if(t.flags&4096){if(n===0)break e;f=0;do w=r[a+f++],t.head&&w&&t.length<65536&&(t.head.comment+=String.fromCharCode(w));while(w&&f<n);if(t.flags&512&&t.wrap&4&&(t.check=V(t.check,r,f,a)),n-=f,a+=f,w)break e}else t.head&&(t.head.comment=null);t.mode=Tr;case Tr:if(t.flags&512){for(;d<16;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(t.wrap&4&&l!==(t.check&65535)){i.msg="header crc mismatch",t.mode=M;break}l=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=ve;break;case Rr:for(;d<32;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}i.adler=t.check=Nr(l),l=0,d=0,t.mode=Ht;case Ht:if(t.havedict===0)return i.next_out=s,i.avail_out=c,i.next_in=a,i.avail_in=n,t.hold=l,t.bits=d,Ll;i.adler=t.check=1,t.mode=ve;case ve:if(e===Il||e===Ot)break e;case li:if(t.last){l>>>=d&7,d-=d&7,t.mode=ci;break}for(;d<3;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}switch(t.last=l&1,l>>>=1,d-=1,l&3){case 0:t.mode=Ir;break;case 1:if(Bl(t),t.mode=Pt,e===Ot){l>>>=2,d-=2;break e}break;case 2:t.mode=Lr;break;case 3:i.msg="invalid block type",t.mode=M}l>>>=2,d-=2;break;case Ir:for(l>>>=d&7,d-=d&7;d<32;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if((l&65535)!==(l>>>16^65535)){i.msg="invalid stored block lengths",t.mode=M;break}if(t.length=l&65535,l=0,d=0,t.mode=di,e===Ot)break e;case di:t.mode=Cr;case Cr:if(f=t.length,f){if(f>n&&(f=n),f>c&&(f=c),f===0)break e;o.set(r.subarray(a,a+f),s),n-=f,a+=f,c-=f,s+=f,t.length-=f;break}t.mode=ve;break;case Lr:for(;d<14;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(t.nlen=(l&31)+257,l>>>=5,d-=5,t.ndist=(l&31)+1,l>>>=5,d-=5,t.ncode=(l&15)+4,l>>>=4,d-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=M;break}t.have=0,t.mode=$r;case $r:for(;t.have<t.ncode;){for(;d<3;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}t.lens[ee[t.have++]]=l&7,l>>>=3,d-=3}for(;t.have<19;)t.lens[ee[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},I=ct(Rl,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,I){i.msg="invalid code lengths set",t.mode=M;break}t.have=0,t.mode=Dr;case Dr:for(;t.have<t.nlen+t.ndist;){for(;x=t.lencode[l&(1<<t.lenbits)-1],b=x>>>24,E=x>>>16&255,S=x&65535,!(b<=d);){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(S<16)l>>>=b,d-=b,t.lens[t.have++]=S;else{if(S===16){for(R=b+2;d<R;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(l>>>=b,d-=b,t.have===0){i.msg="invalid bit length repeat",t.mode=M;break}w=t.lens[t.have-1],f=3+(l&3),l>>>=2,d-=2}else if(S===17){for(R=b+3;d<R;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}l>>>=b,d-=b,w=0,f=3+(l&7),l>>>=3,d-=3}else{for(R=b+7;d<R;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}l>>>=b,d-=b,w=0,f=11+(l&127),l>>>=7,d-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=M;break}for(;f--;)t.lens[t.have++]=w}}if(t.mode===M)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=M;break}if(t.lenbits=9,T={bits:t.lenbits},I=ct(Vo,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,I){i.msg="invalid literal/lengths set",t.mode=M;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},I=ct(Zo,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,I){i.msg="invalid distances set",t.mode=M;break}if(t.mode=Pt,e===Ot)break e;case Pt:t.mode=Ft;case Ft:if(n>=6&&c>=258){i.next_out=s,i.avail_out=c,i.next_in=a,i.avail_in=n,t.hold=l,t.bits=d,wl(i,u),s=i.next_out,o=i.output,c=i.avail_out,a=i.next_in,r=i.input,n=i.avail_in,l=t.hold,d=t.bits,t.mode===ve&&(t.back=-1);break}for(t.back=0;x=t.lencode[l&(1<<t.lenbits)-1],b=x>>>24,E=x>>>16&255,S=x&65535,!(b<=d);){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(E&&!(E&240)){for(m=b,k=E,O=S;x=t.lencode[O+((l&(1<<m+k)-1)>>m)],b=x>>>24,E=x>>>16&255,S=x&65535,!(m+b<=d);){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}l>>>=m,d-=m,t.back+=m}if(l>>>=b,d-=b,t.back+=b,t.length=S,E===0){t.mode=zr;break}if(E&32){t.back=-1,t.mode=ve;break}if(E&64){i.msg="invalid literal/length code",t.mode=M;break}t.extra=E&15,t.mode=Or;case Or:if(t.extra){for(R=t.extra;d<R;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Pr;case Pr:for(;x=t.distcode[l&(1<<t.distbits)-1],b=x>>>24,E=x>>>16&255,S=x&65535,!(b<=d);){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(!(E&240)){for(m=b,k=E,O=S;x=t.distcode[O+((l&(1<<m+k)-1)>>m)],b=x>>>24,E=x>>>16&255,S=x&65535,!(m+b<=d);){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}l>>>=m,d-=m,t.back+=m}if(l>>>=b,d-=b,t.back+=b,E&64){i.msg="invalid distance code",t.mode=M;break}t.offset=S,t.extra=E&15,t.mode=Fr;case Fr:if(t.extra){for(R=t.extra;d<R;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=M;break}t.mode=Mr;case Mr:if(c===0)break e;if(f=u-c,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=M;break}f>t.wnext?(f-=t.wnext,_=t.wsize-f):_=t.wnext-f,f>t.length&&(f=t.length),y=t.window}else y=o,_=s-t.offset,f=t.length;f>c&&(f=c),c-=f,t.length-=f;do o[s++]=y[_++];while(--f);t.length===0&&(t.mode=Ft);break;case zr:if(c===0)break e;o[s++]=t.length,c--,t.mode=Ft;break;case ci:if(t.wrap){for(;d<32;){if(n===0)break e;n--,l|=r[a++]<<d,d+=8}if(u-=c,i.total_out+=u,t.total+=u,t.wrap&4&&u&&(i.adler=t.check=t.flags?V(t.check,o,u,s-u):gt(t.check,o,u,s-u)),u=c,t.wrap&4&&(t.flags?l:Nr(l))!==t.check){i.msg="incorrect data check",t.mode=M;break}l=0,d=0}t.mode=Br;case Br:if(t.wrap&&t.flags){for(;d<32;){if(n===0)break e;n--,l+=r[a++]<<d,d+=8}if(t.wrap&4&&l!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=M;break}l=0,d=0}t.mode=Ur;case Ur:I=Cl;break e;case M:I=qo;break e;case Go:return Wo;case Ko:default:return oe}return i.next_out=s,i.avail_out=c,i.next_in=a,i.avail_in=n,t.hold=l,t.bits=d,(t.wsize||u!==i.avail_out&&t.mode<M&&(t.mode<ci||e!==_r))&&Qo(i,i.output,i.next_out,u-i.avail_out),v-=i.avail_in,u-=i.avail_out,i.total_in+=v,i.total_out+=u,t.total+=u,t.wrap&4&&u&&(i.adler=t.check=t.flags?V(t.check,o,u,i.next_out-u):gt(t.check,o,u,i.next_out-u)),i.data_type=t.bits+(t.last?64:0)+(t.mode===ve?128:0)+(t.mode===Pt||t.mode===di?256:0),(v===0&&u===0||e===_r)&&I===Ue&&(I=$l),I},Nl=i=>{if(He(i))return oe;let e=i.state;return e.window&&(e.window=null),i.state=null,Ue},Hl=(i,e)=>{if(He(i))return oe;const t=i.state;return t.wrap&2?(t.head=e,e.done=!1,Ue):oe},Vl=(i,e)=>{const t=e.length;let r,o,a;return He(i)||(r=i.state,r.wrap!==0&&r.mode!==Ht)?oe:r.mode===Ht&&(o=1,o=gt(o,e,t,0),o!==r.check)?qo:(a=Qo(i,e,t,t),a?(r.mode=Go,Wo):(r.havedict=1,Ue))};var Zl=jo,ql=Xo,Wl=Yo,Gl=zl,Kl=Jo,Yl=Ul,jl=Nl,Xl=Hl,Jl=Vl,Ql="pako inflate (from Nodeca project)",_e={inflateReset:Zl,inflateReset2:ql,inflateResetKeep:Wl,inflateInit:Gl,inflateInit2:Kl,inflate:Yl,inflateEnd:jl,inflateGetHeader:Xl,inflateSetDictionary:Jl,inflateInfo:Ql};function ed(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var td=ed;const ea=Object.prototype.toString,{Z_NO_FLUSH:id,Z_FINISH:rd,Z_OK:yt,Z_STREAM_END:ui,Z_NEED_DICT:pi,Z_STREAM_ERROR:od,Z_DATA_ERROR:Vr,Z_MEM_ERROR:ad}=Xe;function kt(i){this.options=Yt.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new No,this.strm.avail_out=0;let t=_e.inflateInit2(this.strm,e.windowBits);if(t!==yt)throw new Error(ze[t]);if(this.header=new td,_e.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=bt.string2buf(e.dictionary):ea.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=_e.inflateSetDictionary(this.strm,e.dictionary),t!==yt)))throw new Error(ze[t])}kt.prototype.push=function(i,e){const t=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let a,s,n;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?rd:id,ea.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=_e.inflate(t,s),a===pi&&o&&(a=_e.inflateSetDictionary(t,o),a===yt?a=_e.inflate(t,s):a===Vr&&(a=pi));t.avail_in>0&&a===ui&&t.state.wrap>0&&i[t.next_in]!==0;)_e.inflateReset(t),a=_e.inflate(t,s);switch(a){case od:case Vr:case pi:case ad:return this.onEnd(a),this.ended=!0,!1}if(n=t.avail_out,t.next_out&&(t.avail_out===0||a===ui))if(this.options.to==="string"){let c=bt.utf8border(t.output,t.next_out),l=t.next_out-c,d=bt.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===yt&&n===0)){if(a===ui)return a=_e.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};kt.prototype.onData=function(i){this.chunks.push(i)};kt.prototype.onEnd=function(i){i===yt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yt.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Vi(i,e){const t=new kt(e);if(t.push(i),t.err)throw t.msg||ze[t.err];return t.result}function sd(i,e){return e=e||{},e.raw=!0,Vi(i,e)}var nd=kt,ld=Vi,dd=sd,cd=Vi,hd=Xe,fd={Inflate:nd,inflate:ld,inflateRaw:dd,ungzip:cd,constants:hd};const{Deflate:Ud,deflate:ud,deflateRaw:Nd,gzip:Hd}=yl,{Inflate:pd,inflate:Vd,inflateRaw:Zd,ungzip:qd}=fd;var md=ud,vd=pd;class ta{constructor(e,t=!1,r=!0){this.device=e,this.tracing=t,this.slipReaderEnabled=!1,this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this.buffer=new Uint8Array(0),this.SLIP_END=192,this.SLIP_ESC=219,this.SLIP_ESC_END=220,this.SLIP_ESC_ESC=221,this._DTR_state=!1,this.slipReaderEnabled=r}getInfo(){const e=this.device.getInfo();return e.usbVendorId&&e.usbProductId?`WebSerial VendorID 0x${e.usbVendorId.toString(16)} ProductID 0x${e.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(e){const o=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${e}`;console.log(o),this.traceLog+=o+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(e){console.error("Failed to copy text:",e)}}hexify(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(e,t=!0){if(t&&e.length>16){let r="",o=e;for(;o.length>0;){const a=o.slice(0,16),s=String.fromCharCode(...a).split("").map(n=>n===" "||n>=" "&&n<="~"&&n!=="  "?n:".").join("");o=o.slice(16),r+=`
    ${this.hexify(a.slice(0,8))} ${this.hexify(a.slice(8))} | ${s}`}return r}else return this.hexify(e)}slipWriter(e){const t=[];t.push(192);for(let r=0;r<e.length;r++)e[r]===219?t.push(219,221):e[r]===192?t.push(219,220):t.push(e[r]);return t.push(192),new Uint8Array(t)}async write(e){const t=this.slipWriter(e);if(this.device.writable){const r=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${t.length} bytes: ${this.hexConvert(t)}`)),await r.write(t),r.releaseLock()}}appendArray(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}async*readLoop(e){if(this.reader)try{for(;;){const t=new Promise((s,n)=>setTimeout(()=>n(new Error("Read timeout exceeded")),e)),r=await Promise.race([this.reader.read(),t]);if(r===null)break;const{value:o,done:a}=r;if(a||!o)break;yield o}}catch(t){console.error("Error reading from serial port:",t)}finally{this.buffer=new Uint8Array(0)}}async newRead(e,t){if(this.buffer.length>=e){const o=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),o}for(;this.buffer.length<e;){const o=this.readLoop(t),{value:a,done:s}=await o.next();if(s||!a)break;this.buffer=this.appendArray(this.buffer,a)}const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async flushInput(){var e;this.reader&&!await this.reader.closed&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=(e=this.device.readable)===null||e===void 0?void 0:e.getReader())}async flushOutput(){var e,t;this.buffer=new Uint8Array(0),await((e=this.device.writable)===null||e===void 0?void 0:e.getWriter().close()),(t=this.device.writable)===null||t===void 0||t.getWriter().releaseLock()}inWaiting(){return this.buffer.length}detectPanicHandler(e){const t=/G?uru Meditation Error: (?:Core \d panic'ed \(([a-zA-Z ]*)\))?/,r=/F?atal exception \(\d+\): (?:([a-zA-Z ]*)?.*epc)?/,o=new TextDecoder("utf-8").decode(e),a=o.match(t)||o.match(r);if(a){const s=a[1]||a[2],n=`Guru Meditation Error detected${s?` (${s})`:""}`;throw new Error(n)}}async*read(e){var t;this.reader||(this.reader=(t=this.device.readable)===null||t===void 0?void 0:t.getReader());let r=null,o=!1,a=!1;for(;;){const s=this.inWaiting(),n=await this.newRead(s>0?s:1,e);if(!n||n.length===0){const l=r===null?a?"Serial data stream stopped: Possible serial noise or corruption.":"No serial data received.":"Packet content transfer stopped";throw this.trace(l),new Error(l)}this.trace(`Read ${n.length} bytes: ${this.hexConvert(n)}`);let c=0;for(;c<n.length;){const l=n[c++];if(r===null)if(l===this.SLIP_END)r=new Uint8Array(0);else{this.trace(`Read invalid data: ${this.hexConvert(n)}`);const d=await this.newRead(this.inWaiting(),e);throw this.trace(`Remaining data in serial buffer: ${this.hexConvert(d)}`),this.detectPanicHandler(new Uint8Array([...n,...d||[]])),new Error(`Invalid head of packet (0x${l.toString(16)}): Possible serial noise or corruption.`)}else if(o)if(o=!1,l===this.SLIP_ESC_END)r=this.appendArray(r,new Uint8Array([this.SLIP_END]));else if(l===this.SLIP_ESC_ESC)r=this.appendArray(r,new Uint8Array([this.SLIP_ESC]));else{this.trace(`Read invalid data: ${this.hexConvert(n)}`);const d=await this.newRead(this.inWaiting(),e);throw this.trace(`Remaining data in serial buffer: ${this.hexConvert(d)}`),this.detectPanicHandler(new Uint8Array([...n,...d||[]])),new Error(`Invalid SLIP escape (0xdb, 0x${l.toString(16)})`)}else l===this.SLIP_ESC?o=!0:l===this.SLIP_END?(this.trace(`Received full packet: ${this.hexConvert(r)}`),this.buffer=this.appendArray(this.buffer,n.slice(c)),yield r,r=null,a=!0):r=this.appendArray(r,new Uint8Array([l]))}}}async*rawRead(){if(this.reader)try{for(;;){const{value:e,done:t}=await this.reader.read();if(t||!e)break;this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${e.length} bytes: ${this.hexConvert(e)}`)),yield e}}catch(e){console.error("Error reading from serial port:",e)}finally{this.buffer=new Uint8Array(0)}}async setRTS(e){await this.device.setSignals({requestToSend:e}),await this.setDTR(this._DTR_state)}async setDTR(e){this._DTR_state=e,await this.device.setSignals({dataTerminalReady:e})}async connect(e=115200,t={}){var r;await this.device.open({baudRate:e,dataBits:t==null?void 0:t.dataBits,stopBits:t==null?void 0:t.stopBits,bufferSize:t==null?void 0:t.bufferSize,parity:t==null?void 0:t.parity,flowControl:t==null?void 0:t.flowControl}),this.baudrate=e,this.reader=(r=this.device.readable)===null||r===void 0?void 0:r.getReader()}async sleep(e){return new Promise(t=>setTimeout(t,e))}async waitForUnlock(e){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(e)}async disconnect(){var e,t;!((e=this.device.readable)===null||e===void 0)&&e.locked&&await((t=this.reader)===null||t===void 0?void 0:t.cancel()),await this.waitForUnlock(400),await this.device.close(),this.reader=void 0}}function be(i){return new Promise(e=>setTimeout(e,i))}class gd{constructor(e,t){this.resetDelay=t,this.transport=e}async reset(){await this.transport.setDTR(!1),await this.transport.setRTS(!0),await be(100),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await be(this.resetDelay),await this.transport.setDTR(!1)}}class _d{constructor(e){this.transport=e}async reset(){await this.transport.setRTS(!1),await this.transport.setDTR(!1),await be(100),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await be(100),await this.transport.setRTS(!0),await this.transport.setDTR(!1),await this.transport.setRTS(!0),await be(100),await this.transport.setRTS(!1),await this.transport.setDTR(!1)}}class bd{constructor(e,t=!1){this.transport=e,this.usingUsbOtg=t,this.transport=e}async reset(){this.usingUsbOtg?(await be(200),await this.transport.setRTS(!1),await be(200)):(await be(100),await this.transport.setRTS(!1))}}function yd(i){const e=["D","R","W"],t=i.split("|");for(const r of t){const o=r[0],a=r.slice(1);if(!e.includes(o))return!1;if(o==="D"||o==="R"){if(a!=="0"&&a!=="1")return!1}else if(o==="W"){const s=parseInt(a);if(isNaN(s)||s<=0)return!1}}return!0}class xd{constructor(e,t){this.transport=e,this.sequenceString=t,this.transport=e}async reset(){const e={D:async t=>await this.transport.setDTR(t),R:async t=>await this.transport.setRTS(t),W:async t=>await be(t)};try{if(!yd(this.sequenceString))return;const r=this.sequenceString.split("|");for(const o of r){const a=o[0],s=o.slice(1);a==="W"?await e.W(Number(s)):(a==="D"||a==="R")&&await e[a](s==="1")}}catch{throw new Error("Invalid custom reset sequence")}}}function wd(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ed=function(e){return atob(e)};const Sd=wd(Ed);async function Zr(i){let e;switch(i){case"ESP32":e=await z(()=>import("./stub_flasher_32-DIlGCCSz.js"),[]);break;case"ESP32-C2":e=await z(()=>import("./stub_flasher_32c2-B8dsLG7-.js"),[]);break;case"ESP32-C3":e=await z(()=>import("./stub_flasher_32c3-LInKOK0z.js"),[]);break;case"ESP32-C5":e=await z(()=>import("./stub_flasher_32c5-DYguqfJK.js"),[]);break;case"ESP32-C6":e=await z(()=>import("./stub_flasher_32c6-BMffPMCp.js"),[]);break;case"ESP32-C61":e=await z(()=>import("./stub_flasher_32c61-Dm89Jp02.js"),[]);break;case"ESP32-H2":e=await z(()=>import("./stub_flasher_32h2-DKTWdQO2.js"),[]);break;case"ESP32-P4":e=await z(()=>import("./stub_flasher_32p4-77EG6B-R.js"),[]);break;case"ESP32-S2":e=await z(()=>import("./stub_flasher_32s2-DLJQYVPj.js"),[]);break;case"ESP32-S3":e=await z(()=>import("./stub_flasher_32s3-B0-qH3ON.js"),[]);break;case"ESP8266":e=await z(()=>import("./stub_flasher_8266-Bxnk_IeY.js"),[]);break}if(e)return{bss_start:e.bss_start,data:e.data,data_start:e.data_start,entry:e.entry,text:e.text,text_start:e.text_start,decodedData:qr(e.data),decodedText:qr(e.text)}}function qr(i){const t=Sd(i).split("").map(function(r){return r.charCodeAt(0)});return new Uint8Array(t)}function kd(i,e,t=255){const r=i.length%e;if(r!==0){const o=new Uint8Array(e-r).fill(t),a=new Uint8Array(i.length+o.length);return a.set(i),a.set(o,i.length),a}return i}async function Ad(i){switch(i){case 15736195:{const{ESP32ROM:e}=await z(async()=>{const{ESP32ROM:t}=await import("./esp32-BhDgbdPM.js");return{ESP32ROM:t}},__vite__mapDeps([0,1]));return new e}case 203546735:case 1867591791:case 2084675695:{const{ESP32C2ROM:e}=await z(async()=>{const{ESP32C2ROM:t}=await import("./esp32c2-BgJnfC_0.js");return{ESP32C2ROM:t}},__vite__mapDeps([2,3,1]));return new e}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:e}=await z(async()=>{const{ESP32C3ROM:t}=await import("./esp32c3-DQVnZhm-.js");return{ESP32C3ROM:t}},__vite__mapDeps([3,1]));return new e}case 752910447:{const{ESP32C6ROM:e}=await z(async()=>{const{ESP32C6ROM:t}=await import("./esp32c6-DCdrSVB_.js");return{ESP32C6ROM:t}},__vite__mapDeps([4,1]));return new e}case 606167151:case 871374959:case 1333878895:{const{ESP32C61ROM:e}=await z(async()=>{const{ESP32C61ROM:t}=await import("./esp32c61-fw4oG-k4.js");return{ESP32C61ROM:t}},__vite__mapDeps([5,4,1]));return new e}case 285294703:case 1675706479:case 1607549039:{const{ESP32C5ROM:e}=await z(async()=>{const{ESP32C5ROM:t}=await import("./esp32c5-DwoL7O9B.js");return{ESP32C5ROM:t}},__vite__mapDeps([6,4,1]));return new e}case 3619110528:case 2548236392:{const{ESP32H2ROM:e}=await z(async()=>{const{ESP32H2ROM:t}=await import("./esp32h2-CYJUgF5R.js");return{ESP32H2ROM:t}},__vite__mapDeps([7,1]));return new e}case 9:{const{ESP32S3ROM:e}=await z(async()=>{const{ESP32S3ROM:t}=await import("./esp32s3-93JqgNdb.js");return{ESP32S3ROM:t}},__vite__mapDeps([8,1]));return new e}case 1990:{const{ESP32S2ROM:e}=await z(async()=>{const{ESP32S2ROM:t}=await import("./esp32s2-BzCGs-7A.js");return{ESP32S2ROM:t}},__vite__mapDeps([9,1]));return new e}case 4293968129:{const{ESP8266ROM:e}=await z(async()=>{const{ESP8266ROM:t}=await import("./esp8266-CgWi2x7b.js");return{ESP8266ROM:t}},__vite__mapDeps([10,1]));return new e}case 0:case 182303440:case 117676761:{const{ESP32P4ROM:e}=await z(async()=>{const{ESP32P4ROM:t}=await import("./esp32p4-BQNWBb2f.js");return{ESP32P4ROM:t}},__vite__mapDeps([11,0,1]));return new e}default:return null}}class Td{constructor(e){var t,r,o,a,s,n,c,l;this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.DEFAULT_TIMEOUT=3e3,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=this.CHIP_ERASE_TIMEOUT*2,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.flashSizeBytes=function(d){let v=-1;return d.indexOf("KB")!==-1?v=parseInt(d.slice(0,d.indexOf("KB")))*1024:d.indexOf("MB")!==-1&&(v=parseInt(d.slice(0,d.indexOf("MB")))*1024*1024),v},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=e.transport,this.baudrate=e.baudrate,this.resetConstructors={classicReset:(d,v)=>new gd(d,v),customReset:(d,v)=>new xd(d,v),hardReset:(d,v)=>new bd(d,v),usbJTAGSerialReset:d=>new _d(d)},e.serialOptions&&(this.serialOptions=e.serialOptions),e.romBaudrate&&(this.romBaudrate=e.romBaudrate),e.terminal&&(this.terminal=e.terminal,this.terminal.clean()),typeof e.debugLogging<"u"&&(this.debugLogging=e.debugLogging),e.port&&(this.transport=new ta(e.port)),typeof e.enableTracing<"u"&&(this.transport.tracing=e.enableTracing),!((t=e.resetConstructors)===null||t===void 0)&&t.classicReset&&(this.resetConstructors.classicReset=(r=e.resetConstructors)===null||r===void 0?void 0:r.classicReset),!((o=e.resetConstructors)===null||o===void 0)&&o.customReset&&(this.resetConstructors.customReset=(a=e.resetConstructors)===null||a===void 0?void 0:a.customReset),!((s=e.resetConstructors)===null||s===void 0)&&s.hardReset&&(this.resetConstructors.hardReset=(n=e.resetConstructors)===null||n===void 0?void 0:n.hardReset),!((c=e.resetConstructors)===null||c===void 0)&&c.usbJTAGSerialReset&&(this.resetConstructors.usbJTAGSerialReset=(l=e.resetConstructors)===null||l===void 0?void 0:l.usbJTAGSerialReset),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(e){return new Promise(t=>setTimeout(t,e))}write(e,t=!0){this.terminal?t?this.terminal.writeLine(e):this.terminal.write(e):console.log(e)}error(e,t=!0){this.write(`Error: ${e}`,t)}info(e,t=!0){this.write(e,t)}debug(e,t=!0){this.debugLogging&&this.write(`Debug: ${e}`,t)}_shortToBytearray(e){return new Uint8Array([e&255,e>>8&255])}_intToByteArray(e){return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}_byteArrayToShort(e,t){return e|t>>8}_byteArrayToInt(e,t,r,o){return e|t<<8|r<<16|o<<24}_appendBuffer(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}_appendArray(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}ui8ToBstr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}bstrToUi8(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}async flushInput(){try{await this.transport.flushInput()}catch(e){this.error(e.message)}}async readPacket(e=null,t=this.DEFAULT_TIMEOUT){for(let r=0;r<100;r++){const{value:o}=await this.transport.read(t).next();if(!o||o.length<8)continue;const a=o[0];if(a!==1)continue;const s=o[1],n=this._byteArrayToInt(o[4],o[5],o[6],o[7]),c=o.slice(8);if(a==1){if(e==null||s==e)return[n,c];if(c[0]!=0&&c[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new W("unsupported command error")}}throw new W("invalid response")}async command(e=null,t=new Uint8Array(0),r=0,o=!0,a=this.DEFAULT_TIMEOUT){if(e!=null){this.transport.tracing&&this.transport.trace(`command op:0x${e.toString(16).padStart(2,"0")} data len=${t.length} wait_response=${o?1:0} timeout=${(a/1e3).toFixed(3)} data=${this.transport.hexConvert(t)}`);const s=new Uint8Array(8+t.length);s[0]=0,s[1]=e,s[2]=this._shortToBytearray(t.length)[0],s[3]=this._shortToBytearray(t.length)[1],s[4]=this._intToByteArray(r)[0],s[5]=this._intToByteArray(r)[1],s[6]=this._intToByteArray(r)[2],s[7]=this._intToByteArray(r)[3];let n;for(n=0;n<t.length;n++)s[8+n]=t[n];await this.transport.write(s)}return o?this.readPacket(e,a):[0,new Uint8Array(0)]}async readReg(e,t=this.DEFAULT_TIMEOUT){const r=this._intToByteArray(e);return(await this.command(this.ESP_READ_REG,r,void 0,void 0,t))[0]}async writeReg(e,t,r=4294967295,o=0,a=0){let s=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(r)),s=this._appendArray(s,this._intToByteArray(o)),a>0&&(s=this._appendArray(s,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(a))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,s)}async sync(){this.debug("Sync");const e=new Uint8Array(36);let t;for(e[0]=7,e[1]=7,e[2]=18,e[3]=32,t=0;t<32;t++)e[4+t]=85;try{let r=await this.command(8,e,void 0,void 0,100);this.syncStubDetected=r[0]===0;for(let o=0;o<7;o++)r=await this.command(),this.syncStubDetected=this.syncStubDetected&&r[0]===0;return r}catch(r){throw this.debug("Sync err "+r),r}}async _connectAttempt(e="default_reset",t){this.debug("_connect_attempt "+e),t&&await t.reset();const r=this.transport.inWaiting(),o=await this.transport.newRead(r>0?r:1,this.DEFAULT_TIMEOUT),a=Array.from(o,u=>String.fromCharCode(u)).join(""),s=/boot:(0x[0-9a-fA-F]+)(.*waiting for download)?/,n=a.match(s);let c=!1,l="",d=!1;n&&(c=!0,l=n[1],d=!!n[2]);let v="";for(let u=0;u<5;u++)try{this.debug(`Sync connect attempt ${u}`);const f=await this.sync();return this.debug(f[0].toString()),"success"}catch(f){this.debug(`Error at sync ${f}`),f instanceof Error?v=f.message:typeof f=="string"?v=f:v=JSON.stringify(f)}return c&&(v=`Wrong boot mode detected (${l}).
        This chip needs to be in download mode.`,d&&(v=`Download mode successfully detected, but getting no sync reply:
           The serial TX path seems to be down.`)),v}constructResetSequence(e){if(e!=="no_reset"){if(e==="usb_reset"||this.transport.getPid()===this.USB_JTAG_SERIAL_PID){if(this.resetConstructors.usbJTAGSerialReset)return this.debug("using USB JTAG Serial Reset"),[this.resetConstructors.usbJTAGSerialReset(this.transport)]}else if(this.resetConstructors.classicReset)return this.debug("using Classic Serial Reset"),[this.resetConstructors.classicReset(this.transport,50),this.resetConstructors.classicReset(this.transport,550)]}return[]}async connect(e="default_reset",t=7,r=!0){let o;this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions);const a=this.constructResetSequence(e);for(let s=0;s<t;s++){const n=a.length>0?a[s%a.length]:null;if(o=await this._connectAttempt(e,n),o==="success")break}if(o!=="success")throw new W("Failed to connect with the device");if(this.debug("Connect attempt successful."),this.info(`
\r`,!1),r){const s=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+s.toString(16));const n=await Ad(s);if(this.chip===null)throw new W(`Unexpected CHIP magic value ${s}. Failed to autodetect chip type.`);this.chip=n}}async detectChip(e="default_reset"){await this.connect(e),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(e="",t=null,r=new Uint8Array(0),o=0,a=this.DEFAULT_TIMEOUT){this.debug("check_command "+e);const s=await this.command(t,r,o,void 0,a);return s[1].length>4?s[1]:s[0]}async memBegin(e,t,r,o){if(this.IS_STUB){const s=o,n=o+e,c=await Zr(this.chip.CHIP_NAME);if(c){const l=[[c.bss_start||c.data_start,c.data_start+c.decodedData.length],[c.text_start,c.text_start+c.decodedText.length]];for(const[d,v]of l)if(s<v&&n>d)throw new W(`Software loader is resident at 0x${d.toString(16).padStart(8,"0")}-0x${v.toString(16).padStart(8,"0")}.
            Can't load binary at overlapping address range 0x${s.toString(16).padStart(8,"0")}-0x${n.toString(16).padStart(8,"0")}.
            Either change binary loading address, or use the no-stub option to disable the software loader.`)}}this.debug("mem_begin "+e+" "+t+" "+r+" "+o.toString(16));let a=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));a=this._appendArray(a,this._intToByteArray(r)),a=this._appendArray(a,this._intToByteArray(o)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,a)}checksum(e,t=this.ESP_CHECKSUM_MAGIC){for(let r=0;r<e.length;r++)t^=e[r];return t}async memBlock(e,t){let r=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,e);const o=this.checksum(e);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,r,o)}async memFinish(e){const t=e===0?1:0,r=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,r,void 0,200)}async flashSpiAttach(e){const t=this._intToByteArray(e);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,t)}timeoutPerMb(e,t){const r=e*(t/1e6);return r<3e3?3e3:r}async flashBegin(e,t){const r=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),o=this.chip.getEraseSize(t,e),a=new Date,s=a.getTime();let n=3e3;this.IS_STUB==!1&&(n=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,e)),this.debug("flash begin "+o+" "+r+" "+this.FLASH_WRITE_SIZE+" "+t+" "+e);let c=this._appendArray(this._intToByteArray(o),this._intToByteArray(r));c=this._appendArray(c,this._intToByteArray(this.FLASH_WRITE_SIZE)),c=this._appendArray(c,this._intToByteArray(t)),this.IS_STUB==!1&&(c=this._appendArray(c,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,c,void 0,n);const l=a.getTime();return e!=0&&this.IS_STUB==!1&&this.info("Took "+(l-s)/1e3+"."+(l-s)%1e3+"s to erase flash block"),r}async flashDeflBegin(e,t,r){const o=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=new Date,n=s.getTime();let c,l;this.IS_STUB?(c=e,l=this.DEFAULT_TIMEOUT):(c=a*this.FLASH_WRITE_SIZE,l=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,c)),this.info("Compressed "+e+" bytes to "+t+"...");let d=this._appendArray(this._intToByteArray(c),this._intToByteArray(o));d=this._appendArray(d,this._intToByteArray(this.FLASH_WRITE_SIZE)),d=this._appendArray(d,this._intToByteArray(r)),(this.chip.CHIP_NAME==="ESP32-S2"||this.chip.CHIP_NAME==="ESP32-S3"||this.chip.CHIP_NAME==="ESP32-C3"||this.chip.CHIP_NAME==="ESP32-C2")&&this.IS_STUB===!1&&(d=this._appendArray(d,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,d,void 0,l);const v=s.getTime();return e!=0&&this.IS_STUB===!1&&this.info("Took "+(v-n)/1e3+"."+(v-n)%1e3+"s to erase flash block"),o}async flashBlock(e,t,r){let o=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,e);const a=this.checksum(e);await this.checkCommand("write to target Flash after seq "+t,this.ESP_FLASH_DATA,o,a,r)}async flashDeflBlock(e,t,r){let o=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,e);const a=this.checksum(e);this.debug("flash_defl_block "+e[0].toString(16)+" "+e[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+t,this.ESP_FLASH_DEFL_DATA,o,a,r)}async flashFinish(e=!1){const t=e?0:1,r=this._intToByteArray(t);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,r)}async flashDeflFinish(e=!1){const t=e?0:1,r=this._intToByteArray(t);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,r)}async runSpiflashCommand(e,t,r){const n=this.chip.SPI_REG_BASE,c=n+0,l=n+this.chip.SPI_USR_OFFS,d=n+this.chip.SPI_USR1_OFFS,v=n+this.chip.SPI_USR2_OFFS,u=n+this.chip.SPI_W0_OFFS;let f;this.chip.SPI_MOSI_DLEN_OFFS!=null?f=async(w,I)=>{const C=n+this.chip.SPI_MOSI_DLEN_OFFS,T=n+this.chip.SPI_MISO_DLEN_OFFS;w>0&&await this.writeReg(C,w-1),I>0&&await this.writeReg(T,I-1)}:f=async(w,I)=>{const C=d,T=17,R=8,ee=w===0?0:w-1,j=(I===0?0:I-1)<<R|ee<<T;await this.writeReg(C,j)};const _=1<<18,y=28;if(r>32)throw new W("Reading more than 32 bits back from a SPI flash operation is unsupported");if(t.length>64)throw new W("Writing more than 64 bytes of data with one SPI command is unsupported");const x=t.length*8,b=await this.readReg(l),E=await this.readReg(v);let S=-2147483648,m;r>0&&(S|=268435456),x>0&&(S|=134217728),await f(x,r),await this.writeReg(l,S);let k=7<<y|e;if(await this.writeReg(v,k),x==0)await this.writeReg(u,0);else{if(t.length%4!=0){const I=new Uint8Array(t.length%4);t=this._appendArray(t,I)}let w=u;for(m=0;m<t.length-4;m+=4)k=this._byteArrayToInt(t[m],t[m+1],t[m+2],t[m+3]),await this.writeReg(w,k),w+=4}for(await this.writeReg(c,_),m=0;m<10&&(k=await this.readReg(c)&_,k!=0);m++);if(m===10)throw new W("SPI command did not complete in time");const O=await this.readReg(u);return await this.writeReg(l,b),await this.writeReg(v,E),O}async readFlashId(){const t=new Uint8Array(0);return await this.runSpiflashCommand(159,t,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let e=new Date;const t=e.getTime(),r=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);e=new Date;const o=e.getTime();return this.info("Chip erase completed successfully in "+(o-t)/1e3+"s"),r}toHex(e){return Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join("")}async flashMd5sum(e,t){const r=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,t);let o=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0));let a=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,o,void 0,r);return a instanceof Uint8Array&&a.length>16&&(a=a.slice(0,16)),this.toHex(a)}async readFlash(e,t,r=null){let o=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(4096)),o=this._appendArray(o,this._intToByteArray(1024));const a=await this.checkCommand("read flash",this.ESP_READ_FLASH,o);if(a!=0)throw new W("Failed to read memory: "+a);let s=new Uint8Array(0);for(;s.length<t;){const{value:n}=await this.transport.read(this.FLASH_READ_TIMEOUT).next();if(n instanceof Uint8Array)n.length>0&&(s=this._appendArray(s,n),await this.transport.write(this._intToByteArray(s.length)),r&&r(n,s.length,t));else throw new W("Failed to read memory: "+n)}return s}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");const e=await Zr(this.chip.CHIP_NAME);if(e===void 0)throw this.debug("Error loading Stub json"),new Error("Error loading Stub json");const t=[e.decodedText,e.decodedData];for(let a=0;a<t.length;a++)if(t[a]){const s=a===0?e.text_start:e.data_start,n=t[a].length,c=Math.floor((n+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK);await this.memBegin(n,c,this.ESP_RAM_BLOCK,s);for(let l=0;l<c;l++){const d=l*this.ESP_RAM_BLOCK,v=d+this.ESP_RAM_BLOCK;await this.memBlock(t[a].slice(d,v),l)}}this.info("Running stub..."),await this.memFinish(e.entry);const{value:r}=await this.transport.read(this.DEFAULT_TIMEOUT).next(),o=String.fromCharCode(...r);if(o!=="OHAI")throw new W(`Failed to start stub. Unexpected response ${o}`);return this.info("Stub running..."),this.IS_STUB=!0,this.chip}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const e=this.IS_STUB?this.romBaudrate:0,t=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(e));await this.command(this.ESP_CHANGE_BAUDRATE,t),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions)}async main(e="default_reset"){await this.detectChip(e);const t=await this.chip.getChipDescription(this);return this.info("Chip is "+t),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),typeof this.chip.postConnect<"u"&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),t}parseFlashSizeArg(e){if(typeof this.chip.FLASH_SIZES[e]>"u")throw new W("Flash size "+e+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[e]}_updateImageFlashParams(e,t,r,o,a){if(this.debug("_update_image_flash_params "+r+" "+o+" "+a),e.length<8||t!=this.chip.BOOTLOADER_FLASH_OFFSET)return e;if(r==="keep"&&o==="keep"&&a==="keep")return this.info("Not changing the image"),e;const s=parseInt(e[0]);let n=parseInt(e[2]);const c=parseInt(e[3]);if(s!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+t.toString(16)+" doesn't look like an image file, so not changing any flash settings."),e;o!=="keep"&&(n={qio:0,qout:1,dio:2,dout:3}[o]);let l=c&15;a!=="keep"&&(l={"40m":0,"26m":1,"20m":2,"80m":15}[a]);let d=c&240;r!=="keep"&&(d=this.parseFlashSizeArg(r));const v=n<<8|l+d;return this.info("Flash params set to "+v.toString(16)),parseInt(e[2])!==n<<8&&(e=e.substring(0,2)+(n<<8).toString()+e.substring(3)),parseInt(e[3])!==l+d&&(e=e.substring(0,3)+(l+d).toString()+e.substring(4)),e}async writeFlash(e){if(this.debug("EspLoader program"),e.flashSize!=="keep"){const o=this.flashSizeBytes(e.flashSize);for(let a=0;a<e.fileArray.length;a++)if(e.fileArray[a].data.length+e.fileArray[a].address>o)throw new W(`File ${a+1} doesn't fit in the available flash`)}this.IS_STUB===!0&&e.eraseAll===!0&&await this.eraseFlash();let t,r;for(let o=0;o<e.fileArray.length;o++){if(this.debug("Data Length "+e.fileArray[o].data.length),t=e.fileArray[o].data,this.debug("Image Length "+t.length),t.length===0){this.debug("Warning: File is empty");continue}t=this.ui8ToBstr(kd(this.bstrToUi8(t),4)),r=e.fileArray[o].address,t=this._updateImageFlashParams(t,r,e.flashSize,e.flashMode,e.flashFreq);let a=null;e.calculateMD5Hash&&(a=e.calculateMD5Hash(t),this.debug("Image MD5 "+a));const s=t.length;let n;if(e.compress){const b=this.bstrToUi8(t);t=this.ui8ToBstr(md(b,{level:9})),n=await this.flashDeflBegin(s,t.length,r)}else n=await this.flashBegin(s,r);let c=0,l=0;const d=t.length;e.reportProgress&&e.reportProgress(o,0,d);let v=new Date;const u=v.getTime();let f=5e3;const _=new vd({chunkSize:1});let y=0;for(_.onData=function(b){y+=b.byteLength};t.length>0;){this.debug("Write loop "+r+" "+c+" "+n),this.info("Writing at 0x"+(r+y).toString(16)+"... ("+Math.floor(100*(c+1)/n)+"%)");const b=this.bstrToUi8(t.slice(0,this.FLASH_WRITE_SIZE));if(e.compress){const E=y;_.push(b,!1);const S=y-E;let m=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,S)>3e3&&(m=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,S)),this.IS_STUB===!1&&(f=m),await this.flashDeflBlock(b,c,f),this.IS_STUB&&(f=m)}else throw new W("Yet to handle Non Compressed writes");l+=b.length,t=t.slice(this.FLASH_WRITE_SIZE,t.length),c++,e.reportProgress&&e.reportProgress(o,l,d)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,f),v=new Date;const x=v.getTime()-u;if(e.compress&&this.info("Wrote "+s+" bytes ("+l+" compressed) at 0x"+r.toString(16)+" in "+x/1e3+" seconds."),a){const b=await this.flashMd5sum(r,s);if(new String(b).valueOf()!=new String(a).valueOf())throw this.info("File  md5: "+a),this.info("Flash md5: "+b),new W("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),e.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const e=await this.readFlashId();this.info("Manufacturer: "+(e&255).toString(16));const t=e>>16&255;this.info("Device: "+(e>>8&255).toString(16)+t.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[t])}async getFlashSize(){this.debug("flash_id");const t=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[t]}async softReset(e){if(this.IS_STUB){if(this.chip.CHIP_NAME!="ESP8266")throw new W("Soft resetting is currently only supported on ESP8266");e?(await this.flashBegin(0,0),await this.flashFinish(!0)):await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}else{if(e)return;await this.flashBegin(0,0),await this.flashFinish(!1)}}async after(e="hard_reset",t){switch(e){case"hard_reset":this.resetConstructors.hardReset&&(this.info("Hard resetting via RTS pin..."),await this.resetConstructors.hardReset(this.transport,t).reset());break;case"soft_reset":this.info("Soft resetting..."),await this.softReset(!1);break;case"no_reset_stub":this.info("Staying in flasher stub.");break;default:this.info("Staying in bootloader."),this.IS_STUB&&this.softReset(!0);break}}}const it=async i=>{console.log("Triggering reset"),await i.device.setSignals({dataTerminalReady:!1,requestToSend:!0}),await Te(250),await i.device.setSignals({dataTerminalReady:!1,requestToSend:!1}),await Te(250),await new Promise(e=>setTimeout(e,1e3))},Rd=async(i,e,t,r,o)=>{let a,s;const n=y=>i({...y,manifest:r,build:a,chipFamily:s}),c=new ta(e),l=new Td({transport:c,baudrate:115200,romBaudrate:115200,enableTracing:!1});window.esploader=l,n({state:"initializing",message:"Initializing...",details:{done:!1}});try{await l.main(),await l.flashId()}catch(y){console.error(y),n({state:"error",message:"Failed to initialize. Try resetting your device or holding the BOOT button while clicking INSTALL.",details:{error:"failed_initialize",details:y}}),await it(c),await c.disconnect();return}if(s=l.chip.CHIP_NAME,n({state:"initializing",message:`Initialized. Found ${s}`,details:{done:!0}}),a=r.builds.find(y=>y.chipFamily===s),!a){n({state:"error",message:`Your ${s} board is not supported.`,details:{error:"not_supported",details:s}}),await it(c),await c.disconnect();return}n({state:"preparing",message:"Preparing installation...",details:{done:!1}});const d=new URL(t,location.toString()).toString(),v=a.parts.map(async y=>{const x=new URL(y.path,d).toString(),b=await fetch(x);if(!b.ok)throw new Error(`Downlading firmware ${y.path} failed: ${b.status}`);const E=new FileReader,S=await b.blob();return new Promise(m=>{E.addEventListener("load",()=>m(E.result)),E.readAsBinaryString(S)})}),u=[];let f=0;for(let y=0;y<v.length;y++)try{const x=await v[y];u.push({data:x,address:a.parts[y].offset}),f+=x.length}catch(x){n({state:"error",message:x.message,details:{error:"failed_firmware_download",details:x.message}}),await it(c),await c.disconnect();return}n({state:"preparing",message:"Installation prepared",details:{done:!0}}),o&&(n({state:"erasing",message:"Erasing device...",details:{done:!1}}),await l.eraseFlash(),n({state:"erasing",message:"Device erased",details:{done:!0}})),n({state:"writing",message:"Writing progress: 0%",details:{bytesTotal:f,bytesWritten:0,percentage:0}});let _=0;try{await l.writeFlash({fileArray:u,flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0,reportProgress:(y,x,b)=>{const E=x/b*u[y].data.length,S=Math.floor((_+E)/f*100);if(x===b){_+=E;return}n({state:"writing",message:`Writing progress: ${S}%`,details:{bytesTotal:f,bytesWritten:_+x,percentage:S}})}})}catch(y){n({state:"error",message:y.message,details:{error:"write_failed",details:y}}),await it(c),await c.disconnect();return}n({state:"writing",message:"Writing complete",details:{bytesTotal:f,bytesWritten:_,percentage:100}}),await it(c),console.log("DISCONNECT"),await c.disconnect(),n({state:"finished",message:"All done!"})},Id=(i,e="")=>{const t=document.createElement("a");t.target="_blank",t.href=i,t.download=e,document.body.appendChild(t),t.dispatchEvent(new MouseEvent("click")),document.body.removeChild(t)},Cd=(i,e="")=>{const t=new Blob([i],{type:"text/plain"}),r=URL.createObjectURL(t);Id(r,e),setTimeout(()=>URL.revokeObjectURL(r),0)},Ld=(i,e,t,r)=>{r=r||{};const o=new CustomEvent(e,{bubbles:r.bubbles===void 0?!0:r.bubbles,cancelable:!!r.cancelable,composed:r.composed===void 0?!0:r.composed,detail:t});i.dispatchEvent(o)},$d=async i=>{const e=new URL(i,location.toString()).toString(),r=await(await fetch(e)).json();return"new_install_skip_erase"in r&&(console.warn('Manifest option "new_install_skip_erase" is deprecated. Use "new_install_prompt_erase" instead.'),r.new_install_skip_erase&&(r.new_install_prompt_erase=!0)),r},Dd="10.1.1";console.log(`ESP Web Tools ${Dd} by Open Home Foundation; https://esphome.github.io/esp-web-tools/`);const Wr="",Gr="";class se extends N{constructor(){super(...arguments),this.logger=console,this._state="DASHBOARD",this._installErase=!1,this._installConfirmed=!1,this._provisionForce=!1,this._wasProvisioned=!1,this._busy=!1,this._selectedSsid=null,this._bodyOverflow=null,this._handleDisconnect=()=>{this._state="ERROR",this._error="Disconnected"}}render(){if(!this.port)return g``;let e,t,r=!1;return this._client===void 0&&this._state!=="INSTALL"&&this._state!=="LOGS"?this._error?[e,t]=this._renderError(this._error):t=this._renderProgress("Connecting"):this._state==="INSTALL"?[e,t,r]=this._renderInstall():this._state==="ASK_ERASE"?[e,t]=this._renderAskErase():this._state==="ERROR"?[e,t]=this._renderError(this._error):this._state==="DASHBOARD"?[e,t,r]=this._client?this._renderDashboard():this._renderDashboardNoImprov():this._state==="PROVISION"?[e,t]=this._renderProvision():this._state==="LOGS"&&([e,t]=this._renderLogs()),g`
      <ew-dialog
        open
        .heading=${e}
        @cancel=${this._preventDefault}
        @closed=${this._handleClose}
      >
        ${e?g`<div slot="headline">${e}</div>`:""}
        ${r?g`
              <ew-icon-button slot="headline" @click=${this._closeDialog}>
                ${ws}
              </ew-icon-button>
            `:""}
        ${t}
      </ew-dialog>
    `}_renderProgress(e,t){return g`
      <ewt-page-progress
        slot="content"
        .label=${e}
        .progress=${t}
      ></ewt-page-progress>
    `}_renderError(e){const t="Error",r=g`
      <ewt-page-message
        slot="content"
        .icon=${Wr}
        .label=${e}
      ></ewt-page-message>
      <div slot="actions">
        <ew-text-button @click=${this._closeDialog}>Close</ew-text-button>
      </div>
    `;return[t,r]}_renderDashboard(){const e=this._manifest.name;let t,r=!0;return t=g`
      <div slot="content">
        <ew-list>
          <ew-list-item>
            <div slot="headline">Connected to ${this._info.name}</div>
            <div slot="supporting-text">
              ${this._info.firmware}&nbsp;${this._info.version}
              (${this._info.chipFamily})
            </div>
          </ew-list-item>
          ${this._isSameVersion?"":g`
                <ew-list-item
                  type="button"
                  @click=${()=>{this._isSameFirmware?this._startInstall(!1):this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
                >
                  ${Qi}
                  <div slot="headline">
                    ${this._isSameFirmware?`Update ${this._manifest.name}`:`Install ${this._manifest.name}`}
                  </div>
                </ew-list-item>
              `}
          ${this._client.nextUrl===void 0?"":g`
                <ew-list-item
                  type="link"
                  href=${this._client.nextUrl}
                  target="_blank"
                >
                  ${tr}
                  <div slot="headline">Visit Device</div>
                </ew-list-item>
              `}
          ${!this._manifest.home_assistant_domain||this._client.state!==Ee.PROVISIONED?"":g`
                <ew-list-item
                  type="link"
                  href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                  target="_blank"
                >
                  ${ir}
                  <div slot="headline">Add to Home Assistant</div>
                </ew-list-item>
              `}
          <ew-list-item
            type="button"
            @click=${()=>{this._state="PROVISION",this._client.state===Ee.PROVISIONED&&(this._provisionForce=!0)}}
          >
            ${Ss}
            <div slot="headline">
              ${this._client.state===Ee.READY?"Connect to Wi-Fi":"Change Wi-Fi"}
            </div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{const o=this._client;o&&(await this._closeClientWithoutEvents(o),await Te(100)),this._client=void 0,this._state="LOGS"}}
          >
            ${er}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
          ${this._isSameFirmware&&this._manifest.funding_url?g`
                <ew-list-item
                  type="link"
                  href=${this._manifest.funding_url}
                  target="_blank"
                >
                  ${As}
                  <div slot="headline">Fund Development</div>
                </ew-list-item>
              `:""}
          ${this._isSameVersion?g`
                <ew-list-item
                  type="button"
                  class="danger"
                  @click=${()=>this._startInstall(!0)}
                >
                  ${ks}
                  <div slot="headline">Erase User Data</div>
                </ew-list-item>
              `:""}
        </ew-list>
      </div>
    `,[e,t,r]}_renderDashboardNoImprov(){const e=this._manifest.name;let t,r=!0;return t=g`
      <div slot="content">
        <ew-list>
          <ew-list-item
            type="button"
            @click=${()=>{this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
          >
            ${Qi}
            <div slot="headline">${`Install ${this._manifest.name}`}</div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{this._client=void 0,this._state="LOGS"}}
          >
            ${er}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
        </ew-list>
      </div>
    `,[e,t,r]}_renderProvision(){var e;let t="Configure Wi-Fi",r;if(this._busy)return[t,this._renderProgress(this._ssids===void 0?"Scanning for networks":"Trying to connect")];if(!this._provisionForce&&this._client.state===Ee.PROVISIONED){t=void 0;const o=!this._wasProvisioned&&(this._client.nextUrl!==void 0||"home_assistant_domain"in this._manifest);r=g`
        <div slot="content">
          <ewt-page-message
            .icon=${Gr}
            label="Device connected to the network!"
          ></ewt-page-message>
          ${o?g`
                <ew-list>
                  ${this._client.nextUrl===void 0?"":g`
                        <ew-list-item
                          type="link"
                          href=${this._client.nextUrl}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${tr}
                          <div slot="headline">Visit Device</div>
                        </ew-list-item>
                      `}
                  ${this._manifest.home_assistant_domain?g`
                        <ew-list-item
                          type="link"
                          href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${ir}
                          <div slot="headline">Add to Home Assistant</div>
                        </ew-list-item>
                      `:""}
                  <ew-list-item
                    type="button"
                    @click=${()=>{this._state="DASHBOARD"}}
                  >
                    <div slot="start" class="fake-icon"></div>
                    <div slot="headline">Skip</div>
                  </ew-list-item>
                </ew-list>
              `:""}
        </div>

        ${o?"":g`
              <div slot="actions">
                <ew-text-button
                  @click=${()=>{this._state="DASHBOARD"}}
                >
                  Continue
                </ew-text-button>
              </div>
            `}
      `}else{let o;switch(this._client.error){case 3:o="Unable to connect";break;case 254:o="Timeout";break;case 0:case 2:break;default:o=`Unknown error (${this._client.error})`}const a=(e=this._ssids)===null||e===void 0?void 0:e.find(s=>s.name===this._selectedSsid);r=g`
        <ew-icon-button slot="headline" @click=${this._updateSsids}>
          ${Es}
        </ew-icon-button>
        <div slot="content">
          <div>Connect your device to the network to start using it.</div>
          ${o?g`<p class="error">${o}</p>`:""}
          ${this._ssids!==null?g`
                <ew-filled-select
                  menu-positioning="fixed"
                  label="Network"
                  @change=${s=>{const n=s.target.selectedIndex;this._selectedSsid=n===this._ssids.length?null:this._ssids[n].name}}
                >
                  ${this._ssids.map(s=>g`
                      <ew-select-option
                        .selected=${a===s}
                        .value=${s.name}
                      >
                        ${s.name}
                      </ew-select-option>
                    `)}
                  <ew-divider></ew-divider>
                  <ew-select-option .selected=${!a}>
                    Join other
                  </ew-select-option>
                </ew-filled-select>
              `:""}
          ${a?"":g`
                  <ew-filled-text-field
                    label="Network Name"
                    name="ssid"
                  ></ew-filled-text-field>
                `}
          ${!a||a.secured?g`
                <ew-filled-text-field
                  label="Password"
                  name="password"
                  type="password"
                ></ew-filled-text-field>
              `:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            ${this._installState&&this._installErase?"Skip":"Back"}
          </ew-text-button>
          <ew-text-button @click=${this._doProvision}>Connect</ew-text-button>
        </div>
      `}return[t,r]}_renderAskErase(){const e="Erase device",t=g`
      <div slot="content">
        <div>
          Do you want to erase the device before installing
          ${this._manifest.name}? All data on the device will be lost.
        </div>
        <label class="formfield">
          <ew-checkbox touch-target="wrapper" class="danger"></ew-checkbox>
          Erase device
        </label>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${()=>{this._state="DASHBOARD"}}
        >
          Back
        </ew-text-button>
        <ew-text-button
          @click=${()=>{const r=this.shadowRoot.querySelector("ew-checkbox");this._startInstall(r.checked)}}
        >
          Next
        </ew-text-button>
      </div>
    `;return[e,t]}_renderInstall(){let e,t;const o=!this._installErase&&this._isSameFirmware;if(!this._installConfirmed&&this._isSameVersion)e="Erase User Data",t=g`
        <div slot="content">
          Do you want to reset your device and erase all user data from your
          device?
        </div>
        <div slot="actions">
          <ew-text-button class="danger" @click=${this._confirmInstall}>
            Erase User Data
          </ew-text-button>
        </div>
      `;else if(this._installConfirmed)if(!this._installState||this._installState.state==="initializing"||this._installState.state==="preparing")e="Installing",t=this._renderProgress("Preparing installation");else if(this._installState.state==="erasing")e="Installing",t=this._renderProgress("Erasing");else if(this._installState.state==="writing"||this._installState.state==="finished"&&this._client===void 0){e="Installing";let a,s;this._installState.state==="finished"?s="Wrapping up":this._installState.details.percentage<4?s="Installing":a=this._installState.details.percentage,t=this._renderProgress(g`
          ${s?g`${s}<br />`:""}
          <br />
          This will take
          ${this._installState.chipFamily==="ESP8266"?"a minute":"2 minutes"}.<br />
          Keep this page visible to prevent slow down
        `,a)}else if(this._installState.state==="finished"){e=void 0;const a=this._client!==null;t=g`
        <ewt-page-message
          slot="content"
          .icon=${Gr}
          label="Installation complete!"
        ></ewt-page-message>

        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state=a&&this._installErase?"PROVISION":"DASHBOARD"}}
          >
            Next
          </ew-text-button>
        </div>
      `}else this._installState.state==="error"&&(e="Installation failed",t=g`
        <ewt-page-message
          slot="content"
          .icon=${Wr}
          .label=${this._installState.message}
        ></ewt-page-message>
        <div slot="actions">
          <ew-text-button
            @click=${async()=>{this._initialize(),this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
        </div>
      `);else{e="Confirm Installation";const a=o?"update to":"install";t=g`
        <div slot="content">
          ${o?g`Your device is running
                ${this._info.firmware}&nbsp;${this._info.version}.<br /><br />`:""}
          Do you want to ${a}
          ${this._manifest.name}&nbsp;${this._manifest.version}?
          ${this._installErase?g`<br /><br />All data on the device will be erased.`:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
          <ew-text-button @click=${this._confirmInstall}>
            Install
          </ew-text-button>
        </div>
      `}return[e,t,!1]}_renderLogs(){let e="Logs",t;return t=g`
      <div slot="content">
        <ewt-console .port=${this.port} .logger=${this.logger}></ewt-console>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Reset Device
        </ew-text-button>
        <ew-text-button
          @click=${()=>{Cd(this.shadowRoot.querySelector("ewt-console").logs(),"esp-web-tools-logs.txt"),this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Download Logs
        </ew-text-button>
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").disconnect(),this._state="DASHBOARD",this._initialize()}}
        >
          Back
        </ew-text-button>
      </div>
    `,[e,t]}willUpdate(e){e.has("_state")&&(this._state!=="ERROR"&&(this._error=void 0),this._state==="PROVISION"?this._updateSsids():this._provisionForce=!1,this._state==="INSTALL"&&(this._installConfirmed=!1,this._installState=void 0))}async _updateSsids(e=0){const t=this._ssids;this._ssids=void 0,this._busy=!0;let r;try{r=await this._client.scan()}catch{this._ssids===void 0&&(this._ssids=null,this._selectedSsid=null),this._busy=!1;return}if(r.length===0&&e<3){console.log("SCHEDULE RETRY",e),setTimeout(()=>this._updateSsids(e+1),1e3);return}t?this._selectedSsid&&!r.find(o=>o.name===this._selectedSsid)&&(this._selectedSsid=r[0].name):this._selectedSsid=r.length?r[0].name:null,this._ssids=r,this._busy=!1}firstUpdated(e){super.firstUpdated(e),this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this._initialize()}updated(e){super.updated(e),e.has("_state")&&this.setAttribute("state",this._state),this._state==="PROVISION"&&(e.has("_selectedSsid")&&this._selectedSsid===null?this._focusFormElement("ew-filled-text-field[name=ssid]"):e.has("_ssids")&&this._focusFormElement())}_focusFormElement(e="ew-filled-text-field, ew-filled-select"){const t=this.shadowRoot.querySelector(e);t&&t.updateComplete.then(()=>setTimeout(()=>t.focus(),100))}async _initialize(e=!1){if(this.port.readable===null||this.port.writable===null){this._state="ERROR",this._error="Serial port is not readable/writable. Close any other application using it and try again.";return}try{this._manifest=await $d(this.manifestPath)}catch{this._state="ERROR",this._error="Failed to download manifest";return}if(this._manifest.new_install_improv_wait_time===0){this._client=null;return}const t=new Ls(this.port,this.logger);t.addEventListener("state-changed",()=>{this.requestUpdate()}),t.addEventListener("error-changed",()=>this.requestUpdate());try{const r=e?this._manifest.new_install_improv_wait_time!==void 0?this._manifest.new_install_improv_wait_time*1e3:1e4:1e3;this._info=await t.initialize(r),this._client=t,t.addEventListener("disconnect",this._handleDisconnect)}catch(r){this._info=void 0,r instanceof bo?(this._state="ERROR",this._error="Serial port is not ready. Close any other application using it and try again."):(this._client=null,this.logger.error("Improv initialization failed.",r))}}_startInstall(e){this._state="INSTALL",this._installErase=e,this._installConfirmed=!1}async _confirmInstall(){this._installConfirmed=!0,this._installState=void 0,this._client&&await this._closeClientWithoutEvents(this._client),this._client=void 0,await this.port.close(),Rd(e=>{this._installState=e,e.state==="finished"?Te(100).then(()=>this.port.open({baudRate:115200,bufferSize:8192})).then(()=>this._initialize(!0)).then(()=>this.requestUpdate()):e.state==="error"&&Te(100).then(()=>this.port.open({baudRate:115200,bufferSize:8192}))},this.port,this.manifestPath,this._manifest,this._installErase)}async _doProvision(){var e;this._busy=!0,this._wasProvisioned=this._client.state===Ee.PROVISIONED;const t=this._selectedSsid===null?this.shadowRoot.querySelector("ew-filled-text-field[name=ssid]").value:this._selectedSsid,r=((e=this.shadowRoot.querySelector("ew-filled-text-field[name=password]"))===null||e===void 0?void 0:e.value)||"";try{await this._client.provision(t,r,3e4)}catch{return}finally{this._busy=!1,this._provisionForce=!1}}_closeDialog(){this.shadowRoot.querySelector("ew-dialog").close()}async _handleClose(){this._client&&await this._closeClientWithoutEvents(this._client),Ld(this,"closed"),document.body.style.overflow=this._bodyOverflow,this.parentNode.removeChild(this)}get _isSameFirmware(){var e;return this._info?!((e=this.overrides)===null||e===void 0)&&e.checkSameFirmware?this.overrides.checkSameFirmware(this._manifest,this._info):this._info.firmware===this._manifest.name:!1}get _isSameVersion(){return this._isSameFirmware&&this._info.version===this._manifest.version}async _closeClientWithoutEvents(e){e.removeEventListener("disconnect",this._handleDisconnect),await e.close()}_preventDefault(e){e.preventDefault()}}se.styles=[la,H`
      :host {
        --mdc-dialog-max-width: 390px;
      }
      div[slot="headline"] {
        padding-right: 48px;
      }
      ew-icon-button[slot="headline"] {
        position: absolute;
        right: 4px;
        top: 8px;
      }
      ew-icon-button[slot="headline"] svg {
        padding: 8px;
        color: var(--text-color);
      }
      .dialog-nav svg {
        color: var(--text-color);
      }
      .table-row {
        display: flex;
      }
      .table-row.last {
        margin-bottom: 16px;
      }
      .table-row svg {
        width: 20px;
        margin-right: 8px;
      }
      ew-filled-text-field,
      ew-filled-select {
        display: block;
        margin-top: 16px;
      }
      label.formfield {
        display: inline-flex;
        align-items: center;
        padding-right: 8px;
      }
      ew-list {
        margin: 0 -24px;
        padding: 0;
      }
      ew-list-item svg {
        height: 24px;
      }
      ewt-page-message + ew-list {
        padding-top: 16px;
      }
      .fake-icon {
        width: 24px;
      }
      .error {
        color: var(--danger-color);
      }
      .danger {
        --mdc-theme-primary: var(--danger-color);
        --mdc-theme-secondary: var(--danger-color);
        --md-sys-color-primary: var(--danger-color);
        --md-sys-color-on-surface: var(--danger-color);
      }
      button.link {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        text-align: left;
        text-decoration: underline;
        cursor: pointer;
      }
      :host([state="LOGS"]) ew-dialog {
        max-width: 90vw;
        max-height: 90vh;
      }
      ewt-console {
        width: calc(80vw - 48px);
        height: calc(90vh - 168px);
      }
    `];h([P()],se.prototype,"_client",void 0);h([P()],se.prototype,"_state",void 0);h([P()],se.prototype,"_installErase",void 0);h([P()],se.prototype,"_installConfirmed",void 0);h([P()],se.prototype,"_installState",void 0);h([P()],se.prototype,"_provisionForce",void 0);h([P()],se.prototype,"_error",void 0);h([P()],se.prototype,"_busy",void 0);h([P()],se.prototype,"_ssids",void 0);h([P()],se.prototype,"_selectedSsid",void 0);customElements.define("ewt-install-dialog",se);export{se as EwtInstallDialog};
